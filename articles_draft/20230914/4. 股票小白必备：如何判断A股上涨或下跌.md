
作者：禅与计算机程序设计艺术                    

# 1.简介
  

在股市中，我们经常会看到有些股票的价格突然上涨了好几倍，或者一下子下跌了好几十倍。那么，这些事件到底意味着什么？这就需要我们从交易者的角度出发，用对市场的深入了解去理解这些股票的涨跌。

A股作为股票市场，其波动性非常高，从某种程度上来说，即使某只股票的收盘价再跌，也可能是在发生大事件影响后才会重新回升。因此，对于股票的买卖行为，我们更应该抱着开放的心态，多听取多视角的意见。

当然，首先还是要搞清楚一些基本概念和术语。

# 2.基本概念与术语
## 2.1 A股的价格涨跌
A股的价格每天都在变动，但由于股市的特性，它的涨跌往往比市场平均值要慢一些。当股票的价格被认为处于低估状态时，投资者就会持有它；而当它处于高估状态时，则会抛售它。

在A股，股票的价格通常可以分成开盘价、最高价、最低价、收盘价四个阶段。

- 开盘价（Open Price）: 是指当天的股价的起始点。
- 最高价（High Price）: 是指当前交易日内的最高价，由报价最高的一只股票所决定的。
- 最低价（Low Price）: 是指当前交易日内的最低价，由报价最低的一只股票所决定的。
- 收盘价（Close Price）: 是指当天最后交易结束时，股价达到的最新成交价。

一般情况下，A股的股票在平时波动较大，但是每年都会有很多大事件出现。比如1997年金融危机爆发，股市震荡了一阵，导致许多投资者流失，期间股价一度狂跌。一旦这种危机继续下去，股票的价格的波动将加剧，甚至成为亏损的来源。

## 2.2 技术分析方法
技术分析是一门研究如何预测、跟踪和分析股价走势的科学。技术分析又可以细分为三类：趋势型分析、转折型分析、超买超卖型分析。其中趋势型分析、超买超卖型分析属于分类学派，而转折型分析属于量化派。

### 2.2.1 趋势型分析
趋势型分析通过观察股价的长期走势，判断其方向是否会继续保持或反转。

#### 1) MACD指标
MACD(Moving Average Convergence Divergence)，中文名称叫移动平均 convergence/divergence指标。它是一个由快线、慢线和讯号线组成的股价分析指标。

- 慢线：一般是移动平均线，移动速度慢，长度一般为9日、12日、26日等。
- 快线：是指的是以一定周期（例如12日）计算的移动平均线。
- 讯号线：区别于快慢线之间存在的分界线。讯号线是由快线和慢线之间的差值，称为讯号，负数表示短期下跌，正数表示短期上涨，讯号线越接近零，表示趋势性越强烈，股价也随之转变。

具体的操作步骤如下：

1. 计算快线和慢线：将N日的收盘价的均线，N一般为12、26、9，分别记作EMAfast、EMAslow和EMAdiff。
2. 计算讯号线：EMAdiff = EMAfast - EMAslow，取绝对值。
3. 根据讯号线的曲线进行买卖信号。讯号线从上向下穿越零轴时买入，从下向上穿越零轴时卖出。

#### 2) RSI指标
RSI(Relative Strength Index)，中文名称叫相对强弱指数，用于判断一段时间内股价走势的变化，判断股价的上涨和下跌力度。

- RSI值在100以上表明股价处于超买状态，值在0~30之间时股价处于弱势；
- RSI值在30以下表明股价处于超卖状态，值在70~100之间时股价处于强势。

具体的操作步骤如下：

1. 算出N日的RSI值：
   RSI = (CLOSE-REF(CLOSE,N))/MAX(ABS(REF(CLOSE,N)-REF(LOW,N)),ABS(REF(HIGH,N)-REF(CLOSE,N)))*100 
   其中，N为时间窗长度（一般为14日），CLOSE为收盘价，REF为数据中的前一个数据，LOW、HIGH为最低价和最高价。

2. 根据RSI值的变化情况进行买卖信号。RSI从100~70时买入，从70~30时卖出。

#### 3) BOLL指标
BOLL(Bollinger Bands)，中文名称叫布林带，是一种支持和 resistance两条线围绕股价，用来判断股价走势和未来波动的走势。

- 中轨线：股价的平均线，上下各延申标准差的值。
- 上轨线：中轨线 + 两倍的标准差。
- 下轨线：中轨线 - 两倍的标准差。

具体的操作步骤如下：

1. 用M日的收盘价计算M日的移动平均线（MA）。
2. 在MA的基础上计算M日的标准差STD。
3. 以收盘价减去M日的标准差STD乘以2得到BOLL Band宽度。
4. 将收盘价作为基准点，将BOLL Band宽度分成两段，一段作为中轨线，另一段作为上下轨线。

#### 4) DMI指标
DMI(Directional Movement Index)，中文名称叫趋向指数，主要用来判断股价走势及其方向。

- DI+：多空指标+DI，连续多头排列，向上推进，反映短期内股价上升趋势。
- DI-：多空指标-DI，连续空头排列，向下推进，反映短期内股价下降趋势。
- ADX：平均趋向指数，用DI+和DI-的平均来衡量股价的推进力度。

具体的操作步骤如下：

1. 计算ADX：ADX = MA(abs(DM)) / MA(TR)，其中，DM=(high-low)/(high+low)*100；TR=max(high-open, abs(close-open), close-low)。
2. 计算DI+：根据最近14日的最高价和最低价来计算上升动向指标。当最高价在第i日之后第k日内超过最低价时，记录正值（k代表的距离可调节）。
3. 计算DI-：根据最近14日的最高价和最低价来计算下降动向指标。当最低价在第i日之后第k日内超过最高价时，记录负值（k代表的距离可调节）。
4. 判断股价的推进情况。
    - 如果ADX>25且DI+大于DI-，则认为股价上升且强势，适合做多。
    - 如果ADX>25且DI-大于DI+，则认为股价下降且弱势，适合做空。
    - 如果ADX<20，建议适当减仓。
    
### 2.2.2 超买超卖型分析
超买超卖型分析主要依据技术指标，如MA、KDJ、CCI等，通过技术分析识别买入、卖出的信号，从而决定是否买入、卖出股票。

#### 1) 布林线
布林线（Bollinger Bands）是由曼德尔法罗斯（Madrid Fractals）在1980年提出的一种交易指标。它由一个平均线（ma）、一个上轨线（upper band）和一个下轨线（lower band）构成。

- ma：设定n天的移动平均线，如20日。
- upper band：取3倍的标准差，加上ma值，得到上轨线。
- lower band：取3倍的标准差，减去ma值，得到下轨线。

具体的操作步骤如下：

1. 用M日的收盘价计算M日的移动平均线（MA）。
2. 在MA的基础上计算M日的标准差STD。
3. 以收盘价减去M日的标准差STD乘以3得到上轨线和下轨线的宽度。
4. 将收盘价作为基准点，将上轨线和下轨线的宽度分成两段，一段作为中轨线，另一段作为上下轨线。

#### 2) KDJ指标
KDJ指标（Stochastic Oscillator），中文名称叫随机指标，它帮助判断股价变动的趋势。

- K值：K值指标在一定时间范围内的最高价的位置除以该范围的总体长度。
- D值：D值指标在一定时间范围内的最高价的位置与最低价的位置之间的距离除以该时间范围的总体长度。
- J值：J值指标采用3日ema与3日ema的偏差的比值来反映股价的变动状况。

具体的操作步骤如下：

1. 确定计算KDJ的N值，一般设置为9日。
2. 对前N日的收盘价进行排序，找出最小值、最大值、最后一个值的位置。
3. K值 = （最后一个值的位置 + N/2）/N * 100%，D值 = （最大值的位置 - 最小值的位置）/N * 100%，J值 = 3日ema（K值） / 3日ema（D值）。
4. 当K值低于70时，一般认为当前股价走势比较平稳，适合买入；当K值高于80时，出现很强的向上趋势，反映市场热度很高，建议适当加仓；当K值高于90时，反映趋势开始转暖，建议适当减仓。

#### 3) CCI指标
CCI（Commodity Channel Index），中文名称叫商品通道指数，也是一种常用的技术分析指标。它基于常用的均线而构造，计算方式如下：

- TP = (最高价 + 最低价 + 收盘价)/3
- MA = M日内的TP的移动平均值
- CCI = (TP - MA) / (0.015 * Md * STD)，Md为平均绝对偏差，STD为收盘价的历史标准差

具体的操作步骤如下：

1. 计算TP值：TP = [(最高价 + 最低价 + 收盘价)/3]。
2. 计算MA值：MA = M日内的TP的移动平均值。
3. 计算Md值：Md = MA的N日累计绝对偏差。
4. 计算标准差：STD = 收盘价的历史标准差。
5. 计算CCI值。

### 2.2.3 转折型分析
转折型分析的特点是，股票的价格突然出现跳跃式的增长或下跌，这往往伴随着大幅的行情反弹。

#### 1) Candlestick Chart
蜡烛图是一种图形化的技术分析工具。它用于显示股价的变动过程，由一个最高价，一个最低价，一个开盘价和一个收盘价组成，它的特点是简单直观。

#### 2) Volume Profile
量价图是一种转折型分析的图表。它从上到下，以交易量的大小呈现出价格变化。

- 一颗橙色实心三角形代表股价的上涨趋势。
- 一根蓝色实线表示股价的持续增长。
- 一根红色虚线表示股价的下跌趋势。
- 一根绿色虚线表示股价的持续下跌。

具体的操作步骤如下：

1. 查看量价图，找出其价格突破的日期及时间。
2. 确认此时的价格位于量价图的什么位置。如果价格位于上升区域，说明股价上涨；否则，说明股价下跌。
3. 使用Candlestick Chart去确认价格确实是出现了转折。