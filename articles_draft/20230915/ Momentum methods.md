
作者：禅与计算机程序设计艺术                    

# 1.简介
  

本文将详细阐述Momentum方法，它是最早被提出并广泛应用于股票市场的技术指标。其思想基于高强度的多空力量博弈，能够快速获取超额收益。由于该技术属于机器学习（Machine Learning）类算法，因此需要对相关的数学基础知识有所了解。
# 2.基本概念术语说明
## 2.1 概念
Momentum方法是一种基于历史股价数据、财务报表数据等多种数据源的技术分析工具。由Ehlers本人创立，并在1971年首次提出。它是一个有力的工具，可以帮助投资者发现机会，发现行业中不可预测的“买点”，识别价格变化对投资组合的影响程度，以及寻找市场转折点。

Momentum方法主要分为两类：

1. 上涨动能指标（Bullish Energy Indicators，BEI）：上涨动能指标认为，未来的股市走势会出现相对超额的超级牛熊，其中包括价格上升带来的股票期现差数量的增加；以及价格下跌而引起的增持或减持，使股票持有者获得更多的股票权重。

2. 下跌动能指标（Bearish Energy Indicators，BEI）：下跌动能指标则认为，如果股市遇到下跌，那么在这个低点往前反弹的过程中，股市的期现差将更加突出，并且随之发生股票持仓者增持和减持的概率也更高。

对于每一个BEI，通常都要设计一组指标，通过某些机制来判断市场行情是否出现了超额的“买”或“卖”信号。例如，Bullish BEI的核心指标是“动量指标（Momentum Indicator）”。动量指标又称移动平均线，用于衡量股票市场的动量趋势。当股价上升时，动量指标上升，表示市场的扩张性；当股价下降时，动量指标下降，表示市场的衰退性。当股价创出新高后，动量指标将开始回暖，从而确认“买”信号；当股价创出新低后，动量指标将开始回落，从而确认“卖”信号。

除了动量指标外，还有其他一些技术指标，如相对强弱指标（RSI），布林带指标（BBI），乖离率指标（Volatility Ratio），均幅指标（Average True Range，ATR），波动率指标（Volatility Index）。这些指标都是为了探寻市场的多空博弈动向和机会成本，帮助投资者作出理性决策。

## 2.2 动量指标
动量指标又称移动平均线，它是反映市场变动方向的一种技术分析指标。其基本思路是建立在过去一定期间内股价波动的均值之上的。当股价上升时，动量指标上升，表示市场的扩张性；当股价下降时，动量指标下降，表示市场的衰退性。当股价创出新高后，动量指标将开始回暖，从而确认“买”信号；当股价创出新低后，动量指标将开始回落，从而确认“卖”信号。

股票的动量指标以收盘价的移动平均线为主要形式，由移动平均线下方的白色区域表示向上波动的股票，由移动平均线上方的黑色区域表示向下波动的股票。日K线的动量指标一般以十日移动平均线为代表，短期动量指标还可根据不同的计算周期来定义。

市场股票的动量指标分为三种类型：

1. 快动指标（Fast Moving Average，FMA）：即过去一段时间内股票的平均价格的移动平均线。它通常用于判断股票当前的上涨动能，以此判断是否可以买入。

2. 中速动力指标（Medium Term Moving Forces，MTMF）：即过去一年内股票的平均价格的移动平均线。它的存在使得股票波动范围较窄，对未来价格走势预测效果比较好。

3. 慢动力指标（Slow Moving Forces，SMF）：即过去三年内股票的平均价格的移动平均线。它主要用于判断市场总体趋势和风险状况。

以下是动量指标的计算公式：

### 2.2.1 FMA (N=10)
$$\overline{P}_{t}=\frac{\sum_{i=t-N+1}^{t}{P_i}}{N}$$   （t:天数 N:时间窗口大小） 

### 2.2.2 SMF (N=30)
$$\overline{P}_{t}=\frac{\sum_{i=t-N+1}^{t}{P_i}}{N}$$  

### 2.2.3 MTMF (N=10)
$$\overline{P}_{t}=\frac{\sum_{i=t-N+1}^{t}{P_i}}{N}$$  

## 2.3 BBI（Bollinger Bands）
BBI 是一种基于标准差的技术分析指标，用于衡量股价波动状况以及买卖时机。BBI 的计算公式如下：

$$BBL(T)=MA(C,n)\pm \sigma * \frac {SD(C,n)} {\sqrt{n}}\\[10pt]BBM(T)=MA(C,n)\\[\baselineskip]BBH(T)=MA(C,n)\pm 2*\sigma * \frac {SD(C,n)} {\sqrt{n}}$$  

其中，

- $BBL$ 为BBI 通道下轨，$BBH$ 为 BB 通道上轨，$BBM$ 为 BB 通道中轨，T 表示时刻 t 。
- MA（C，n）表示股票收盘价 C 的 n 日简单移动平均线。
- SD（C，n）表示股票收盘价 C 的 n 日标准差。
- $\sigma$ 为设定的常数，通常取值为 2 。
- $n$ 表示计算 BBI 的时间窗口大小。

BBI 的主要作用是在不同时间段观察股价波动情况。在 BBL 和 BBM 之间有若干个标准差，表示股价可能超过这两个水平的次数。而在 BBH 之后，股价必然继续下降，没有任何必要多操心。

## 2.4 RSI（Relative Strength Index，相对强弱指数）
RSI 是一种基于移动平均线的技术分析指标，用于衡量股价近期涨跌力度。其计算过程如下：

1. 计算至今的收盘价的 n 日指数移动平均线($U$)和 n 日逆指数移动平均线($D$)。
   
   $$U = \frac{1}{n}\Sigma^{n}_{i=1}(H_i - L_i)\\ D = \frac{1}{n}\Sigma^{n}_{i=1}(H_i - L_i)^2 \\ U_{n}, D_{n}=100-(100/D), 100+(100/U)$$
   
2. 根据股价的变动关系来确定 RSI 指标的指示线。
   
   如果股价上涨，RSI 指标从 0 开始逐渐增加，直到达到 100 位置。
   如果股价下跌，RSI 指标从 0 开始逐渐减少，直到达到 100 位置。

3. 在以上两条线之间，设定阀值线。
   
   当 RSI 指标超过阀值线时，视为买入信号；反之，视为卖出信号。

RSI 指标有一个缺陷，即无法有效识别异常交易信号。

## 2.5 ATR（Average True Range，平均真实波幅）
ATR 也是一种基于移动平均线的技术分析指标，用于衡量市场波动的变幅及其方向。其计算公式如下：

$$ATR_t=\frac{(ATR_{t-1}*(n-1)+|HighestHigh_t-LowestLow_t|)|2}{\frac{n-1}{n}+1}$$  

其中，

- $ATR_t$ 为时刻 t 的 ATR 值。
- $ATR_{t-1}$ 为时刻 t-1 的 ATR 值。
- $n$ 表示 ATR 的时间窗口大小。
- $HighestHigh_t$ 表示 t 时刻到今日最高价。
- $LowestLow_t$ 表示 t 时刻到今日最低价。

## 2.6 Volatility Ratio（波动率比率）
波动率比率是基于当日收盘价波动幅度和过去一段时间波动幅度之间的比率，来衡量该股票的强弱。其计算公式如下：

$$V_{\Delta t}(t)={\frac {\max (\text { Close }_{t+\Delta t}-\min (\text { Close }_{t-\Delta t},\text { Close }_{t}),|\text { High }_{t+\Delta t}-\text { Low }_{t}|)-\min (\text { Close }_{t},\text { Close }_{t-1})}{\max (\text { Close }_{t},\text { Close }_{t-1})}}$$

其中，$\Delta t$ 表示时间间隔，通常取 1 或 2 个交易日。V 值越大，表示股票的价格波动越剧烈。

## 2.7 MACD（Moving Average Convergence and Divergence，移动平均聚散指数）
MACD 指标是一种金融股票分析中的技术指标，通过计算长期异同移动平均线来判别市场趋势和盘整。它与其他动量指标如乖离率指标、布林带指标、RSI 指标相互补充。其计算公式如下：

$$DIF=(EMA_{12}(C)-EMA_{26}(C))\\DEA_{9}(DIF)=\frac{2}{3}\cdot EMA_{9}(DIFF)+\frac{1}{3}\cdot DEA_{8}(DIFF)\\OSC=(DIF-DEA_{9})(DIF+DEA_{9})$$

- DIF: DIFF 指标
- DEA: DEA 指标
- OSC: Oscillator 指标
- EMA：指数移动平均线
- C：收盘价
- 12, 26, 9, 8 分别为参数值。