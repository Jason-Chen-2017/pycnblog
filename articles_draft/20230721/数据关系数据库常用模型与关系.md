
作者：禅与计算机程序设计艺术                    
                
                
在现代的IT行业中，企业应用信息系统主要依赖于关系型数据库（RDBMS），关系型数据库包括传统的基于表格的数据库、高级NoSQL数据库、对象数据库等。本文将介绍RDBMS中的两种最常用的模型——实体-联系模型（E-R模型）及表连接查询语言（SQL）。

# 2.基本概念术语说明
## E-R模型
### ER模型简介
“实体-联系模型”(Entity-Relationship Model, E-R Model)是一种用来描述现实世界中实体之间的关系的建模方法，其特点是：

1. 实体之间存在着某种类型的联系；
2. 每个实体都有若干属性，这些属性用来描述实体的性质和特征；
3. 每个实体类型由一个词表示，每个实体都有一个唯一标识符。

ER模型可以用来描述实体关系数据结构，它将真实世界的各种实体抽象成对象，并通过一些联系（即关系）来描述实体间的联系。

### E-R模型例子
例如，以下是一个用E-R模型描述银行交易系统的示例：

1. **实体（实体集）**
   - 用户（User）：顾客
   - 账户（Account）：银行账户
   - 交易（Transaction）：银行交易记录

2. **联系（关系）**
   - 用户-账户关系：一个用户可以有多个账户，一个账户只能属于一个用户
   - 用户-交易关系：一个用户可能有多个交易，但是一个交易只对应于一个用户
   - 账户-交易关系：一个账户可能有多个交易，但是一个交易只对应于一个账户
   
三张表就能完整地表达上述的实体和联系，其中第三张表是用户、账户和交易的组合关系。

![image.png](attachment:image.png)

## SQL语言
### SQL语言简介
Structured Query Language (SQL) 是用于管理关系数据库的标准语言，是一种声明式语言，用来定义、操纵和控制关系数据库中的数据，其设计目标就是使数据库系统更容易使用、更有效率。它允许用户查询、插入、更新和删除关系表中的数据，还支持复杂的多表联合查询、子查询、连接、事务处理等功能。

### SQL语言基础语法
#### SELECT语句
SELECT 语句用于从关系表中检索数据，语法如下：

```sql
SELECT [DISTINCT] column_name [,...] FROM table_name [WHERE conditions];
```

其中，

- `column_name` 为要检索的列名或表达式。
- `table_name` 为要检索数据的关系表名。
- `DISTINCT` 可选关键字用于去除重复的数据。
- `WHERE` 子句可用于对结果进行过滤，满足指定条件的数据才会被返回。

例如，假设有一个关系表 named_persons，包含了姓名、年龄、地址和电话号码四列数据：

| name | age | address    | phone     |
|------|-----|------------|-----------|
| Alice|  25 | Beijing    | 1391234567|
| Bob  |  30 | Shanghai   | 1367890123|
| Cindy|  35 | Guangzhou  |           |
| David|  40 | Tokyo      | 0987654321|

我们想要查询所有年龄大于等于30的人的信息，可以使用如下SQL语句：

```sql
SELECT * FROM named_persons WHERE age >= 30;
```

这个查询语句将返回 age 大于等于30 的所有人的数据，包括姓名、年龄、地址和电话号码。

#### INSERT INTO语句
INSERT INTO 语句用于向关系表中插入新的数据，语法如下：

```sql
INSERT INTO table_name (column1, column2,...) VALUES (value1, value2,...);
```

其中，

- `table_name` 为要插入数据的关系表名。
- `(column1, column2,...)` 为要插入的列名。
- `(value1, value2,...)` 为要插入的值。

例如，假设有一个关系表 students，包含了学生的名字、编号和成绩三个列：

| name | id | score     |
|------|----|-----------|
| John | 101| 90        |
| Mary | 102| 85        |
| Pete | 103| 95        |

我们想把一个新的学生 Hans 插入到该关系表中，可以执行如下SQL语句：

```sql
INSERT INTO students (name, id, score) VALUES ('Hans', 104, 80);
```

#### UPDATE语句
UPDATE 语句用于修改关系表中的已有数据，语法如下：

```sql
UPDATE table_name SET column1 = value1[, column2 = value2,...] [WHERE condition];
```

其中，

- `table_name` 为要更新数据的关系表名。
- `SET column1 = value1[, column2 = value2,...]` 为待更新的列名和值。
- `WHERE condition` 可选项用于限定更新范围，仅更新满足条件的数据。

例如，假设有一个关系表 employees，包含了雇员的姓名、部门、薪水三个列：

| name    | department | salary   |
|---------|------------|----------|
| John Doe| Sales      | $80,000  |
| Jane Smith| Marketing| $90,000  |
| Peter Williams| Engineering| $75,000 |

我们想把Peter Williams的部门名称改为Engineering Management，并降低他的薪水到$70,000，可以使用如下SQL语句：

```sql
UPDATE employees SET department='Engineering Management', salary='$70,000' WHERE name='Peter Williams';
```

#### DELETE语句
DELETE 语句用于删除关系表中的数据，语法如下：

```sql
DELETE FROM table_name [WHERE condition];
```

其中，

- `table_name` 为要删除数据的关系表名。
- `WHERE condition` 可选项用于限定删除范围，仅删除满足条件的数据。

例如，假设有一个关系表 departments，包含了公司的所有部门信息，其中有一个部门的名称叫做 Finance，我们想把该部门的相关信息从该关系表中删除，可以使用如下SQL语句：

```sql
DELETE FROM departments WHERE name='Finance';
```

