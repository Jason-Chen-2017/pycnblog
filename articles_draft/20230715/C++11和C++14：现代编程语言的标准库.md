
作者：禅与计算机程序设计艺术                    
                
                

"C++ 11 and C++14: The Standard Library of Modern Programming Languages" 是由本书的作者在知乎上发起的一个活动。知乎作为一个思想交流、社区服务平台，吸引了众多作者投稿。这些作者从事的领域包括数学、计算机科学等多个领域，不同领域的专家经验互相分享，创造了很多独特而美妙的思想观点。而作为一本有关C++标准库的书籍，将会成为众多作者心中的无可替代之选。 

作者希望通过这本书，向读者展示C++标准库中最常用的容器和算法。同时，还能够给读者提供一些简单易懂的、实际应用性的、值得借鉴的编程技巧。这样，读者就可以在自己的项目开发中，更好的利用C++的各种特性和功能，提升程序的性能和效率。

随着云计算、大数据等技术的普及，越来越多的人需要掌握能够处理海量数据的高性能计算编程能力。而C++作为一门成熟、跨平台的语言，非常适合作为高性能计算的语言之一。因此，这本书将帮助读者学习到C++的最新版本——C++14，并掌握其标准库的用法。

本书对C++ 11/14的整个标准库进行了系统的介绍，包括头文件结构、类别目录、组件细分、新增加的成员函数及变量。对于每个组件，都提供了简要的介绍和实例，并且给出了这些组件的优缺点。通过阅读本书，可以了解到C++ 11/14的标准库的内部机制，以及如何有效地使用它。阅读本书可以让读者全面掌握C++标准库的最新动态，增强对C++11/14的理解，为日后的工程实践打下坚实的基础。


# 2.基本概念术语说明

## 2.1 C++ 11/14 标准库概述
C++ 11/14的标准库是一个庞大的组件集合，其包含了多种数据结构和算法，能帮助用户解决日益复杂的软件开发问题。其中的核心组件有如下几类：
- **头文件**：包含了C++的各个组件，比如iostream头文件负责输入输出，vector头文件则提供了一个动态数组容器。
- **类别目录**：按照各种数据结构划分，比如容器（Container）、算法（Algorithm）、迭代器（Iterator）、函数对象（Function Object）。
- **组件细分**：比如vector和deque都属于序列容器（Sequence Container），都支持插入、删除元素，并且具有随机访问能力。
- **新增加的成员函数及变量**：标准库一直在不断更新新成员函数，确保其能满足新的需求。

除了标准库之外，还有另外三个重要的C++组件：
- **模板库**：提供高级的数据结构和算法，允许用户定义类型相关的操作。
- **异常机制**：允许用户抛出和捕获运行时错误，并得到有意义的错误信息。
- **RTTI（Run-Time Type Information）机制**：允许运行时获取类的类型信息，用于实现泛型编程和反射（Reflection）。

## 2.2 模板（Template）
模板是C++中一种基本的程序构造工具，它允许用户创建通用类型。模板可以用来创建容器、算法或其他用户自定义类型的实例化，甚至可以实现类型之间的转换。模板在一定程度上减少了代码重复，也加快了编码速度。

## 2.3 STL中的容器
容器是存放数据的容器，主要包括顺序容器和关联容器。
- 顺序容器：按顺序存储数据，包括栈、队列和双端队列。
- 关联容器：根据关键字来关联数据，包括哈希表、树形结构和集合。

### 2.3.1 顺序容器
顺序容器主要包括以下几个部分：
- 栈：仅支持后进先出（LIFO）的方式，容量最大、元素唯一；
- 队列：仅支持先进先出（FIFO）的方式，容量最大、元素唯一；
- 列表：支持双向迭代，容量受限，元素可以重复；
- 序列：指的是双向序列。

列表和序列的区别在于元素是否可重复。通常情况下，列表比序列更常用，因为列表在某些情况下更灵活。

#### 2.3.1.1 vector
vector是一种动态数组容器，可以随机访问任意元素，具有低开销的随机访问时间，但是插入和删除元素的时间开销较大。

#### 2.3.1.2 deque
deque（双端队列）也是一种动态数组容器，具有低开销的随机访问时间，并且支持在两端进行快速的插入和删除操作，与列表相比，它的随机访问速度和顺序访问速度差距较小。

#### 2.3.1.3 list
list（列表）是一个双链表容器，可以以任何顺序遍历元素，支持双向迭代，插入和删除操作时需要摊销较多的时间。虽然双链表在某些情况下性能较好，但仍然占用更多内存。

#### 2.3.1.4 forward_list
forward_list（前向列表）也是一个单链表容器，只能在表头方向进行迭代，和list类似，具有低开销的随机访问时间，但是没有删除操作。

### 2.3.2 关联容器
关联容器主要包括以下几个部分：
- 散列映射：以键值对方式存储数据，查找平均时间复杂度为O(1)。
- 排序映射：以红黑树方式存储数据，查找、插入、删除操作的时间复杂度为O(log n)。
- 有序映射：以顺序表方式存储数据，查找、插入、删除操作的时间复杂度为O(n)。
- 集合：只保存键值对，且不重复，支持高效的查找、删除操作。
- 堆：以完全二叉树的方式存储数据，支持快速的插入和删除操作，时间复杂度为O(log n)。

#### 2.3.2.1 map
map是一种关联容器，它以红黑树的形式存储键值对，支持快速的插入、删除操作，查找平均时间复杂度为O(log n)。

#### 2.3.2.2 multimap
multimap是一种关联容器，它以红黑树的形式存储键值对，支持快速的插入、删除操作，查找平均时间复杂度为O(log n)，可以有相同的值。

#### 2.3.2.3 unordered_map
unordered_map是一种非线性的关联容器，它以哈希表的形式存储键值对，插入、删除操作的时间复杂度为O(1)（平均），查找操作的时间复杂度为O(1)（期望）。

#### 2.3.2.4 unordered_multimap
unordered_multimap是一种非线性的关联容器，它以哈希表的形式存储键值对，插入、删除操作的时间复杂度为O(1)（平均），查找操作的时间复杂度为O(1)（期望），可以有相同的值。

#### 2.3.2.5 set
set是一种集合容器，它以红黑树的形式存储值，支持快速的查找、删除操作，但不支持随机访问，插入、删除操作的时间复杂度为O(log n)。

#### 2.3.2.6 multiset
multiset是一种集合容器，它以红黑树的形式存储值，支持快速的查找、删除操作，但不支持随机访问，插入、删除操作的时间复杂度为O(log n)，可以有相同的值。

#### 2.3.2.7 unordered_set
unordered_set是一种非线性的集合容器，它以哈希表的形式存储值，支持快速的查找、删除操作，但不支持随机访问，插入、删除操作的时间复杂度为O(1)（平均），查找操作的时间复杂度为O(1)（期望）。

#### 2.3.2.8 unordered_multiset
unordered_multiset是一种非线性的集合容器，它以哈希表的形式存储值，支持快速的查找、删除操作，但不支持随机访问，插入、删除操作的时间复杂度为O(1)（平均），查找操作的时间复杂度为O(1)（期望），可以有相同的值。

### 2.3.3 其他重要的容器
除了上面介绍的顺序容器、关联容器以外，还有其他几个重要的容器，它们也属于C++标准库。
- priority_queue：带优先级的队列，以二叉最小堆方式存储元素，具有高效的弹出元素的功能。
- stack：栈，只有后进先出的功能。
- queue：队列，只有先进先出的功能。
- valarray：适用于高精度计算的数组类。
- bitset：适用于布尔运算的类。

## 2.4 STL中的算法
算法是一系列常用的函数，它们完成特定任务的操作。C++标准库中的算法包含了对容器、迭代器、函数对象的操作。

### 2.4.1 适用于所有容器的操作
- 对齐内存：align()函数可以把指针对齐到指定字节大小。
- 比较两个序列：mismatch()函数返回两个序列的第一个位置不同的值。
- 搜索和替换：replace()函数可以搜索并替换容器中的元素。
- 移除元素：remove()函数可以移除指定值的元素。
- 插入元素：insert()函数可以插入元素到容器中。
- 将容器拆分：partition()函数可以基于指定的谓词函数将容器分割成两个子序列。
- 从序列中选择元素：random_shuffle()函数可以将序列随机排列。
- 删除重复元素：unique()函数可以去除重复元素。

### 2.4.2 适用于序列容器的操作
- 对范围执行操作：for_each()函数可以对范围内的每个元素执行指定的函数。
- 拼接序列：concat()函数可以合并两个序列。
- 倒转序列：reverse()函数可以反转序列。
- 重排序列：sort()函数可以对序列排序。
- 查找元素位置：find()函数可以在序列中查找元素，返回位置。
- 返回最大值：max_element()函数可以找到序列中的最大元素，返回位置。
- 返回最小值：min_element()函数可以找到序列中的最小元素，返回位置。
- 替换元素：replace()函数可以搜索并替换序列中的元素。

### 2.4.3 适用于关联容器的操作
- 查找元素：find()函数可以在容器中查找元素，返回位置。
- 添加元素：insert()函数可以添加元素到容器中。
- 删除元素：erase()函数可以删除元素。
- 清空容器：clear()函数可以清空容器。

### 2.4.4 其他重要的算法
- 生成：generate()函数可以生成序列的每个元素，使用指定的函数。
- 根据索引访问元素：at()函数可以根据索引直接访问元素，不存在的情况会抛出异常。
- 使用谓词函数筛选元素：count()函数可以统计满足条件的元素个数。
- 结合函数调用结果：transform()函数可以将范围内的元素进行函数运算。
- 判断两个序列是否相同：equal()函数判断两个序列是否相同。
- 抽样：sample()函数可以随机抽取n个元素，不重复。
- 计数：accumulate()函数可以对序列求和。
- 合并连续值：adjacent_difference()函数可以将范围内的元素间的差值，存入另一个序列。

## 2.5 函数对象
函数对象是一种特定的、可调用对象，可以像普通函数一样被传递和使用。函数对象包含一段可以执行的算法代码，可以作为参数传递给STL算法或者容器。STL算法的操作模式一般都要求传入一个可调用对象，该对象应该接受容器中每一个元素作为输入，然后对该元素进行相应的操作，最后生成一个新的元素供输出。这种模式使得STL算法的扩展性很强，可以通过函数对象轻松地实现新的算法。

C++中的函数对象包括：
- function：可以封装一个可调用的目标。
- mem_fun：可以封装一个类的成员函数为一个可调用对象。
- binder1st和binder2nd：可以绑定一个参数到一个可调用对象上。
- not1和not2：可以对一个可调用对象进行否定运算。
- ptr_fun：可以将指向函数的指针转换为一个可调用对象。

