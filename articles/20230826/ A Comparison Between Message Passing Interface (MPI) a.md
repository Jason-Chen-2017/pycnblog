
作者：禅与计算机程序设计艺术                    

# 1.简介
  

消息传递接口（MPI）是目前最主流的并行编程模型。但是它存在着诸多不足：

1.开发复杂度高、性能低，需要花费大量时间优化和调优；
2.通信模式限制太多，不能实现某些高级通信模式；
3.依赖于底层网络库，导致移植性差；
4.编程模型过于重型，难以快速上手。
GASNet是一个开源的轻量级通信库，它完全面向网络而设计，提供了丰富的通信模式和操作接口，使得它可以更好地适应分布式计算环境。相比之下，MPI只提供基本的通信功能。本文将对两者进行比较，讨论其优缺点。
# 2.基本概念及术语说明
## MPI
### 进程间通信
MPI定义了两种进程之间的通信方式——点对点(point to point)通信和多播(broadcast)通信。其中点对点通信指的是两个进程之间的数据直接传输，多播通信是多个进程共享同一个数据块并通过它进行通信。此外，MPI还提供全双工(full duplex)通信，即每个进程可同时发送和接收数据。
### 收发消息
在MPI中，所有进程都被分配了一个唯一标识符——rank，即进程的编号。不同进程之间可以通过MPI_Send()和MPI_Recv()函数来发送和接受消息。每条消息由一个tag标识，用于区分不同的信息。
### 消息排序
MPI采用多种方式对消息进行排序，包括按时间戳顺序(sequence numbering)，按空闲发送方顺序，按空闲接收方顺序等。除此之外，用户还可以自行指定按哪个维度排序，如按源节点、目标节点或消息长度进行排序。
### 过程模型
MPI定义了7种通信过程模型——阻塞型、非阻塞型、任意同步型、同步任意型、单向型、多播型、组合型。
- 阻塞型: 用户调用一个过程后，该过程会一直等待直到完成。
- 非阻塞型: 用户调用一个过程后，该过程立刻返回一个句柄，用户可以在之后调用其他MPI过程来检查这个句柄状态。
- 任意同步型: 允许多个通信请求并发执行。
- 同步任意型: 请求按照先后顺序执行。
- 单向型: 只允许单方向通信。
- 多播型: 可同时向多个进程发送相同的数据块。
- 组合型: 可以结合使用多种通信模式。
## GASNet
### 基本概念
GASNet是一种跨平台的轻量级通信库，它定义了两种通信模式——全局地址空间(global address space)和消息传递接口(message passing interface)。全局地址空间模式基于Global Arrays(GA)库，可以让用户在不同的处理器类型、架构和操作系统之间共享内存，并通过指针来访问远程内存中的数据。消息传递接口模式基于MPI标准，可以让用户在不同的硬件资源之间共享数据。
### 节点角色
GASNet定义了三种节点角色——主节点(Primary node), 存活节点(Active nodes), 和备份节点(Backup nodes)。主节点负责协调工作，维护整个系统的运行，激活和停止节点活动。存活节点能够参与并发执行操作，但只保留自己的数据副本。备份节点在任何时候都有可能成为存活节点。
### 操作对象
GASNet定义了四种通信操作对象——通道(channel)，端点(endpoint)，集合(team)和内存区域(memory region)。通道表示连接到的硬件资源，比如网络端口或者系统交换机。端点代表了发送或接收数据的实体，比如一个设备或一个进程。集合是一个逻辑上的集体，可以包含一组本地节点以及它们所连接到的其他节点。内存区域用来描述远程内存区域，它包括物理地址、长度、读写权限、访问模式等信息。
### 消息类别
GASNet定义了七种消息类别——请求消息(request message)、确认消息(acknowledgement message)、匹配消息(match message)、握手消息(handshake message)、损坏消息(corrupt message)、拒绝消息(reject message)和取消消息(cancel message)。
- 请求消息(Request): 用来启动某个通信，包括发起方的请求、目的地址和消息类别等信息。
- 确认消息(Acknowledgement): 对一条请求消息的回复，包含返回码等信息。
- 匹配消息(Match): 当所有匹配节点都确认某个请求时，会产生一条匹配消息。
- 握手消息(Handshake): 用来建立某些特定类型的通信。
- 损坏消息(Corrupt): 当出现意料之外的情况时，会发生损坏消息。
- 拒绝消息(Reject): 当请求失败时，会生成拒绝消息。
- 取消消息(Cancel): 当某个通信被取消时，会生成一条取消消息。