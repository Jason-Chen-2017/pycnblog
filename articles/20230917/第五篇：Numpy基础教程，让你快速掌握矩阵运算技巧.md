
作者：禅与计算机程序设计艺术                    

# 1.简介
  

在学习机器学习、深度学习、图像处理等AI领域的算法之前，首先需要掌握的就是数据结构和常用算法。而矩阵（matrix）是数据结构中非常重要的数据形式。这是因为计算机存储、处理、分析数据的主要方式都是基于矩阵。

本篇文章将从以下三个方面进行阐述：
- numpy数组的定义及其功能；
- 数组运算及其相关函数；
- numpy的广播机制及其适用场景。


# 2.numpy的定义及其功能

## （1）什么是numpy？

Numpy（读音/ˈnʌmpaɪ/）是一个开源的Python数值计算扩展库，支持大量的维度数组与矩阵运算，此外也针对数组运算提供大量的数学函数库。其最初目的是为了科学计算，也可广泛应用于其它Fields。

## （2）numpy数组

Numpy中的array（数组）是一种多维数组对象，可以用来存储同类型元素并且具有相同大小的数组。数组类被设计成具有低级语言所需的所有功能，包括复杂的迭代器协议，矢量化算术运算及各种约定俗称的标准操作符。

Numpy中的数组和列表相似之处在于都可以存储多维数据。不同的是，数组要求所有元素必须是同一类型，并且内存连续存储。另一方面，列表允许不同类型的元素混杂，并且内存并不一定连续。

```python
import numpy as np #导入numpy模块

a = np.array([1,2,3])   # 创建一个1x3的数组
b = np.array([[1,2],[3,4]])    # 创建一个2x2的数组
print(a)      #[1 2 3]
print(b)     #[[1 2]
            # [3 4]]
```

## （3）数组的属性

数组类提供了丰富的属性来获取和设置数组的元信息。

```python
import numpy as np 

a = np.array([1,2,3])
print('数组的形状:', a.shape)   #(3,) 表示它是一个一维数组，里面有3个数
print('数组的元素总数:', a.size)   #3
print('数组的数据类型:', a.dtype)   #<class 'numpy.int64'> 表示这个数组里面所有的元素都是整数类型
print('数组的字节数:', a.itemsize)    #8 每个元素占用的内存大小
print('数组的维度数:', a.ndim)       #1
```

## （4）创建不同类型的数组

除了使用np.array()方法来创建一个普通的数组，还可以通过其他方法来创建不同类型的数组。如：

- zeros: 返回指定形状和类型的数组，其中元素的值均为0；
- ones: 返回指定形状和类型的数组，其中元素的值均为1；
- empty: 返回指定形状和类型的空数组；
- eye: 返回对角线为1，其余元素为0的二维数组；
- identity: 返回指定维数的单位阵；
- full: 根据指定的填充值返回指定形状和类型的数组；

例如，创建一个全零的三维数组：

```python
import numpy as np 

c = np.zeros((2,3,4))   # 创建一个2x3x4的全零数组
print(c)         #[[[0. 0. 0. 0.]
               #  [0. 0. 0. 0.]
               #  [0. 0. 0. 0.]]

              # [[0. 0. 0. 0.]
              #  [0. 0. 0. 0.]
              #  [0. 0. 0. 0.]]]
```

## （5）数组的索引与切片

Numpy中的数组可以按照下标访问单个元素或者多个元素组成的子数组。

```python
import numpy as np 

a = np.array([1,2,3])
print(a[0], a[-1])        #输出第一个元素和最后一个元素

b = np.arange(10)**2       # 生成一个10x10的方阵
print(b[:3,:2])            #[[ 0  1]
                         #  [ 9 25]
                         #  [81 90]]
```

## （6）数组运算

Numpy的数组运算基于元素级的运算，而不是按位置匹配的运算。因此，要想理解两个数组之间是否能够直接做出运算，首先要确认它们的形状是否符合运算规则。

### （6.1）数组的算术运算

Numpy中的数组之间支持四种基本的算术运算：

- 加法 (+): add();
- 减法 (-): subtract(), negative();
- 乘法 (*): multiply(), dot();
- 除法 (/): divide().

#### 例子1：加法运算

```python
import numpy as np 

a = np.array([1,2,3])
b = np.array([4,5,6])
print(np.add(a, b))           #[5 7 9]
print(a + b)                 #[5 7 9]
```

#### 例子2：减法运算

```python
import numpy as np 

a = np.array([1,2,3])
b = np.array([4,5,6])
print(np.subtract(a, b))          #[-3 -3 -3]
print(-a)                         #[-1 -2 -3]
print(a - b)                      #[-3 -3 -3]
```

#### 例子3：乘法运算

```python
import numpy as np 

a = np.array([1,2,3])
b = np.array([4,5,6])
print(np.multiply(a, b))             #[ 4 10 18]
print(a * b)                        #[ 4 10 18]
```

#### 例子4：除法运算

```python
import numpy as np 

a = np.array([1,2,3])
b = np.array([4,5,6])
print(np.divide(a, b))              #[ 0.25  0.4  0.5 ]
print(a / b)                       #[ 0.25  0.4  0.5 ]
```

### （6.2）矩阵乘法运算

矩阵乘法运算可以由dot()函数实现。dot()函数的作用是计算两个数组的点积，即各元素对应相乘再相加。如果给定的数组没有经过转置，则两个数组的第一个轴必须相同。

#### 例子1：矩阵乘法运算

```python
import numpy as np 

A = np.array([[1,2,3],
             [4,5,6]])
B = np.array([[7,8],
             [9,10],
             [11,12]])
C = A.dot(B)                    #矩阵乘法运算
D = B.dot(A)                    #矩阵乘法运算，注意顺序
E = np.dot(A, B)                #矩阵乘法运算
print(C)                     #[[58 64]
                           # [139 154]]
print(D)                     #[[190 212]
                           # [231 252]]
print(E)                     #[[58 64]
                           # [139 154]]
```

### （6.3）数组的广播机制

Numpy的广播机制使得不同形状的数组之间的运算变得更加容易。广播机制的主要目的就是为了使得运算速度更快。对于形状不同的数组，NumPy会自动将其规格化到相同的形状。然后逐个元素的比较运行相应的算术运算。由于广播机制的存在，NumPy的数组运算效率非常高。

#### 例子1：数组的广播机制

```python
import numpy as np 

a = np.array([1,2,3])
b = np.array([4,5])
print(a+b)               #[ 5  7  9]
```