
作者：禅与计算机程序设计艺术                    

# 1.简介
  

作为一个技术人员，了解并熟练掌握计算机操作系统是每个工程师必备的技能之一。众多操作系统都提供了丰富的命令或工具，能够提高工作效率、节省时间。然而，掌握每个命令的用法、参数、选项等细节仍然需要不断地阅读官方文档、百度、谷歌等搜索引擎才能最终熟练掌握。为此，笔者编写了一本《Linux命令速查手册》，汇集了许多常用的命令、工具及其常用参数，并配以详实的示例介绍，力求让初学者也能轻松上手，让大家从容应对复杂的操作系统。同时，本书适合作为系统运维人员、开发人员的参考书籍，也可供非计算机专业的学生学习。

# 2.操作系统基础知识
## 2.1 Linux操作系统简介
Linux操作系统是一种多用户、多任务、支持多线程和多进程的类Unix操作系统。它主要由内核（kernel）和一些常驻程序组成。这些程序包括一个命令行shell和应用程序。用户通过输入命令到shell中，然后该命令将被解释为系统调用（system call），并通过内核中的相应服务例程处理。

## 2.2 Linux目录结构
Linux系统中文件存储在目录（directory）中，这些目录组织起来形成一棵树状文件系统（file system）。根目录（/）是所有目录的祖先，它始终存在。其他目录可以层次结构创建，每个目录下可以存放文件、子目录或者设备节点（device node）。

Linux系统的文件系统分为以下几种类型：

1. 普通文件：普通文件就是存储数据的地方。
2. 目录：目录用来存储文件名和其他属性。
3. 字符设备：用于访问字符设备，如键盘、鼠标。
4. 块设备：用于访问块设备，如硬盘、磁盘阵列等。
5. 管道：用于进程间通信（IPC）。
6. 符号链接：符号链接类似于快捷方式，但不会占用额外的磁盘空间。

Linux系统还提供了一个虚拟文件系统（VFS），它使得不同类型的设备可以以相同的方式进行访问。它为各种设备定义了一个共同的接口，从而使得操作系统更容易移植到新的平台上。

## 2.3 文件权限管理
Linux文件权限管理基于用户、群组、其它三个基本概念，它们分别对应着文件所有者、文件所在组、其它用户。每种权限都有一个数字表示，其中，读权限（r）对应数字4，写权限（w）对应数字2，执行权限（x）对应数字1。因此，文件权限就是一串数字，各个数字对应的位表示不同的权限。例如，chmod a+rx file命令将文件file的所有者增加读、执行权限；chmod o-rwx file命令将文件file的所有用户删除写、执行权限。

# 3.命令速查表
## 3.1 用户管理相关命令
### useradd：添加新用户
语法：useradd [OPTIONS] LOGIN
- -c COMMENT：添加注释信息
- -d HOME_DIR：设置登录目录
- -e DATE：指定账户失效日期
- -g GROUP：设置用户所属的初始群组
- -G GRPLIST：设置用户所属的附加群组
- -m：自动建立HOME目录
- -s SHELL：设置登录后使用的Shell
### userdel：删除用户
语法：userdel [OPTIONS] LOGIN
- -f：强制删除，忽略不存在的用户
- -r：递归删除，删除用户的主目录以及相关的文件
### passwd：更改用户密码
语法：passwd [OPTIONS] USERNAME
- -l：锁定账户，即禁止用户登录
- -u：解锁账户，即允许用户登录

## 3.2 组管理相关命令
### groupadd：添加新组
语法：groupadd [OPTIONS] GROUP
- -g GID：设置新组的GID
### groupmod：修改现有组
语法：groupmod [OPTIONS] GROUP
- -n NEWGROUP：设置新的组名
- -g GID：设置新的GID
- -d NEW_HOME：设置新的主目录
### groupdel：删除组
语法：groupdel GROUP

## 3.3 文件与目录管理相关命令
### ls：显示目录下的内容
语法：ls [OPTIONS] [FILE]...
- -a：显示除隐藏文件外的所有文件和目录
- -A：显示除了"."和".."外的所有文件和目录
- -d：仅显示目录
- -h：以人性化的方式显示文件大小，如1K，1M等
- -i：显示inode号
- -l：以详细列表形式显示文件或目录
- -R：递归显示子目录的内容
- -S：按文件大小排序
- --sort=SIZE：按文件大小排序，别名“--size”
- --time=TIME：按照指定的atime、ctime、mtime字段排序，默认是atime。
- -t：按照修改时间排序
- -U：显示文件的UUID信息
### mkdir：创建目录
语法：mkdir [OPTIONS] DIRECTORY...
- -mumask MASK：设置权限掩码
### rmdir：删除空目录
语法：rmdir DIRECTORY...

## 3.4 文件编辑相关命令
### cat：连接文件并打印到标准输出设备上
语法：cat [OPTION]... FILE...
- -b：number：打印出行号
- -n：number：打印出行号并加上指定的数字
- -T：string：设置页眉
### less：分页查看文件内容
语法：less [OPTION]... [FILE]...
- /PATTERN：向下搜索模式
-?PATTERN：向上搜索模式
- n：重复前一次查找的结果
- N：反向重复前一次查找的结果
- +NUMBER：从指定行开始显示内容
- -NUMBER：从指定行结束显示内容
- s/OLD/NEW/：查找并替换文本
### cp：复制文件或目录
语法：cp [-adfilprsu] [--preserve[=ATTR_LIST]] SOURCE DEST
- -a：相当于-pdr的意思，是指连同文件的属性一起复制过去，而非使用默认方式，只复制文件内容
- -d：若源文件是连结文件(link file)，则复制连结档的内容而非链接文件
- -f：强制覆盖目标文件，不提示
- -i：若目标文件已经存在时，在覆盖时会先询问用户
- -L：如果遇到性质为符号链接的文件或目录，直接复制其指向的文件或目录，亦即取消链接后再进行复制
- -P：如果原文件是符号链接文件，则复制该链接文件，而不是其指向的文件
- -p：连带文件属性复制，而非使用默认方式，例如，复制文件同时把权限，所有者，以及文件更改时间也复制过去
- -r,-R：递归复制，将指定目录下的所有文件和子目录复制过去
- -s：复制成为符号链接文件（link file），亦即软链接文件
- -u：当目标文件比源文件旧才会更新（update）
### mv：移动文件或目录
语法：mv [-fiu] source destination
- -f：force 的缩写，强制的意思，如果目标文件已经存在，不会询问而直接覆盖
- -i：若目标文件 (destination) 已经存在时，就会询问是否覆盖！
- -u：若目标文件已经存在，且 source 比较新才更新 （update）
### rm：移除文件或目录
语法：rm [-fir] file...
- -f：force 的缩写，就是 force 强制的意思，如果没有那就算了，直接删除
- -i：interactive 模式，逐个确认要删除！
- -r,-R：递归删除，将指定目录下的所有文件和子目录一并删除
### touch：修改文件的时间戳
语法：touch [OPTION]... FILE...
- -a：仅更改访问时间
- -c：仅更改元数据，不影响文件内容
- -m：仅更改修改时间
- -r FILE：使用指定文件的时间作为参照点

## 3.5 查看文件相关命令
### find：搜索文件
语法：find [PATH]... [OPTION]... [ACTION]...
- PATH：指定要搜寻的路径，可以指定多个路径。
- OPTION：指定搜索条件，选项之间用空格隔开。
    - -name：根据文件名搜索
    - -iname：根据文件名不区分大小写搜索
    - -type：指定文件类型搜索，例如，`-type f` 仅搜索普通文件；`-type d` 只搜索目录；`-type l` 只搜索链接文件。
    - -perm mode：搜索具有指定权限的文件。`mode` 为权限表示法，`ugo` 分别代表`user`, `group`，`other`。`+` 表示增加权限，`-` 表示减少权限，而无权限则用 `!` 表示，例如 `-perm 777` 可以搜索权限为 `rwxrwxrwx` 的文件；`-perm /777` 可以等价于上面命令。
    - -user name：搜索指定用户所有的文件
    - -nouser：搜索无所有用户的文件
    - -group name：搜索指定组所有的文件
    - -nogroup：搜索无有效组的文件
    - size：搜索文件大小，例如 `-size +5k` 表示大于 5KB 的文件；`-size -5k` 表示小于 5KB 的文件。
    - -daystart：计算天数的开始时间（24 小时制），例如 `-daystart +1` 就表示今天凌晨 1 点之后的文件；`-dayend +1` 则表示昨天 1 点之前的文件。
    - ctime：搜索文件的更改时间
    - mtime：搜索文件的修改时间
    - atime：搜索文件的访问时间
- ACTION：指定搜索动作，动作之间用空格隔开。
    - -print：打印搜索出的符合条件的文件名称。
    - -exec command {} \：执行指定命令，其中，`{}` 是代替每个匹配文件名的位置，`\` 表示续行符。
    - -ok command {} \：和 `-exec` 命令一样，但是在执行命令之前会询问用户。

### head：显示文件开头内容
语法：head [OPTION]... [FILE]...
- -c：指定要显示的字节数
- -n：显示行数

### tail：显示文件末尾内容
语法：tail [OPTION]... [FILE]...
- -c：指定要显示的字节数
- -n：显示行数

### which：查找并显示指令的绝对路径
语法：which [command]... 

### whereis：查找程序的二进制、源码、man 页面文件位置
语法：whereis [utility | filename...]