
作者：禅与计算机程序设计艺术                    

# 1.简介
  

计算机网络是现代信息技术领域中一个极其重要、复杂的分支，它由不同的网络协议、网络设备及各种传输媒体构成，各个环节之间相互作用共同协作实现了计算机之间的通信和数据传递功能。本专著将从计算机网络的相关基础知识出发，通过系统地、全面地阐述计算机网络各项关键技术、协议、应用及其运行原理和特点，全面准确地反映当前计算机网络的最新研究成果和应用实践，力求为读者呈现一份具有时代特色、客观真实性的计算机网络图景。
# 2.基本概念术语说明
## 2.1. 计算机网络概述
计算机网络（Computer Network）是指用硬件或软件组件及通信手段，连接多台计算机及其他各种信息处理设备，并使之能够共享和传递数字化信息的系统。在这个系统中，若干计算机节点分布在网络边界上，各节点之间按照一定的规则进行通信交换，完成各种电子通信服务。这些计算机节点按照一定的方式进行连接，而计算机网络则将这些节点连接起来组成一个大的分布式计算系统，能够对外提供各种服务，如电子邮件、文件共享、远程登录等。因此，网络技术主要解决的问题就是如何建立、路由、连接、管理、保护、传输、接收、存储和检索各种信息，并利用它来促进社会经济、科技等领域的各种活动。
## 2.2. 网络节点和协议
网络节点：计算机网络中的任何一个实体都可以称为网络节点，包括主机、路由器、交换机、集线器等。每台计算机同时也是网络节点，但是由于性能和价格因素，普通用户不可能把个人计算机当做网络节点。
协议：协议是指计算机通信的双方之间所遵循的规则，它是通信的基础。目前，常用的网络协议有TCP/IP协议族、HTTP协议、FTP协议、SMTP协议、Telnet协议、SSH协议等。
## 2.3. IP地址、MAC地址和端口号
IP地址（Internet Protocol Address）：IP地址用于唯一标识Internet上的每个设备，其是一个32位的数，通常表示成A.B.C.D的形式，其中A、B、C、D均为0~255之间的数字。IP地址可以唯一地标识网络中的计算机节点，网络中的每台计算机都必须配置自己的IP地址，才能联网。
MAC地址（Media Access Control Address）：MAC地址也称作物理地址，它用来唯一标识网络接口卡。在局域网（LAN）环境下，主机的IP地址和MAC地址通常是相同的；但在广域网（WAN）环境下，主机的IP地址和MAC地址一般不同。
端口号（Port Number）：端口号是IP协议的一个重要概念，它标识了一个网络进程或应用程序。不同的网络进程或应用程序可以绑定到不同的端口号上，这样就可以区分它们的通信目标。在同一台计算机上运行的多个进程或应用程序可以绑定到同一个端口号上，这样就可以实现彼此间的通信。
## 2.4. TCP/IP协议簇
TCP/IP协议簇（Transmission Control Protocol/Internet Protocol Suite），又称互联网协议套装，是一个开放源代码的国际标准协议集合，涉及到的协议有TCP、UDP、ICMP、IGMP、ARP、RARP、DNS、DHCP等。
### 2.4.1. TCP协议
TCP协议（Transmission Control Protocol）是一种面向连接的、可靠的、基于字节流的传输层通信协议，它提供一种面向连接的、可靠的、基于字节流的通信机制。在传统的TCP/IP协议模型中，TCP协议位于传输层，负责数据的可靠传输，保证数据包按序到达目的地。TCP协议提供一种面向连接的通信传输控制协议，这种协议实现了数据包的可靠交付，即无差错，不丢失，不重复，并且按序到达。在TCP协议中，每一条TCP连接只能有两个端点（客户端和服务器端），通信双方必须先建立连接，然后再通讯。采用TCP协议传输的数据单位被称为报文段（Segment）。
### 2.4.2. UDP协议
UDP协议（User Datagram Protocol）是一种不可靠传输层协议，它提供了面向非连接的、尽最大努力交付的数据包服务。虽然UDP传输是无连接的，但是它的优点是速度快，对于不要求可靠到达的数据包，比如音频和视频流传输，就非常适合使用UDP协议。在UDP协议中，客户程序发给服务器端的数据，不会像TCP协议那样得到保证。UDP协议适用于那些对可靠性要求不高的场景，如网络广播、音视频流、瀑布流传输、DNS查询等。
### 2.4.3. ICMP协议
ICMP协议（Internet Control Message Protocol）是TCP/IP协议族中的一员，它主要用于网际网络的管理。ICMP协议允许网络管理者诊断网络内部发生的问题，跟踪网络故障，统计流量，判断网络参数，设置路由策略。ICMP协议工作在IP协议的上层，主要用于网络错误诊断、通知、提醒、同步、询问、路由选路和重新配置等。ICMP消息是单播或多播的，在IP协议之上，而不是IP协议之下的。
### 2.4.4. IGMP协议
IGMP协议（Internet Group Management Protocol）是IGRP（Interior Gateway Routing Protocol）的升级版本，主要用于 multicast 数据报的管理。它定义了一种组管理协议，让多播源可以加入或者退出某个组播，并从一个或多个特定源接收流。
### 2.4.5. ARP协议
ARP协议（Address Resolution Protocol）是一种将IPv4地址解析为MAC地址的网络协议。通过ARP，可以通过IP地址获取对应的MAC地址。ARP的过程由两步组成，首先发送方主机发送ARP请求报文，请求网关上对应MAC地址的信息；接着网关收到ARP请求报文后，根据其内容生成ARP响应报文返回给发送方主机，告诉发送方它下一步应该通过哪个MAC地址才能与目标IP地址建立映射关系。如果ARP表中没有该记录，则ARP请求报文将被丢弃。ARP表是通过维护者（DHCP，BOOTP）或手动配置的方式创建和更新的，目的是为了减少重复的ARP请求和响应。
### 2.4.6. RARP协议
RARP协议（Reverse Address Resolution Protocol）是ARP协议的逆向过程。它用于从MAC地址获得IP地址。
### 2.4.7. DNS协议
DNS协议（Domain Name System Protocol）是域名系统（DNS）的基础。它可以将域名转换为IP地址，也可以将IP地址转换为域名。DNS协议运行在TCP/IP协议之上，是Internet上使用的域名服务系统，负责将域名转换为IP地址，并提供了负载平衡、根服务器备案管理、域名注册管理、权威性DNS服务器发现、动态域名管理、邮件服务记录查找、名称保护与安全验证等功能。
### 2.4.8. DHCP协议
DHCP协议（Dynamic Host Configuration Protocol）是动态主机配置协议，它允许主机获取IP地址、子网掩码、默认网关等信息，自动进行网络配置。DHCP能够自动分配IP地址、子网掩码、路由、缺省网关，可以节省IP地址资源，提高网络管理效率。
## 2.5. 网络层
网络层的主要任务是为上层的应用层提供路由选择、数据报的传输服务、流量控制和QoS（Quality of Service）保证。网络层的协议有ARP、RARP、IPv4、IPv6、ICMPv6、IGMP、OSPF、BGP、NAT（Network Address Translation）等。
### 2.5.1. ARP协议
ARP协议（Address Resolution Protocol）是一种将IPv4地址解析为MAC地址的网络协议。通过ARP，可以通过IP地址获取对应的MAC地址。ARP的过程由两步组成，首先发送方主机发送ARP请求报文，请求网关上对应MAC地址的信息；接着网关收到ARP请求报文后，根据其内容生成ARP响应报文返回给发送方主机，告诉发送方它下一步应该通过哪个MAC地址才能与目标IP地址建立映射关系。如果ARP表中没有该记录，则ARP请求报文将被丢弃。ARP表是通过维护者（DHCP，BOOTP）或手动配置的方式创建和更新的，目的是为了减少重复的ARP请求和响应。
### 2.5.2. RARP协议
RARP协议（Reverse Address Resolution Protocol）是ARP协议的逆向过程。它用于从MAC地址获得IP地址。
### 2.5.3. IPv4协议
IPv4协议（Internet Protocol version 4）是Internet最主要的协议，也是TCP/IP四层协议簇中的一员。IPv4协议定义了如何把分组送往目的地，以及如何在网络上传输数据。IPv4协议是一种无连接的协议，因而需要在传输前建立好通信信道。IPv4的地址结构为4字节长，即32位，每一个字节占8位。
### 2.5.4. IPv6协议
IPv6协议（Internet Protocol version 6）是一种新的互联网协议，它是为了克服IPv4协议固有的一些缺陷，推出来的新协议。IPv6在设计的时候考虑了互联网的发展需求，因此增加了很多新的特性。IPv6协议在地址长度方面比IPv4协议要长，占128位，每一个字节占8位。
### 2.5.5. ICMPv6协议
ICMPv6协议（Internet Control Message Protocol for IPv6）是Internet控制报文协议第六版，它主要用于IPv6节点间的通信过程中的管理功能，帮助节点发现网络存在的问题。ICMPv6协议的功能主要包括目的不可达通知、重定向通知、节点信息查询和改动通知、参数问题通知、时间戳请求和回答、地址摘要请求和回答等。
### 2.5.6. IGMP协议
IGMP协议（Internet Group Management Protocol）是IGRP（Interior Gateway Routing Protocol）的升级版本，主要用于 multicast 数据报的管理。它定义了一种组管理协议，让多播源可以加入或者退出某个组播，并从一个或多个特定源接收流。
### 2.5.7. OSPF协议
OSPF协议（Open Shortest Path First Protocol）是一种链路状态路由协议，它用于在AS内计算最短路径，支持多条路径。OSPF协议的功能包括：（1）路由选择、（2）区域划分、（3）链路状态计算、（4）区域外部路由发现和（5）虚拟链路的支持。
### 2.5.8. BGP协议
BGP协议（Border Gateway Protocol）是自治系统之间互相路由选择和交换路由信息的协议，它用于连接多个ISP，帮助ISP了解互联网的状况。BGP协议经常与OSPF协议一起运用，共同解决Internet拥塞问题。
### 2.5.9. NAT协议
NAT协议（Network Address Translation Protocol）是一个转换IP地址的协议。NAT协议使得私网的计算机可以从Internet获得一个公共IP地址，使得公网的计算机可以从私网访问Internet的资源。NAT协议的实现方法主要有静态转换、动态转换和端口重置三种。
## 2.6. 数据链路层
数据链路层的主要任务是将网络层交下来的分组封装成帧，在两个相邻结点间进行传输。在这一层上进行操作的是节点之间的链路连接，数据链路层的协议有Ethernet、PPP、FDDI、ADSL、ATM等。
### 2.6.1. Ethernet协议
Ethernet协议（Ethernet II）是一种基于IEEE 802标准的物理层的传输媒介。Ethernet协议的目的是使得计算机网络里的各个计算机可以以太网协议通信。它在物理层提供有线、无线两种传输方式。采用Ethernet协议的计算机网络称为以太网。Ethernet协议的帧结构规定了数据部分的最小单元，称为“帧”（frame）。Ethernet帧的最小长度为64字节，最大长度为1518字节。
### 2.6.2. PPP协议
PPP协议（Point-to-Point Protocol）是计算机通信协议的第三个主要系列，用于点对点（Point to Point，即端到端）通信。PPP协议允许多个数据链路在一段时间内共享同一个物理链路。PPP协议包括如下几个层次：（1）点对点链接控制（PPP Link Control Protocol，LCP）：实现点对点连接的建立、认证、回拨等功能。（2）点对点联网控制（PPP Network Control Protocol，NCP）：实现网络层的功能，如地址验证和配置等。（3）串行数据转场协议（Serial Data Transport Protocol，SDTP）：实现在一个数据链路上同时传送多个网络层分组的方法。（4）多协议栈控制（Multiprotocol Transport Control，MPLSCP）：实现多协议栈的通信功能。
### 2.6.3. FDDI协议
FDDI协议（Fiber Distributed Data Interface protocol）是一种网络互连的标准协议。它主要用于光纤分布式的数据接口。FDDI协议可以在各种速率的局域网上进行数据的互连。FDDI协议的帧结构规定了数据部分的最小单元，称为“帧”（frame）。FDDI帧的最小长度为48字节，最大长度为2^16 - 1字节。
### 2.6.4. ADSL协议
ADSL协议（Asymmetric Digital Subscriber Line）是一种数字业务电话线的传输协议。ADSL协议是一款优秀的传输协议，可以提供高质量、低延迟、稳定性强的数据通信。ADSL协议包括两种类型的线缆，分别为上行链路（Upstream）和下行链路（Downstream）。上行链路用于上行传输，下行链路用于下行传输。
### 2.6.5. ATM协议
ATM协议（Asynchronous Transfer Mode）是异步传输模式，它是一种传输数据的方式，可以用来实现不同速度、距离范围的通信。ATM协议的帧结构规定了数据部分的最小单元，称为“cell”。ATM帧的最小长度为53字节，最大长度为2^16 - 1字节。