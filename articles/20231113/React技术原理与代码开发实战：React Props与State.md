                 

# 1.背景介绍


React是由Facebook开源的JavaScript库，用于构建用户界面（UI）组件。其设计理念采用单向数据流架构(unidirectional data flow)，可以降低复杂性并提高应用性能。其独特的声明式编程方式使得UI开发过程更加简单，也能最大程度地减少错误。本文主要介绍Props和State在React中扮演的角色及其工作原理。首先，我将介绍React组件之间通信的两种方式--父子组件传值props和兄弟组件间状态共享state。
# 2.核心概念与联系
## 2.1 Props
### 2.1.1 Props概述
Props(properties的简称) 是一种只读的数据属性，它是从父组件传递给子组件的数据源。父组件通过 JSX 的形式指定 props 属性，并在 JSX 中引用。子组件可以通过 this.props 获取父组件传递过来的 props 数据。但是 props 本身是一个对象，因此不建议对其直接修改。要修改 props 数据，只能通过父组件重新渲染子组件。
### 2.1.2 Props类型
在 JSX 中，可以使用三种类型的 props:
- string (例如："Hello, world!" 或 'foo')
- number (例如：42 或 3.14)
- boolean (例如：true 或 false)
### 2.1.3 父子组件传值的规则
父组件可以在 JSX 中通过标签的形式，把任意数据传给子组件的 props 属性。父组件和子组件都可以通过 props 对象获取这些数据。这种父子组件传值的方式可以实现数据的共享。但这样会导致数据冗余，不利于维护。一般情况下，应该尽量避免 props 的滥用，确保它们仅用于组件之间的通信。
### 2.1.4 为什么要使用 Props？
React 通过 Props 抽象化了组件之间的通讯关系。传参时，父级只需要提供所需参数即可；而不需要关心内部工作原理，以及由谁来处理或调用；这样就增加了可维护性和可扩展性。同时，Props 可以让组件变得健壮、易于测试，因为它的状态明确定义了依赖关系。
## 2.2 State
### 2.2.1 State概述
State 是一种可变的数据属性，它是组件自己管理的，且只有该组件内才可访问。父组件可以通过设置 state 来更新子组件的 UI 显示，也可以通过获取当前的 state 进行计算或操作。当组件的 state 更新时，组件就会自动重新渲染。
### 2.2.2 何时使用 State?
状态的存在有助于保持组件的完整性和一致性。例如，用户登录表单中的输入框的值应该是私有的，不能被其他地方的组件或数据影响。可以通过引入状态来保存这些信息。
### 2.2.3 State生命周期
State 具有生命周期，如 componentDidMount() 和 componentDidUpdate() 方法。它们在不同阶段会被触发，以响应不同的事件。其中，componentDidMount() 会在组件完成装载后执行一次，可以用来初始化一些变量；componentDidUpdate() 会在组件更新后执行，可以用来根据新的 props 和 state 对页面进行重新渲染。
## 2.3 Props 和 State的区别
Props 和 State 有以下区别：

1. 身份：Props 是父级传递给子级的数据，是一个只读的对象，子级只能读取。而 State 则是子级自己管理的状态，是一个可变的对象，父子都可以修改。
2. 使用范围：Props 只能在组件间通信，而 State 可以在整个组件生命周期内被使用。
3. 生命周期：Props 在父子组件间通信时，只存在于两者间的生命周期中，一旦离开作用域，就不存在了；而 State 则一直存在于组件的生命周期中，并随着组件一起变化。
4. 复用性：Props 是一个只读对象，它的内容不可更改，因此无法在不同组件之间共享，只能在同一个父级下使用。而 State 是一个可变对象，可以被任意组件共享，并且可以被修改。