
作者：禅与计算机程序设计艺术                    

# 1.简介
  

工厂方法模式（Factory Method Pattern）又称为工厂模式，它属于创建型设计模式。在简单工厂模式中，一个类的实例化被隐藏了，用户只需要知道所使用的具体类名就可以新建该对象，而在工厂方法模式中，类的实例化被分离到抽象工厂接口中，每个子类都负责创建某一类型的对象，工厂方法模式使得增加新的产品时不影响其他代码，符合“开闭”原则。其特点如下：

1、优点

1) 灵活性高：由于工厂方法将实例化推迟到了子类，因此可以通过继承等方式来扩展产品系列；

2) 对新产品/变化易容：当增加新的产品时，无需修改已有代码，只要添加一个相应的产品类即可；

3) 用户可自定义：如果用户有特殊的需求，可以重载工厂方法来提供自己的实例化逻辑；

4) 屏蔽产品类细节：客户端只依赖抽象工厂接口，而无需关注产品类的内部结构；

缺点：

1) 添加新产品时，需要编写新的产品类，增加了系统复杂度；

2) 开销大：每次创建产品对象时，需要通过一个工厂方法实例化，并调用产品类的构造函数，开销比较大；

3) 只适合简单场景：因为工厂方法模式向客户端暴露了创建逻辑，当业务逻辑变得复杂时，就需要引入多层的工厂类来进一步封装创建逻辑。

2.基本概念术语说明
简单工厂模式：简单的工厂模式是指工厂类根据传入参数的不同返回不同类的实例，它的核心方法就是静态方法createProduct()，它的好处是只需要传入参数就可以获得相应的产品对象，缺点是类的个数不能太多，也没有对产品类的管理，当增加新的产品时，可能需要修改工厂类的源代码。

工厂方法模式：在工厂方法模式中，引入了一个抽象工厂接口，它声明了一组用于创建对象的接口，然后由子类决定要实例化哪个类，这样就可以从面向对象的角度解决简单工厂模式的两个缺点。

角色：

1、抽象工厂（Creator）角色：它定义了一个用于创建产品对象的接口，factoryMethod()方法是工厂方法，调用这个方法来获取对应的产品对象。
 
2、具体工厂（Concrete Creator）角色：它实现了抽象工actory类的所有抽象方法，并负责实现创建产品对象的方法，也就是说，它除了实现父类中的 factoryMethod 方法外，还可以自行实现一些额外的功能。

3、抽象产品（Product）角色：它是一个抽象类或者接口，提供了产品类的公共接口。

4、具体产品（Concrete Product）角色：它是实现了抽象产品类的具体类。

应用场景：

1、数据库连接池：对于多种类型的数据库的连接，一般都通过工厂方法模式提供统一的接口，调用方通过传递不同的参数即可得到不同类型的数据库连接，比如MySQL数据库连接，Oracle数据库连接，SQL Server数据库连接等。

2、消息处理机制：对于发送邮件、短信、微信消息等各种类型消息的发送，可以通过工厂方法模式统一接口，让调用方只管选择发送什么类型的消息即可。

3、GUI组件：对于按钮、输入框、下拉菜单等常用UI组件的创建，可以通过工厂方法模式来提供统一的接口，调用方只管选择创建什么类型的组件即可。

总结：

1、两种模式各有特点，适应不同的业务场景。

2、工厂方法模式更加符合“开闭”原则，增加产品时无需改动已有的代码，而且通过一个统一的接口来创建对象，降低了耦合度，更容易扩展。

3、简单工厂模式虽然简单但局限性很大，而且当产品较多时，维护起来会十分麻烦。所以，工厂方法模式是较好的选择。