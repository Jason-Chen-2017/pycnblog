
作者：禅与计算机程序设计艺术                    

# 1.简介
  

宽度(width)是CSS中的一个属性，它用于设置元素的宽度。如果您不确定浏览器如何计算元素的宽度，可以阅读本文。

首先，我们应该清楚元素的宽度和内容之间的关系。在HTML中，一个元素的宽度由两个因素决定——内联样式、外联样式和计算样式。内联样式是通过style属性直接应用到元素上的CSS样式。外联样式则是通过link标签或@import规则引用外部样式表文件，并应用到文档中相应元素上。计算样式通常指的是CSS中的各种计算值，如auto、px等，这些值的大小则依赖于父元素及祖先元素的宽度。

因此，当我们把一个元素的宽度设置为某个固定值时（例如100px），该元素将始终保持这个固定的宽度；而如果没有指定宽度，那么浏览器就会根据它的内联样式、外联样式、以及父元素及祖先元素的计算样式来计算出合适的宽度。当然，一些特定类型的元素可能也会对宽度有自己的特殊约束。比如，在文本输入框中，宽度一般比它显示的内容宽度要宽。

浏览器从哪里开始计算元素的宽度？下面我们就来了解一下各个主要元素的宽度计算规则。

1.inline-level elements 行内级元素
我们说过，在HTML中，行内级元素即属于文字级别，并排列的文本内容不会另起一行。其中包括span、a、strong、em、img、input等等。

在这些元素中，内联样式、外联样式和计算样式的计算优先级如下所示：

计算样式>外联样式>内联样式

也就是说，如果同时定义了三个样式，优先顺序是计算样式最高，然后是外联样式，最后才是内联样式。如果没有定义任何样式，那么默认的宽度就是其本身的宽度，如内联元素会占据父元素的剩余空间。

2.block-level elements 块级元素
块级元素即垂直方向上下排列的元素，一般用来包裹文字或者其他块级元素。其中包括div、p、ul、ol、h1~h6、table、form等等。

在块级元素中，内联样式、外联样式和计算样式的计算优先级如下所示：

计算样式>外联样式>内联样式>内容宽度

也就是说，如果没有设置宽度，浏览器会按照内容宽度来计算宽度。而计算样式和外联样式的计算是相同的。所以，对于块级元素来说，它们只能撑满其父容器的宽度，不能超过自己设定的最大宽度。除非用负盒子布局或float进行调整。

3.tables 表格
在HTML中，表格由table、thead、tbody、tfoot、tr、td、th等标签定义。当浏览器渲染表格时，首先会计算表格自身的宽度，然后再依次计算每一行、每一列的宽度。

计算表格宽度时，浏览器会按照以下规则优先考虑：

1）单元格的内容宽度：如果单元格的内容宽度超过单元格的宽度，则单元格的实际宽度就是内容宽度；否则，单元格的宽度就是指定的宽度。

2）单元格的最小宽度：如果单元格的最小宽度大于单元格的宽度，则单元格的实际宽度就是最小宽度；否则，单元格的宽度就是单元格的内容宽度。

3）列宽：浏览器会根据列宽计算整个表格的宽度。如果列宽之和小于表格的宽度，则表格的实际宽度就是列宽之和；否则，表格的宽度等于指定的宽度。

4）表格的最小宽度：如果表格的最小宽度大于表格的宽度，则表格的实际宽度就是最小宽度；否则，表格的宽度等于列宽之和。

如果以上四种方式都无法满足表格的宽度要求，则表格的宽度将随窗口的变化而变化。