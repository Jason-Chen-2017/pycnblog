
作者：禅与计算机程序设计艺术                    

# 1.简介
  

虚拟私有云（Virtual Private Cloud,VPC）是利用 Amazon Web Services(AWS) 提供的基础设施即服务（IaaS）的一种方式，通过创建自己的网络环境，独立管理自己的服务器和存储设备，实现网络连通、安全隔离、资源共享等功能。
虚拟私有云可以让企业快速部署复杂系统，降低成本，提高服务质量，同时还可以防止数据泄露、网络攻击等安全风险。
AWS VPC 是提供 IaaS 服务的一个重要组件，帮助客户在 AWS 平台上构建高性能、可扩展性强的分布式应用系统。它提供了丰富的网络配置选项，如子网、路由表、NAT网关、网络ACL等，通过它们可以更灵活地控制 VPC 内的网络访问策略。VPC 也支持多种类型的 EC2 实例，包括 Amazon Elastic Compute Cloud (EC2)，Amazon ElastiCache for Memcached 和 Redis，Amazon Aurora MySQL 和 PostgreSQL，Amazon Redshift 和 Amazon DocumentDB。
# 2.准备工作
## 2.1 注册 AWS 账户


## 2.2 配置 IAM 用户权限
注册完成后，我们需要创建一个 IAM（Identity and Access Management）用户，赋予其权限。



为刚才创建的 IAM 用户授予以下权限：

- AWSCloudFormationFullAccess：允许 CloudFormation 创建和管理 AWS 资源
- AmazonEC2FullAccess：允许管理 EC2 实例及其相关资源
- AmazonS3FullAccess：允许管理 S3 对象存储桶


注意：选中某个权限前面的复选框表示授予该权限，未勾选则表示不授予该权限。

最后点击“下一步：标签”，给用户打上标签（可选）。点击“下一步：审核”，确认信息无误之后再点击“创建用户”即可。

## 2.3 创建 Key Pair


## 2.4 创建 VPC


VPC 创建完成后，我们就可以创建 subnet （子网），让 VPC 中的 EC2 实例连接起来。点击左侧导航栏中的“Subnets”，然后单击“Create Subnet”。为子网命名、选择 VPC、输入 IP 地址范围，然后点击“完成”。


至此，我们已经准备好了 VPC ，接下来就是创建 EC2 实例了。

# 3. 创建 EC2 实例
## 3.1 选择 EC2 实例类型


选择 EC2 实例类型，根据自己的需求选择。我这里选择的是 t2.micro ，免费试用版，也可以选择其他实例类型，具体信息如下图所示。


注意：请确保选择的 EC2 实例类型支持 VPC 。否则无法正常运行。

## 3.2 配置 EC2 实例
选择好 EC2 实例类型后，单击“下一步：配置 Instance Details”。配置实例详情包括：

1. 按需或预留的 EC2 实例数量。按需实例不需要事先支付费用，只需要付出相应的运行时间费用，适合于短期或临时任务；预留实例可以在一定期限内获得固定的价格折扣，适合长期运行任务。
2. 自定义的 EC2 实例名称。
3. 启用 VPC 。开启 VPC 会将 EC2 实例置于 VPC 网络中，使得实例具有互联网访问能力。
4. 指定网络配置。默认情况下，实例被分配了一个公网 IPv4 地址。如果需要访问内部资源（如数据库），可以通过 VPC Peering 或 VPN 来实现网络连接。
5. 添加存储。可以增加更多磁盘存储空间，提供更大的容量来处理数据。


## 3.3 配置 EC2 实例的安全组
配置实例的详细信息后，单击“下一步：添加储存”。配置存储包括：

1. 分配实例的操作系统磁盘大小。实例的操作系统分区是不受限制的，可以从本地硬盘或EBS卷上安装操作系统。
2. 为实例选择启动 volume。通过设置启动 volume 可以为实例提供更多的磁盘空间，从而允许系统写入操作。如没有特殊需求，可以不设置启动 volume 。


配置存储后，单击“下一步：添加标签”。标签可用于标识资源。配置标签包括：

1. 在键值对中添加用户定义的标签，例如 Name：Web Server。
2. 将实例与资源组关联。关联资源组可方便管理和监控实例。


配置标签后，单击“下一步：配置安全组”。配置安全组包括：

1. 允许实例间通信。
2. 允许特定端口上的流量。
3. 将 SSH 协议从公共网络转移到 VPC 中。


配置安全组后，单击“下一步：添加元数据”。添加元数据可以向实例添加自定义属性。


配置元数据后，单击“下一步：审查并启动”。审查实例配置信息后，单击启动按钮启动实例。


启动实例后，页面会显示实例的状态。当状态变为 “running” 时，实例就成功启动。
