
作者：禅与计算机程序设计艺术                    

# 1.简介
  

MyISAM 和 InnoDB 是MySQL中的两种主要的存储引擎。虽然它们都是基于B+树索引结构的存储引擎，但是它们在性能方面却存在一些差别。每种引擎都提供了不同的功能特性，适合不同场景下的应用。以下内容将介绍一下这两种存储引擎之间的区别、优点和缺点，并说明在具体场景下应该如何选择合适的引擎。
# 2.存储引擎概念
存储引擎是一个数据库系统中用于管理数据的组件，负责存储、组织和检索数据。其作用包括创建/删除表格、索引等。每一个存储引擎都有自己独特的功能和优点，同时也会影响到数据库服务器的性能。在MySQL中，可以设置多个存储引擎，也可以通过指定存储引擎来创建或修改表。
# 3.存储引擎分类
MySQL支持三种类型的存储引擎，即MyISAM、InnoDB和Memory等。其中MyISAM（默认）和InnoDB都是事务安全型的存储引擎。其它两种存储引擎，如MEMORY和CSV，则不提供事务安全保证。

**MyISAM：**

MyISAM引擎是一个高效的非关系型数据库。它被设计用来处理大量的短期记录。MyISAM提供了一个快速的索引方式，它类似于HASH索引。对于只插入少量记录的表，MyISAM表同样非常快，因为它的数据文件仅保存数据记录本身。由于需要维护索引文件，因此MyISAM占用的磁盘空间比InnoDB小很多。但它的CPU利用率较低，而且不能承受高并发访问，适用场景主要是绝大多数OLTP(Online Transaction Processing)类型的应用。

**InnoDB：**

InnoDB引擎是一个用于服务于永久性存储的事务型数据库。它是在MySQL 5.5版本引入的，之前的版本中叫做XtraDB或EnterpriseDB。InnoDB支持ACID事务。它的特点是提供高速索引，通过键值对的格式存储数据，并且支持行级锁定。相比MyISAM，InnoDB提供更好的支持行级锁定，并采用聚集索引结构，因此主键查询具有更高的效率。但相比MyISAM，InnoDB占用的内存和磁盘空间要大很多。它也提供更多的安全特性，比如完整性检查、崩溃恢复能力以及事务日志等，适用场景是需要频繁更新和事务处理的应用。

**Memory：**

MEMORY存储引擎不持久化数据，而是保存在内存中。它以堆内存形式工作，支持临时表、变量和存储过程。与InnoDB不同，MEMORY是共享表的一种机制，任何线程都可以使用相同的内存区域。该存储引擎的速度很快，可以用于缓存数据、临时表等。MEMORY仅可用于事务型存储引擎，MyISAM和InnoDB均不支持。

**CSV：**

CSV存储引擎是一种文本形式的数据库，文件格式为CSV。CSV存储引擎加载数据时直接读取并解析CSV文件，不会构建额外的索引，适合批量导入和导出。其优点是轻量级、容易导入导出、便于备份和恢复。但是不支持事务处理，不支持索引查找。适用场景主要是导入导出的简单数据。

# 4.选择MyISAM还是InnoDB？
既然有了这么多的存储引擎供选择，那么到底应该选用哪个呢？这取决于应用场景、数据类型及其他因素。下面就让我们一起讨论一下这两个引擎的一些适用场景和特征。
## （1）适用场景
首先，我们来了解一下这两个引擎分别适用的场景。

### MyISAM：

- 普通的静态页面，例如网页的浏览，不需要太多的事务处理或复杂查询。
- 需要大量的插入操作，并且这些插入操作不是按照主键排序的。
- 使用自动或手动触发器进行灵活的控制。
- 数据量比较小，尤其是磁盘空间比较紧张的时候。
- 不经常进行SELECT操作。
- 有非常好的压缩特性，可以节省磁盘空间。

### InnoDB：

- 大量的事务处理，要求高可用性、数据一致性、并发处理能力强。
- 负载非常复杂，包括索引建立频繁、事务提交频繁、长时间锁定等待等。
- 需要支持事物，具有自动崩溃恢复能力。
- 要求高性能的 selects 操作，需要大量索引或全表扫描。
- 需要快速地导入大量数据，通常需要大块的内存或硬盘资源。

从上面两条规则上看，MyISAM和InnoDB分别适用于不同的场景。所以，根据自己的实际情况，选择合适的存储引擎也是非常重要的。

## （2）数据类型
另一个重要的考虑因素就是数据类型。一般来说，MyISAM更适合用于经常被读取的数据；而InnoDB则更适合用于处理事务性数据，以及要求实现高并发处理的应用。当然，还有一些其他因素也会影响到选用何种引擎。下面让我们来具体讨论一下每种引擎的特点。

### MyISAM：

- 最适合于表列不多，但每张表又要求支持大量事务处理的应用。
- 支持索引、支持主键和唯一索引。
- 提供批量插入的方法。
- 数据存储在独立的表空间，如果表很大，可能导致碎片。
- 如果表很大，一次加载进内存可能很慢。
- 它支持全文索引，但没有空间索引。

### InnoDB：

- 支持事物。
- 默认支持集群索引，支持更多的索引和更强的并发处理能力。
- 支持更多的行格式选项，例如COMPRESSED和DYNAMIC。
- 所有数据都存放在一个共享表空间内，可以更有效地利用内存和磁盘。
- 可以通过页分裂和压缩等手段减少碎片。
- 支持空间索引。
- 它支持更丰富的日志记录功能，能够追踪回滚等事件。
- 它提供更好的崩溃恢复能力，特别是在遇到崩溃的情况下，可以更快地启动，并且恢复操作会变得十分简单。

总结来说，MyISAM和InnoDB都是优秀的存储引擎，适用于不同的场景。但是，在具体场景中，每个人都应该权衡利弊，选择适合自己的存储引擎。