                 

# 1.背景介绍


React Native 是 Facebook 提供的一款跨平台、开源的移动应用框架。其最大特点在于可以开发出原生级别的高性能应用。作为 React 的一个分支版本，它包含了 JSX 和 Virtual DOM 技术，可以轻松地编写组件化的代码结构。不过相比起其他主流的前端框架而言，它还是有很多独有的特性需要了解。因此，本文将从以下几个方面介绍React Native中布局相关的知识：
- Flexbox布局机制：Flexbox 是 CSS 中的一种弹性布局机制，通过设置 Flexbox 属性来实现不同屏幕尺寸下的页面布局。此外，Flexbox 也支持响应式设计，能自动调整布局。
- 组件内外边距及其合并规则：组件间的边距如何计算，以及其默认值如何，还有当这些属性被设置为0时，实际上意味着什么？
- flexDirection及justifyContent等布局属性的作用及原理。
- 其它更多的布局相关知识。如事件处理和动画的原理和用法。

# 2.核心概念与联系
## 2.1 Flexbox布局机制
### 定义
Flexbox 是 CSS 中用来布局的一种新技术，由 W3C（万维网联盟）推荐标准化，提供了一个更加灵活的布局方式。与传统的基于表格的布局方法相比，Flexbox 更加适合复杂、动态以及交互性强的 Web 应用程序的布局要求。

### 优点
- 使用方便：Flexbox 语法简洁清晰，学习成本低；
- 分布式设计：Flexbox 允许灵活的分布式设计，使得不同的浏览器显示效果一致；
- 可变性：Flexbox 支持按比例伸缩，能够方便地适应多种屏幕尺寸；
- 浏览器兼容性：Flexbox 在所有现代浏览器上都得到支持，对老旧浏览器兼容性不佳。

### 基本概念
Flexbox 有三个重要的概念：主轴、交叉轴和容器。其中，主轴沿着水平方向，由 flex-direction 属性决定；交叉轴则垂直于主轴，由 justify-content 和 align-items 属性决定；容器则是一个个元素的集合，包含可变数量的子项，由 display:flex; 来声明。


#### 主轴
默认的主轴为水平方向，即 x 轴。主轴的开始位置由 justify-content 设置。可选的值包括：

- flex-start (默认值)，主轴向左靠齐，子元素排列顺序从左到右。
- flex-end，主轴向右靠齐，子元素排列顺序从右到左。
- center，主轴居中。
- space-between，两端间距相等。
- space-around，每个子元素两侧间距相等，首尾间隔均匀。

#### 交叉轴
默认的交叉轴为垂直方向，即 y 轴。交叉轴的开始位置由 align-items 属性决定。可选的值包括：

- flex-start，交叉轴向上靠齐，子元素排列顺序从上到下。
- flex-end，交叉AXIS向下靠齐，子元素排列顺序从下到上。
- center，交叉轴居中。
- baseline，基线对齐。
- stretch （默认值），交叉轴拉伸至满充满。

#### 项目(Item)
Flexbox 中的每一个子项都是 Item，它们按照主轴的方向进行排列。

#### 容器(Container)
Flexbox 容器是指 display:flex; 这个声明的父级元素，它会生成一个块级元素并充满整个宽度，也可以设置最小高度或宽度。如果想让子项以弹性的方式在横纵方向上扩展，则需要放在 Flexbox 容器中。

### 布局过程
Flexbox 布局主要涉及两个阶段，分别为“轴线检测”和“主轴排列”。

1. “轴线检测”阶段：首先，Flexbox 会确定哪些子项是可用的，哪些不可用，根据可用空间分配主轴长度。

2. “主轴排列”阶段：接着，Flexbox 根据 justify-content 和 align-items 对主轴方向上的位置进行微调，并根据 align-self、order、flex 等属性对子项的大小和位置进行设置，以达到最终的布局效果。


### 兼容性
目前，Flexbox 在所有现代浏览器上都得到支持。但是，旧版 IE 不支持该技术，所以在使用 Flexbox 时要注意浏览器兼容性。另外，建议只使用 Flexbox 来布局，不要再使用其它方案。

## 2.2 组件内外边距及其合并规则

React Native 中组件的内外边距可以使用 padding 和 margin 这两个样式属性来设置。那么，这两种属性之间有何区别，它们又有什么共同点呢？

### 定义
CSS 的 padding 和 margin 用于控制一个 HTML 元素内部与外部的空白区域。padding 用于设定元素四周的空白距离，margin 用于设定元素与它的周围元素的距离。在 React Native 中，这两种属性可以应用到 View 组件或 Text 组件上。

### 区别
**边距类型**：padding 定义四周的填充空白区域，margin 定义元素与元素之间的间距。

**位置**：padding 仅影响元素的内容，不会影响元素的边框和背景；margin 则影响元素的四周。

**元素间距**：如果两个相邻的元素的 margin 重叠，则较大的值将应用。

**层叠性**：margin 会影响后面的元素，padding 则不会影响。

### 总结
一般情况下，我们应该优先选择使用 margin 来布局，因为 margin 可以影响元素的大小和位置。例如，我们想要在上下边界留出一段距离，同时仍然保持元素居中，就应该使用 margin-top 和 margin-bottom。