                 

# 1.背景介绍


## 1.1 MyISAM简介
MyISAM是一个关系型数据库管理系统所使用的默认引擎，被设计用来处理大量的小规模数据集。它支持索引、自动压缩表以及事务安全等功能，但其设计简单快速、资源消耗低、可靠性好、适合于随机查询等要求不高的应用场合。因此，对于不要求高度并发处理，同时又需要维护数据的完整性的应用场景，MyISAM是一种很好的选择。
## 1.2 MyISAM特性
- 支持全文检索（FULLTEXT）：MyISAM可以对全文检索字段建立索引，并且提供相关的API接口。
- 支持行级锁：MyISAM采用行级锁，即每次锁定只能锁住相应的行，从而提升了Concurrency Control性能。
- 数据文件分离：MyISAM中数据存放在独立的数据文件中，相对于InnoDB，其数据文件本身也会更加紧凑，使得每个数据文件大小可以相对较小。
- 空间节省：MyISAM在索引时采用的B+树结构，不会留下任何的空余空间，使得其大小可以远小于InnoDB。
- 轻量级事务：MyISAM支持了COMMIT、ROLLBACK和TRANSACTION操作，这使得它可以在某些情况下不需要InnoDB的LOG模块来保证事务的ACID特性。
- 查询缓存：MyISAM提供了一个简单的查询缓存机制，但由于其设计简单，缓存命中的概率并不是很高。如果需要高速缓存效果，建议用InnoDB。
- 拥护简单性：MyISAM作为MySQL的默认存储引擎，不仅速度快而且易于使用，适用于绝大多数需求。所以，如果你刚开始使用MySQL，或者需要一个快速、简单、小巧的数据库引擎，那么MyISAM可能是你最佳的选择。
## 2.核心概念与联系
## 2.1 InnoDB
InnoDB，是 MySQL 的默认存储引擎，支持 ACID 特性，支持事物和行级锁，提供了一定程度的并发控制，以及良好的备份恢复能力。其主要特点如下：

1. 支持外键约束

2. 提供了聚集索引(Clustered Index)和辅助索引(Secondary Index)，支持主键和唯一索引。

3. 支持事物(ACID Transaction Model)

4. 支持行级锁(Row Level Locking)

5. 使用 B+Tree 组织索引结构

6. 每个表都有独立的索引文件

7. 支持表空间功能，支持秒级的崩溃恢复

总结：InnoDB 是 MySQL 默认的存储引擎，具有优秀的并发控制能力和安全性，支持事物和行级锁。而且，它还提供了完善的备份恢复机制。所以，对于需要频繁读取的业务或高并发的场景，InnoDB 更适合选择。

## 2.2 索引概念
索引就是帮助MySQL高效获取数据的数据结构。索引按照数据结构的不同分成不同的类型，最常见的索引包括：

1. 普通索引（普通索引，Normal index）。

2. 唯一索引（Unique index）。

3. 组合索引（Composite index）。

4. 前缀索引（Prefix index）。

5. 覆盖索引（Covering index）。

其中，普通索引和唯一索引，都是用来快速定位记录的一种数据结构；而组合索引，则是在多个列上创建的联合索引，可以有效避免一些查询语句对多个字段进行索引扫描的时间开销；前缀索引，指的是只索引关键词的一个前缀，可以降低索引文件的大小和维护开销；最后，覆盖索引指的是索引的数据已经能够满足查询所需的数据，避免回表操作，加快查询速度。

## 2.3 文件格式及页结构
对于MyISAM文件，一般占用磁盘空间小，访问速度也较快，但是没有事务支持和崩溃后的自动恢复能力差；而InnoDB是MySQL的默认存储引擎，占用磁盘空间大，支持事务，支持崩溃后的自动恢复，具有众多的 features ，除了有索引以外，它的B+Tree文件组织形式也同样能够快速定位数据。因此，对于随机查询或较少修改的应用场景，MyISAM会比较合适，而对于频繁更新、并发量大的应用场景，InnoDB更加适宜。

每张InnoDB表都对应一个".ibd"的文件，该文件保存了表数据，索引信息等。除了ibd文件，还有两个文件，一个是MYD（MYData），保存了表的数据，一个是MYI（MYIndex），保存了表的索引。如下图所示：

上图展示了InnoDB的存储结构，一个".ibd"文件保存着表数据和索引信息，由两个文件构成，MYD保存了表的数据，MYI保存了表的索引。通过扫描索引文件，可以快速找到指定的数据位置。