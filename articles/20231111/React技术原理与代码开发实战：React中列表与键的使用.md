                 

# 1.背景介绍



作为React框架的创始人Facebook在2013年发布了React JS框架。其主要目标是构建用于构建用户界面应用的JavaScript库。随着时间的推移，React JS已经成为目前最流行的前端JS框架。React JS被称为“组件化 JavaScript”，能够帮助开发者以更高效的方式构建复杂的用户界面。通过React JS可以快速地创建可复用、可维护的代码库。

本文将结合实际项目案例，从React JSX语法及其相关API入手，全面剖析列表和键的作用和使用方法。希望能给你带来一些启发，提升你的React技艺水平！

# 2.核心概念与联系
## 2.1 React JSX
React JSX(JavaScript XML) 是一种类似于HTML语言的语法扩展。它允许我们在JSX里嵌入JavaScript表达式并将它们渲染到DOM上。

```jsx
const element = <h1>Hello, {name}</h1>;

 ReactDOM.render(
   element,
   document.getElementById('root')
 );
```
React JSX中的表达式需要放在花括号{}里面，表示一个JavaScript变量或表达式。这个变量的值会在运行时计算得到。花括号里面的内容可以是一个字符串，也可以是一个数字，甚至是另一个React元素。React JSX提供了许多内置的组件（比如div, span等）以及一些浏览器原生的元素（比如button）。因此，如果熟悉HTML的话，理解React JSX就非常简单了。

### 2.1.1 JSX语法规则
- 大写字母开头的标识符表示 JSX 标签；
- {} 表示一个表达式，会在运行时计算结果；
- 属性值要放在双引号""里；
- 注释只能单行 // 或 /* */；
- 如果属性值没有使用双引号包裹，则该值被当做 true 处理。

## 2.2 Virtual DOM
Virtual DOM (也叫VDOM) 是React的一个重要概念。VDOM是一种轻量级的虚拟对象，用来描述真实的DOM结构。每当React更新UI的时候，都会重新生成一棵新的Virtual DOM树，然后将两棵树进行比较，找出最小的差异，只对需要变化的部分进行真实的DOM操作。这样做的好处是实现真实DOM更新的代价比较低，因为仅需更新少量节点，而不是整个页面。

Virtual DOM有以下两个特点：
1. 更加接近真实世界，不受渲染机制影响；
2. 不直接操作真实DOM，而是生成虚拟的渲染对象，减少系统开销。

VDOM图示如下：


可以看到，Virtual DOM是一棵树形结构，每个节点都代表一个真实的DOM节点或者React组件。这些节点之间存在父子关系，可以进行递归遍历获得完整的渲染视图。

## 2.3 key属性
key属性是给React元素提供一个标识。React 使用 key 来判断是否需要更新某个元素，改变的前后两个元素拥有不同的 key 的话就会认为是不同的元素，重新渲染。

举个例子：假设有一个数组，初始状态是 ['A', 'B', 'C']，使用map函数映射生成一个新的数组，如['a', 'b', 'c']。但是由于map函数只是创建一个新数组，并不会修改原始数组，所以当数组内容发生改变时，React会认为这些节点内容并没有变化，不会重新渲染。为了避免这种情况，我们可以给每一个数组项设置唯一的key属性。

```jsx
<ul>
  {list.map((item, index) =>
    <li key={index}>{item}</li>
  )}
</ul>
```
上面例子中，每一个li元素都设置了一个唯一的key属性，值为数组的索引。这样当数组内容发生变化时，React就可以正确判断哪些节点需要更新。