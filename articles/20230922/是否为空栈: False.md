
作者：禅与计算机程序设计艺术                    

# 1.简介
  

## 概念
栈（Stack）是一种线性数据结构，只允许在一端进行插入和删除操作。栈的特点就是先进后出（First-In Last-Out, FILO），最先进入栈的数据最后被释放。它支持两大操作——push(压栈) 和 pop(弹栈)。

## 为什么要学习栈？
栈作为一种简单却常用的数据结构，它的基础应用很多。从生活中我们可以发现许多生活中的场景都使用到了栈。比如说我们打开一个书本，平常读到的都是上下页，最后一页会排到最上面；在电脑上点击一个链接，浏览器的历史记录就保存在栈中，按下“回退”按钮，就会依次从栈中弹出页面；打印机的打印任务也是一个栈的结构，先进的任务一定先得到执行。当计算机遇到函数调用、递归或者循环调用时，都会把调用信息存放在栈中。所以，学习栈并不是一件困难的事情。

## 栈的主要应用
栈可以用来模拟经典的算术表达式求值、进制转换、括号匹配、函数调用等功能。栈也广泛应用于图形界面的绘制、编辑器文本撤销恢复、递归遍历树、游戏 AI 的决策过程、词法分析、编译器语法解析等领域。

## 栈的数据结构定义
栈有两个主要的数据结构：顺序栈和链式栈。下面分别对这两种数据结构进行阐述。
### 顺序栈（Array Stack）
顺序栈是通过数组实现的栈。它的存储空间是连续分配的，而且在栈底和栈顶之外还有一些辅助空间。顺序栈的入栈时间复杂度是O(1)，但是在入栈之后需要整体移动所有元素来腾出空间，所以入栈效率不如链式栈。但是顺序栈在实现简单、效率高的同时，占用的内存空间也比较少，因此很适合用于短小的数据存储。


### 链式栈（Linked List Stack）
链式栈是采用链表实现的栈。每个节点只保存数据值和指向下一个节点的指针，而栈顶的位置不在栈内。这样做的好处是没有必要重新分配内存，相比顺序栈节省了空间。链式栈的入栈时间复杂度是O(1)，但是出栈时间复杂度则依赖于待删除的节点的位置。对于头结点的特殊处理需要更多的代码才能实现，因此实现起来比较复杂。



## 栈的基本操作
栈具有以下几个基本操作：
* push - 将元素压入栈顶
* pop - 从栈顶弹出元素
* peek - 返回栈顶元素的值，但不移除该元素
* isEmpty - 判断栈是否为空

除此之外，栈还可以支持另外两个操作：
* size - 返回栈中元素数量
* clear - 清空栈

下面详细讨论这几种操作。

## PUSH 操作
将一个新元素加入栈顶。可以看作是向栈顶添加一个新的元素。这里为了描述清楚，假设栈的实现形式为顺序栈或链式栈。
### 顺序栈
在顺序栈中，当元素被压入栈顶时，需要创建一个新节点并将其值设置为待加入的元素值。然后更新栈顶指针指向这个新建的节点。这一步可以使用数组操作完成。如下图所示：


### 链式栈
在链式栈中，创建一个新的节点并设置其值为待加入的元素值，然后将当前栈顶节点的 next 指针指向这个新建的节点。如下图所示：


## POP 操作
从栈顶删除一个元素。可以看作是从栈顶删除了一个元素，并且返回被删除的元素。这里为了描述清楚，假设栈的实现形式为顺序栈或链式栈。
### 顺序栈
在顺序栈中，当栈顶指针指向某个节点时，即代表栈中至少有一个元素，因此可以通过更新栈顶指针来删除该元素。下面给出删除元素的操作步骤。

首先，检查栈是否为空。如果栈为空，则抛出异常。否则，通过栈顶指针找到栈顶元素。然后将栈底元素复制到栈顶，然后将栈顶指针向后移一位。最后，销毁掉之前的栈顶元素即可。如下图所示：


### 链式栈
在链式栈中，栈顶指针始终指向栈顶节点，因此可以通过改变栈顶指针来删除栈顶元素。下面给出删除元素的操作步骤。

首先，检查栈是否为空。如果栈为空，则抛出异常。否则，找到栈顶元素。然后将前一个节点的 next 指针指向栈顶节点的下一个节点。最后，销毁掉栈顶节点即可。如下图所示：


## PEEK 操作
返回栈顶元素的值，但不移除该元素。可以看作是查看栈顶元素的值，不会对栈做任何修改。这里为了描述清楚，假设栈的实现形式为顺序栈或链式栈。
### 顺序栈
在顺序栈中，栈顶指针始终指向栈顶元素，因此可以通过读取栈顶指针指向的元素来获取栈顶元素的值。如下图所示：


### 链式栈
在链式栈中，栈顶指针始终指向栈顶节点，因此可以通过读取栈顶节点的值来获取栈顶元素的值。如下图所示：


## IS_EMPTY 操作
判断栈是否为空。可以看作是查看栈是否为空，如果为空则返回True，否则返回False。这里为了描述清楚，假设栈的实现形式为顺序栈或链式栈。
### 顺序栈
在顺序栈中，由于栈底元素是无意义的，因此可以根据栈顶指针的位置来判断栈是否为空。如果栈顶指针指向栈底元素，那么栈为空，反之，栈不为空。如下图所示：


### 链式栈
在链式栈中，栈底元素是无意义的，因此无法直接判断栈是否为空。只能通过遍历整个栈来确定是否为空。如下图所示：


## SIZE 操作
返回栈中元素的个数。可以看作是查看栈中的元素个数，不会对栈做任何修改。这里为了描述清楚，假设栈的实现形式为顺序栈或链式栈。
### 顺序栈
在顺序栈中，可以通过维护一个变量来统计栈中元素的个数。栈顶指针的位置即代表栈中元素的数量。如下图所示：


### 链式栈
在链式栈中，也可以通过维护一个变量来统计栈中元素的个数。同样地，栈顶指针的位置即代表栈中元素的数量。如下图所示：


## CLEAR 操作
清空栈。可以看作是删除栈中的所有元素，变成一个空栈。这里为了描述清楚，假设栈的实现形式为顺序栈或链式栈。
### 顺序栈
在顺序栈中，可以通过将栈底元素的引用赋值给栈顶指针，来清空栈。如下图所示：


### 链式栈
在链式栈中，可以通过将栈底节点的 next 指针赋值为 null，来清空栈。如下图所示：
