
作者：禅与计算机程序设计艺术                    

# 1.简介
  

快速排序（QuickSort）是一种分而治之的排序算法，其时间复杂度在平均情况下为O(nlogn)，在最坏情况下也为O(n^2)但是概率非常小，且在工程上应用广泛，尤其是在大数据处理领域。它基于比较排序，通过一趟排序将要排序的数据分割成独立子序列，其中一部分的所有元素都比另一部分的所有元素小，则可分别对这两部分数据进行排序。因此，它是一种高效的内部排序方法，但不是一个非常快的排序算法。快速排序通常用于实现外部排序，即将一个文件或数组的大小不适合于内存容纳时，就将文件分割成若干个小文件，对每个小文件采用快速排序的方法进行排序，然后再合并排序结果。这样可以大大提高排序速度。 

快速排序的原理及操作步骤比较简单，但是如果按照一般人的理解去分析实现的话可能会出现一些误区。比如说，很多人认为快速排序的时间复杂度是O(nlogn)，但其实它的平均时间复杂度却更低，达到O(nlogn)。另外，有的文章把归并排序也叫做快速排序，这是不正确的。快速排序是一种递归排序算法，跟归并排序一样也是一种内部排序算法。除此之外，还包括堆排序、计数排序、基数排序等。本文介绍的是快速排序。 

# 2. 基本概念术语说明
## 2.1 分支定址法
快速排序算法的一个重要技巧是分支定址法。这种方法用到了分支指令，能减少递归调用层数，从而降低了算法的时间复杂度。
## 2.2 比较排序
快速排序是一个典型的比较排序，其排序过程是通过对输入数组进行切分得到两个子序列，左边的子序列中的所有元素均小于等于右边的子序列中的所有元素，然后交换左右子序列中位置相邻的元素，直到左右子序列各自只有一个元素，最后返回两个子序列的头部作为结果。由于该算法原理简单易懂，因此非常适合学习与研究。  

下面是一张图示：  

图中用虚线框出来的部分表示当前正在处理的序列，用红色箭头表示分割点。蓝色箭头向下指的是左半段的元素，黄色箭头向右指的是右半段的元素。初始状态下，整个数组被划分成为两部分，左右两端分别指向左右子数组的首尾。从左至右扫描这个数组，当遇到一个小于或者等于分割点的值时，我们记录这个值所在的位置。扫描完成后，我们将这个位置记为分割点，左右两个指针各指向分割点的左右位置。在每一步迭代中，我们通过交换左右指针所指向的元素，将小于分割点的值放入左侧，将大于分割点的值放入右侧。当左右指针均指向它们的相同位置时，此时分割点处的元素就是排好序的位置。此时，我们通过递归调用左侧子数组和右侧子数组，继续进行排序。

## 2.3 选择主元
快速排序算法选择最后一个元素作为主元。也许有人会问，为什么最后一个元素不行？为了保证每个元素至少参与一次比较和交换，所以必须选取主元元素。