
作者：禅与计算机程序设计艺术                    

# 1.简介
  
 
Prob(H) (two-sided)是概率论中的概念，表示0到无穷大的随机变量X关于事件H的不确定性度量。在很多情况下，研究者们会对这个值进行计算并对其进行比较，例如，当比较两个随机变量X和Y之间的差距时，我们可以通过计算Prob(X>Y) - Prob(X<Y)来得到一个估计值，这就是Prob(H) (two-sided)。那么，什么时候才可以将Prob(H) (two-sided)与Prob(H) (one-sided)进行比较呢？下面我们就来一起看一下两者的区别。

# 2.相关概念
2.1 概率论中定义的概率（Probability）
定义：设X是一个随机变量，其取值范围为S，则对所有A∈S，P(A)=Pr{X=A}，称A的概率为Pr{X=A},即随机变量X可能取某值的概率。

2.2 事件（Event）
定义：设E为集合，当且仅当E中的所有事实都发生时，E成为一个事件。

2.3 独立性（Independence）
定义：若两个事件A和B相互独立，则说它们之间没有相关性，即A与B的发生不影响B与C的发生；换言之，对于任意给定的随机变量X和Y，如果它们的概率分布可以由X和Y各自的概率分布函数的乘积表述出来，则说它们是相互独立的。

2.4 双边概率（Two-sided probability）
定义：如果两个事件A和B具有相同的概率Pr(B)，则称Pr(A)等于Pr(B)/2+Pr(B)/2，称这种概率为Pr(A) (two-sided)。

# 3.常用公式
3.1 贝叶斯定理（Bayes' Theorem）
设A和B是两个事件，且A和B互斥，则A发生的条件下，B发生的概率为：
P(B|A)=P(A|B)*P(B)/P(A),其中P(B|A)表示事件B在事件A发生的条件下发生的概率，P(A|B)表示事件A在事件B发生的条件下发生的概率，P(B)表示事件B发生的概率，P(A)表示事件A发生的概率。

3.2 求和法（Sum Rule）
设A、B、C……是一系列互斥的事件，如果对于所有的i∈I（集合），有P(Ai)=1/n，则称这n个事件是等概率事件（equal probabilities）。设R是取值为1或-1的随机变量，如果R=a_1，a_2，…，a_k，并且ai+1不是零，j!=i，对于所有的i∈[1, k]，则有：
P(Ri=a_i)=P(Ri=-a_i)=1/2;

3.3 几何平均值（Geometric Mean）
定义：如果x1，x2，x3，…是独立同分布随机变量序列，记作Xn^r=Σ_{i=1}^rx_i^r-1，则称该序列的几何平均值为exp((1/r)*Σ_{i=1}^rx_i^(r-1))，这里r=n时为算数平均值。

# 4.计算例子
假设有两枚硬币，分别为正面和反面，每枚硬币都是独立的。如果我们掷了一次，正面朝上，问这次掷出来的硬币是否为正面，如果该硬币是头，求Prob(H) (two-sided)的值。

分析：如果一次掷出的硬币是头，我们可以用“两次不重复试验”的方法进行证明。首先，如果先掷一次硬币，则有两种可能：一是正面朝上，二是反面朝上；如果再掷一次硬币，则还剩下两种可能：一是另外一枚硬币为正面，而当前这枚硬币为头，另一种情况是两枚硬币均为头。因此，这两个硬币所组成的子集，至多只有四种可能，分别为P(HH)(头尾均为头)、P(HT)(头尾均为头)、P(TH)(头尾均为尾)、P(TT)(头尾均为尾)。

根据贝叶斯定理，可得：
P(H|HH) = P(HH)/(P(HH)+P(HT))+P(T|TH)*P(TH)/(P(TH)+P(TT))
     = 1/2+0/2=1/2 ;
P(H|HT) = P(HT)/(P(HH)+P(HT))+P(T|TH)*P(TH)/(P(TH)+P(TT))
     = 1/2*(1/2)*(1/2)=1/8 ;
P(H|TH) = P(TH)/(P(HH)+P(HT))+P(T|TH)*P(TH)/(P(TH)+P(TT))
     = 0/2*(1/2)*(1/2)=0/8 ;
P(H|TT) = P(TT)/(P(HH)+P(HT))+P(T|TH)*P(TH)/(P(TH)+P(TT))
     = 0/2*(1/2)*(1/2)=0/8.

所以，由于每次掷出硬币后只能保留两种可能，因此，Prob(H) (two-sided)的期望值是3/4，其标准差是sqrt[(3/4)*(7/4)-3/4^2]=3/4*sqrt(7/16).

综上所述，这枚硬币一次被掷出，其Prob(H) (two-sided)值为1/2,其期望值为3/4，其标准差为3/4*sqrt(7/16)。

此外，我们还可以从另一个角度证明：对于任意一组独立同分布的随机变量X1,X2,…Xn，我们总可以构造一个新的随机变量Xn,要求它满足一下几个性质：
1. Xn=max(Xi)和Xn=-min(-Xi)，
2. 对任意i∈[1, n],有Xn^2>=max(Xn, 0)^2，
3. 对任意i∈[1, n-1], 有|Xn-(Xn-Xn+1)|<=2,
4. 期望值和方差为0和1.
这样，我们就可以通过计算Xn来计算Xn和其它任何随机变量的关系。

以上两个例子就是两个不同方式计算Prob(H) (two-sided)的例子。