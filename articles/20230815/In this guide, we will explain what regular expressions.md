
作者：禅与计算机程序设计艺术                    

# 1.简介
  

正则表达式（Regular Expression）是一个特殊的字符序列，它能帮助你方便地检查一个字符串是否与某种模式匹配，这种匹配可以是一个简单的字符，也可以是一个更复杂的、结构化的模式。它的强大功能之处在于可以用来处理文本数据、提取信息、从网页中抓取信息等很多方面。而这篇文章，就是要教大家什么是正则表达式，以及如何使用正则表达式来进行各种各样的数据处理任务。
# 2.什么是正则表达式
## 2.1 定义
正则表达式（regular expression，简称regex或regexp），是一个描述符词典，用于匹配一系列符合某个语法规则的字符串。
通过一些元字符及运算符，可以通过有效的字符串组合来构造出非常复杂的模式。正则表达式不是一种编程语言，而仅仅是一个用于指定字符串匹配方式的工具。
## 2.2 组成元素
正则表达式由以下几个部分组成：

 - 普通字符（英文字符）:匹配其自身的普通字符，如a、b、c等；
 - 特殊字符:用于对匹配条件进行控制，如.,*?,+{n},{n,m},?,$,^等；
 - 限定符:用于将正则表达式应用到字符串中的特定位置上，如^表示行首，$表示行尾，.{2}表示前两个字符，[abc]表示只匹配a、b、c中的一个；
 - 边界：用于限制正则表达式匹配的范围，如\b表示单词边界，\w表示单词字符，\s表示空白字符；
 - 杂项：用于控制一些特殊用途，如|（或）表示“或”操作，()表示子表达式，(?:exp)表示非捕获分组。
## 2.3 示例
以下是一些正则表达式示例：
 1. `cat`匹配所有字符串中包含"cat"这个词的情况；
 2. `\d`匹配数字，`\D`匹配非数字；
 3. `[0-9]`匹配任何数字，`[^0-9]`匹配除了数字以外的字符；
 4. `.`匹配任意单个字符，`*`匹配零个或多个字符，`+`匹配至少一个字符；
 5. `{m}`、`{m,n}`分别匹配m和[m,n]个字符；
 6. `( )`表示子表达式，括号内的表达式只能匹配括号内的内容；
 7. `|`表示“或”关系，比如`apple|banana`，表示匹配"apple"或者"banana"字符串；
 8. `^`表示字符串开始，`$`表示字符串结束；
 9. `\b`表示单词边界，`\w`表示单词字符，`\s`表示空白字符。
## 2.4 模式串
模式串是指与正则表达式匹配的字符串，模式串可以通过正则表达式生成，也可人工输入。
## 2.5 匹配方式
在正则表达式中，匹配的方式有两种：“贪婪”模式与“懒惰”模式。
### 贪婪模式
贪婪模式是默认的匹配方式，遇到重复时会尽可能多的匹配字符。举例如下：
   `a.*b` 会匹配 "axyzb", "axyzbb", "axybz"等所有包含abab的情况。
### 懒惰模式
懒惰模式不会让字符被匹配到直到遇到另一个分支。举例如下：
   `a.*?b` 只会匹配 "ab", "abb", "abbbb",...而不会匹配 "axyzb", "axyzbb", "axybz"等。
## 2.6 状态机
正则表达式引擎实际上是基于状态机实现的，通过自动机构建的模式串和输入字符串都转换为状态流图。不同状态对应不同的处理策略，根据输入字符的不同进入不同的转移路径，最终确定是否匹配成功。
# 3.Python中的正则表达式模块re
## 3.1 re模块的安装
使用pip命令即可安装：``` pip install regex ```
## 3.2 匹配字符串
首先导入re模块：
``` python
import re
```
### 3.2.1 search()方法
search()方法用于查找字符串的第一次出现位置。如果没找到就返回None。示例代码如下：
``` python
text = 'Hello World'
pattern = r'\d+' # 查找所有数字
match = re.search(pattern, text)
if match:
    print('Found:', match.group())
else:
    print('Not found')
```
输出结果：
```python
Found: Hello World
```
搜索模式：`\d+` 
- `\d`: 匹配任意数字
- `+`: 表示至少有一个数字 

### 3.2.2 match()方法
match()方法用于尝试从字符串的起始位置匹配整个字符串。如果不匹配就返回None。示例代码如下：
``` python
text = 'Hello World'
pattern = r'^H' # 从字符串开始匹配以H开头的字符串
match = re.match(pattern, text)
if match:
    print('Match:', match.group())
else:
    print('No Match')
```
输出结果：
```python
Match: H
```
搜索模式：`^H` 
- `^`: 表示字符串开头 
- `H`: 匹配字符H 

### 3.2.3 findall()方法
findall()方法用于查找字符串所有出现的地方，并返回一个列表。如果没找到就返回空列表。示例代码如下：
``` python
text = 'The quick brown fox jumps over the lazy dog'
pattern = r'\b\w{3}\b' # 查找所有三个连续的字母
matches = re.findall(pattern, text)
print('Matches:', matches)
```
输出结果：
```python
Matches: ['quick', 'brown', 'fox', 'jumps']
```
搜索模式：`\b\w{3}\b` 
- `\b`: 匹配单词边界
- `\w{3}`: 匹配三个字母的单词