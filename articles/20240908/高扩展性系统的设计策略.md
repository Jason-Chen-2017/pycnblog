                 

### 1. 负载均衡

**题目：** 负载均衡有哪些常见策略？各自适用于什么场景？

**答案：**

* **轮询（Round Robin）：** 适用于请求均匀分布的场景，将请求依次分配给服务器。
* **最小连接数（Least Connections）：** 适用于请求量不均匀的场景，将请求分配给连接数最少的服务器。
* **最少响应时间（Least Response Time）：** 适用于请求响应时间影响较大的场景，将请求分配给响应时间最短的服务器。
* **哈希（Hash）：** 适用于需要会话保持的场景，通过哈希函数将请求分配给特定服务器。

**举例：**

```go
// 轮询策略
srvs := []string{"server1", "server2", "server3"}
idx := 0
for {
    req := <-ch
    srv := srvs[idx]
    sendRequest(req, srv)
    idx = (idx + 1) % len(srvs)
}

// 最小连接数策略
srvs := []string{"server1", "server2", "server3"}
connCount := make([]int, len(srvs))
for {
    req := <-ch
    minConn := 0
    for i, srv := range srvs {
        if connCount[i] < connCount[minConn] {
            minConn = i
        }
    }
    srv := srvs[minConn]
    sendRequest(req, srv)
    connCount[minConn]++
}

// 最少响应时间策略
srvs := []string{"server1", "server2", "server3"}
responseTimes := make([]int, len(srvs))
for {
    req := <-ch
    minResp := 0
    for i, srv := range srvs {
        if responseTimes[i] < responseTimes[minResp] {
            minResp = i
        }
    }
    srv := srvs[minResp]
    sendRequest(req, srv)
    responseTimes[minResp] += time.Since(lastResp).Milliseconds()
}

// 哈希策略
srvs := []string{"server1", "server2", "server3"}
hashMod := len(srvs)
for {
    req := <-ch
    hashVal := hash(req) % hashMod
    srv := srvs[hashVal]
    sendRequest(req, srv)
}
```

**解析：** 负载均衡策略可根据实际需求选择合适的策略，以实现高效的请求分发。轮询适用于均匀分布的请求，最小连接数和最少响应时间适用于请求量不均匀的场景，哈希策略适用于需要会话保持的场景。

### 2. 服务拆分

**题目：** 服务拆分的目的是什么？如何进行服务拆分？

**答案：**

* **目的：** 服务拆分的主要目的是为了降低系统的复杂度，提高系统的可扩展性，便于维护和部署。
* **方法：** 
  1. 功能拆分：将具有相同功能的模块拆分为独立的服务。
  2. 数据拆分：将数据拆分为多个数据库，以降低单表的数据量，提高查询性能。
  3. 网络拆分：将服务部署在不同的物理服务器上，以提高系统的可用性和可扩展性。

**举例：**

```go
// 功能拆分示例
service1 := func() {
    // service1 的功能实现
}

service2 := func() {
    // service2 的功能实现
}

// 数据拆分示例
db1 := "database1"
db2 := "database2"

func queryData1() {
    // 使用 db1 查询数据
}

func queryData2() {
    // 使用 db2 查询数据
}

// 网络拆分示例
server1 := "server1.com"
server2 := "server2.com"

func serveRequest1() {
    // 使用 server1 处理请求
}

func serveRequest2() {
    // 使用 server2 处理请求
}
```

**解析：** 服务拆分可以通过功能拆分、数据拆分和

