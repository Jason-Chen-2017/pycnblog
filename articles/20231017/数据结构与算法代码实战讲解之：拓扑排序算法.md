
作者：禅与计算机程序设计艺术                    

# 1.背景介绍


## 1.1 拓扑排序算法简介
拓扑排序（Topological sorting）是一个比较经典的问题，它用于对有向无环图（DAG, Directed Acyclic Graphs）进行排序，按照图中各个顶点的出现顺序将它们排成线性序列，使每条边都指向其前驱结点。DAG 有两个重要特性：

1. 没有回路:即从源点到某一结点再到另一个源点的路径不存在。换句话说，它是一个无环图。
2. 每个顶点都存在于一个有限的入度值中，并且这个入度值不会超过该顶点的邻接结点个数。换句话说，它是一个有向无环图。

拓扑排序主要用于构建依赖关系的任务调度、建模流程控制等多种应用场景。举个例子，比如一个工程项目需要完成多个子任务才能最终完成，那么这个项目就具有环状的依赖关系；而如果要实现并行化处理，则每个子任务之间也存在依赖关系，这些依赖关系也可以用拓扑排序的方式进行排序。另外，在网络结构中，路由协议就利用了拓扑排序算法来计算最短路径。
## 1.2 为什么要学习拓扑排序算法？
虽然拓扑排序算法已经很久没有更新了，但仍然是许多领域的基础算法，而且它解决了很多实际问题，同时也是其他高级算法的基础。如果你想学习计算机图论、系统分析、网络编程、数据结构、算法、软件工程、数据库设计、人工智能等相关领域的知识，则必不可少地会接触到拓扑排序算法。如果你需要理解拓扑排序算法的工作原理，能够应用到实际问题中，那么就可以通过本文了解其工作原理及其适用范围。如果你想加强对数据结构和算法的理解，提升自己的编程水平，那么可以阅读本文并结合上机实践的方式来加深对拓扑排序算法的理解。
# 2.核心概念与联系
## 2.1 关键术语
- DAG(Directed Acyclic Graphs): 有向无环图。
- indegree(节点i的入度)：节点 i 的入度是指指向该节点的边数目。
- outdegree(节点i的出度)：节点 i 的出度是指该节点指向的边数目。
- 源点(source vertex): 是指所有入度均为零的顶点，即不依赖其它顶点的顶点。
- 拓扑排序(topological sort): 是一种排序算法，用来对有向无环图中的所有顶点进行排序，使得对于任意一条从顶点 A 到顶点 B 的路径，A 在前，B 在后。
## 2.2 工作原理
### 2.2.1 基本思想
拓扑排序算法的基本思想是，通过对图中的顶点进行排序，使得所有的顶点都出现在图中某个特定顶点之前。这一过程可分为以下几个步骤：

1. 从图中选择一个源点，设为 v_0。
2. 将 v_0 标记为已访问过。
3. 删除与 v_0 有相连边的所有顶点的入度减一。
4. 如果删除后的某个顶点的入度变为零且尚未访问过，则将它作为新的源点重复以上三个步骤。直到当前所有顶点都被标记为已访问过或者队列为空，排序结束。
5. 按序输出已访问过的所有顶点即可得到拓扑排序结果。

### 2.2.2 执行过程
下面用一个示例图来展示拓扑排序算法的执行过程：<|im_sep|>