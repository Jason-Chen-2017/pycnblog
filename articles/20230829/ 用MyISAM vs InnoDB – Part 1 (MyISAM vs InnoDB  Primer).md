
作者：禅与计算机程序设计艺术                    

# 1.简介
  

InnoDB 作为 MySQL 的默认存储引擎，主要用于处理事务性要求高的数据，它提供对数据库ACID（Atomicity、Consistency、Isolation、Durability）的支持，并且还提供了行级锁和外键约束功能等。相比之下，MyISAM 就显得比较简单，它是 MySQL 默认的静态表存储引擎。它们之间又有什么不同？为什么要选择其中一个或另一个？本文将详细阐述这些差异以及适合哪种场景使用。
# 2.MySQL 存储引擎
MySQL 有两种主要的存储引擎：MyISAM 和 InnoDB。它们的不同之处在于对数据库事务的支持、锁机制的差异以及数据保存和查询效率方面。下面我将依次介绍这两种引擎。
## MyISAM
MyISAM 是 MySQL 的默认静态表存储引擎。它是一个基于磁盘的索引结构，具有较快的读写速度。但是不支持事务安全和外键，也不支持行级锁定。所以，如果需要保证数据一致性，比如多个用户同时访问同一张表，那么只能使用 MyISAM。它的优点就是占用的内存少，对于小型数据库或中小型网站来说，可以获得较好的性能。其缺点就是安全性较低，因为 MyISAM 没有提供对存储数据的完整性和持久性担保。如果数据库发生损坏，可能导致整个数据库不可用。
## InnoDB
InnoDB 是 MySQL 默认的事务性存储引擎，也是最具备成熟性的存储引擎。它是在 MySQL 5.5.5 版本引入的，旨在解决 MyISAM 不支持事务的问题。InnoDB 支持事务，通过 ACID 来确保数据一致性。它还支持行级锁，并且还支持通过聚集索引和辅助索引来提升 SELECT 查询的速度。但是，它的资源消耗比 MyISAM 大，在一些资源密集型的场景下，可能会更好地发挥作用。它支持外键，通过 FOREIGN KEY 约束来实现。
# 3.InnoDB 和 MyISAM 对比
下面我们来比较一下这两种引擎之间的一些特性。
### 数据存储方式
MyISAM 只使用一个文件（extension 为.MYI），里面存放了表定义信息和数据。而 InnoDB 会使用三个文件：（.frm 文件存储表定义信息；.MYD 文件存储数据；.MYI 文件存储索引）。这样做可以让每个对象被单独地缓存到内存或者磁盘，从而优化了内存使用率并减少了磁盘 I/O 。
### 是否支持事务
MyISAM 不支持事务，而 InnoDB 支持。通过事物可以一次性提交所有的更改，而且可以进行回滚，如果某些操作失败，则可以回滚至操作之前的状态。InnoDB 提供了许多隔离级别，通过设置隔离级别来确保数据的一致性。
### 是否支持行级锁
MyISAM 不支持行级锁，只能对整张表加锁，因此并发插入时会出现环 wait ，性能差。InnoDB 支持行级锁，每次只锁定被更新的行，从而避免了大量的开销。
### 缓存
MyISAM 通过读写分离和预读的方式来降低磁盘 IO。InnoDB 使用聚集索引，它将索引和数据保存在一起。同时 InnoDB 还有其它的特性，比如支持 redo log ，可以用于崩溃恢复和复制等。
# 4.适用场景
通常情况下，对于事务要求较高的数据，比如企业级应用中的订单、库存管理、支付系统等，应该使用 InnoDB 作为存储引擎。而对于那些读多写少且不需要事务支持的数据，比如浏览统计、日志分析等，就可以使用 MyISAM 。当然，对于非常小的数据库，或者作为临时的存储引擎来存放一两千条记录的场景，也可以使用内存型存储引擎 Memory 或 Berkeley DB。
# 5.总结
总的来说，MyISAM 比较适合于对数据库空间要求非常苛刻，或者表修改频繁，但查询操作不多的情况。而 InnoDB 更适合于对事务要求较高，并发量大，或表长度巨大的情况。在具体选择的时候，我们需要根据业务特点、服务器硬件配置、维护成本等因素综合考虑。