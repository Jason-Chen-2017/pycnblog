
作者：禅与计算机程序设计艺术                    

# 1.简介
  

工厂方法（Factory Method）模式是面向对象的设计模式之一，它定义一个用于创建对象的接口，但由子类决定要实例化哪个类。工厂方法把实例化的责任交给子类。用简单的话来说，就是把复杂的对象的创建过程分离开，将具体类的创建工作推迟到子类中进行。这种分工使得不同子类都可以创建同一种类型的对象，从而实现了高度可扩展性和灵活性。

在我们平时的编程开发过程中，会遇到这样的情况，当我们需要创建一个对象的时候，一般会根据一些参数、条件或者输入，选择合适的对象来创建。举个例子，假设我们要创建一个电脑，可以通过创建不同的配置的计算机，比如CPU，内存，硬盘等。那么，如何根据创建电脑的这些条件选择合适的类呢？这个时候就需要用到工厂方法模式。

# 2.工厂方法模式的结构
工厂方法模式包含如下角色：

1.抽象工厂(Abstract Factory)角色：它声明了一个创建产品的接口，调用者通过它获取产品。

2.具体工厂(Concrete Factory)角色：它实现抽象工厂接口，完成具体产品的创建。

3.抽象产品(Product)角色：它是具体工厂生产的对象，是所有产品对象的父类，负责描述所有产品共有的特征和行为。

4.具体产品(Concrete Product)角色：它是抽象产品的子类，每个具体产品继承自这个类。

其基本结构图如下：


# 3.工厂方法模式的优点
1.隐藏对象的创建细节，客户端仅仅知道调用相应的方法即可，无需了解所选对象具体的创建过程。

2.将对象的创建延迟到子类去做，降低耦合度，提高系统的灵活性。

3.便于扩展，如果增加新的对象类型只需要增加一个具体产品类就可以了，不需要修改原有系统的代码。

# 4.工厂方法模式的适应场景
1.当一个系统应该提供一个产品类的库，而该类库内含多个产品时，如框架内的数据库访问层，则工厂方法模式非常有用。如JDBC API中提供了DriverManager工厂类负责产生Connection对象，而这个类实现了创建不同数据库连接的功能。

2.当一个类不想对客户暴露创建逻辑，则可以使用工厂方法模式。如Hibernate中就使用了内部类的FactoryHelper来实现对象生成的功能，并把对象的生成逻辑封装起来，隐藏了对象生成的细节，防止客户直接调用构造器。

3.当一个类的对象创建过程比较复杂，而且对象的种类繁多时，采用工厂方法模式可以简化对象的创建过程。如文豆制作过程需要许多步骤，每一步都可能会引入新的材料，采用工厂方法模式可以避免逐步添加新材料导致的复杂性扩增。

# 5.工厂方法模式的注意事项
1.工厂方法模式的一个缺陷就是 products 对象创建出来后，不能再被修改了。如果客户需要改变对象的属性值，只能重新创建对象。

2.产品对象的数量过多时，也会影响系统性能，因为系统需要频繁地创建、销毁产品对象，造成系统的压力过大。

3.如果一个系统中存在两个以上独立的工厂方法，这就意味着系统中存在两个以上独立的产品等级结构。这违反了依赖倒置原则，即主动权由最上面的模块来指定，而不是最底层的模块来指定。