
作者：禅与计算机程序设计艺术                    

# 1.背景介绍


## 一、定义
范式（normal form）是对关系型数据库的建模方法中，在满足要求的情况下将关系表划分成最小的单位——属性或列，并确保每一个属性都是不可再分割的原子数据项，且每个表只存储关于某个主题的一组相关信息。规范化就是通过设计制度，确保数据的一致性，减少数据冗余，提高查询效率和完整性等目的，将关系表的结构变得更加简单、易于理解、易于管理和优化。其目标是为了降低数据 redundancy，提高数据 integrity，简化数据处理，并使数据更容易被更新、插入和删除。

范式的作用主要包括以下几点：

1. 数据一致性：范式的主要目的是确保数据的一致性。数据一致性意味着同一时间点的数据都具有相同的状态，因此关系型数据库的设计者应当在设计数据库时就要尽可能避免数据不一致的情况。若某些数据的状态发生变化，则会影响到其他数据的正确性，因此需要建立相应的约束来保证数据的一致性。

2. 数据冗余：范式的另一重要功能是降低数据冗余。数据冗断往往意味着存在多份相同的数据，而范式设计可以消除重复数据，节省存储空间，改善查询性能。

3. 查询效率：范式的第三个重要功能是提升查询效率。范式设计可以根据查询模式的不同，选择最合适的索引方案来提高查询效率。例如，对于需要快速检索某些特定条件的数据，可以建立聚集索引；对于需要排序或分析某些字段的数据，可以建立联合索引；对于频繁进行关联操作的数据，可以建立复合索引。

4. 更新效率：范式设计也可以提升更新效率。更新操作一般都是涉及多个表的数据，如果没有设计合理的范式结构，那么维护索引就会非常复杂，导致更新效率下降。

5. 数据管理便利性：范式也能够改善数据管理的便利性。规范化的关系型数据库通常具有较好的用户体验，因为它能提供直观的视图，使人们能够快速地查询、插入、修改和删除数据。

## 二、数据库范式
范式是一个术语，用来描述关系型数据库的设计原则。按照范式的不同级别，通常有三种设计范式:第一范式（1NF），第二范式（2NF），第三范式（3NF）。

### 1NF（第一范式）
第一范式（1NF）是指数据库表中的所有字段值都必须是单一的基本数据类型（例如字符型，整型，浮点型等）。也就是说，数据库表中的字段不能够再拆分成其他字段。

举例：
比如有一个人员表，表中包含了姓名、年龄、地址、手机号码等字段。但是其中手机号码这一字段实际上由区号、城市代码、运营商代码、电话号码四个字段组合而成。所以这个表的第一范式就不能满足。

### 2NF（第二范式）
第二范式（2NF）是指在一个数据库表中，不应该存在依赖于主键（Primary Key）之外的非键字段之间的函数依赖关系。换言之，第二范式要求一个关系中不允许存在非主关键字（Non-Key）字段直接依赖于主关键字字段。

第二范式可以看做是1NF的增强版，即消除了非主关键字直接依赖于主键的依赖关系。如上所述，电话号码这一字段实际上由区号、城市代码、运营商代码、电话号码四个字段组合而成。这里的区号、城市代码、运营商代码虽然也是电话号码的组成部分，但它们不是电话号码本身。在将其作为主键或外键放入另一张新表之后，这张新表就可以支持这个关系，而无需在原来的关系表中再出现这些字段。

### 3NF（第三范式）
3NF（Third Normal Form）是指满足第三范式的关系模型中，不应该存在传递依赖。所谓传递依赖，是指两个或多个字段之间存在着非直接联系，而是存在着一系列的中间关系。第三范式要求一个关系中不得存在如下形式的循环依赖：A → B → C → A 。第三范式要求消除多重依赖，也就是某个字段的值同时取决于该字段所依赖的所有其他字段。

所谓多重依赖，就是存在着这样一种情况：比如有一个学生表，里面包含了学生编号、班级编号、年龄等字段。年龄字段值取决于学生编号、班级编号两个字段。但年龄字段又和班级编号有关，因此存在着多重依赖。

因此，在设计关系模型的时候，需要注意避免创建过度依赖的问题。3NF 是关系模型的设计目标，很多基于 SQL 的关系型数据库已经采用了 3NF 规范。