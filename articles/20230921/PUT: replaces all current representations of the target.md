
作者：禅与计算机程序设计艺术                    

# 1.简介
  

HTTP协议是用于传输超文本数据的请求/响应模型，其中包括GET、POST、PUT、DELETE等方法。对于Web开发者来说，PUT方法是最常用的方法之一，因为它可以更新或创建资源。那么，PUT到底是什么意思呢？它的作用是什么呢？以及PUT方法的特点又在哪些方面让人觉得很神奇？那么，相比于其他几个HTTP方法，PUT方法又有哪些不同之处？通过这一系列的问题，我将带领大家一起探索这个神秘的HTTP方法，并体会其中的奥妙。

## HTTP协议
HTTP（HyperText Transfer Protocol）即超文本传输协议，是互联网上应用层协议的一部分。它负责从万维网服务器接收信息并传送至用户的浏览器显示给用户，使得互联网成为一个全球性的信息传递网络。HTTP是一个基于TCP/IP通信协议标准的请求/响应模型。通信时，客户端发送一个请求报文至服务器，服务器对请求做出应答，返回一个响应报文给客户端。HTTP协议包含以下主要组成部分：

1. 请求行：包含三个部分：方法字段、URI字段、HTTP版本号。如：GET /index.html HTTP/1.1
2. 消息头部：描述了要传输的实体内容及一些元数据，例如Content-Type、Content-Length等。消息头部也可用于诊断或修改客户端和服务端之间的交互过程。
3. 消息主体：是承载除请求行、消息头部外的实体内容。一般情况下，消息主体为文件、表单、JSON等格式的数据。

除了常用请求/响应方法外，HTTP协议还提供了以下几种额外的方法：

- HEAD：HEAD方法和GET类似，但是服务器只返回响应的首部，不返回实体的主体部分，用于获取报头。比如说可以使用HEAD方法来检查资源是否存在，或者检查最后修改日期。
- POST：POST方法用于向指定资源提交数据，就像在浏览器中输入地址、选择文件后点击“提交”按钮一样，向服务器上传数据。
- OPTIONS：OPTIONS方法用来查询针对特定URL有效的请求方法。比如，如果需要检测某个URL是否允许POST请求，就可以向这个URL发送OPTIONS请求，然后查看响应头中的Allow头是否包含POST。
- TRACE：TRACE方法用来追踪服务器收到的请求，主要用于测试或排错。
- CONNECT：CONNECT方法用来建立代理服务器的连接隧道，实现用隧道协议进行TCP通信。

## PUT方法
### PUT方法概述
PUT方法用于向指定资源位置上传其最新内容，并覆盖原有的内容，或者创建新的资源。PUT请求通过请求行中的 URI 指定资源的位置，并把请求消息的主体包含的数据上传至该位置。 如果指定资源不存在，则新建资源；如果已存在，则更新资源。PUT方法通常用于更新或新增资源，如图片、视频、文档等。

PUT 方法也可以用于实现文件上传，常见的情况是采用HTML表单上传文件，后台处理完成后，会返回一个 HTTP 状态码为 200 的响应，表示成功。

PUT 方法的请求消息如下：

```http
PUT http://example.com/resources/name HTTP/1.1
Host: example.com
Content-Type: text/plain; charset=UTF-8
Content-Length: length

message body...
```

### PUT方法特点
PUT 方法具有如下特性：

1. 可替代性：当资源已经存在时，替换掉整个资源的内容；如果资源不存在，则创建一个新资源。这是非常危险的行为，一定要确保安全性。

2. 幂等性：PUT 请求自身就是幂等的，无论多少次重试都不会影响系统的状态，所以同样的请求，得到的结果都是相同的。

3. 支持条件请求：当客户端提供条件请求时（即 If-Match、If-Modified-Since 或 If-Unmodified-Since），服务器会验证该条件，只有满足这些条件时才执行请求，否则拒绝该请求。条件请求可以帮助服务器避免不必要的资源更新。

4. 多部分请求：支持分块编码，允许客户端分割请求消息体并按需发送。

5. 安全性：由于 PUT 请求可完全替换原有的内容，因此不适合敏感信息的传输。如果要求密码或私密数据不能明文传输，则建议使用 SSL/TLS 来加密通讯。

## PUT方法工作原理
PUT 请求由客户端向服务器发送，服务器根据请求的 URI 查找对应的资源，如果资源不存在，则创建一个新资源；如果存在，则将请求消息的主体内容覆盖原有的内容。

## PUT方法与其他HTTP方法的比较
PUT 方法是 HTTP 中唯一一个既可创建资源又可更新资源的请求方法。其他五个 HTTP 请求方法只能用于读取或修改资源的特定属性，不能创建新资源。

下表总结了 PUT 和其他 HTTP 方法之间的区别：

|    方法     |      描述      |                            请求消息                             |          返回消息           |                       URI                        |                  说明                   |
| :---------: | :------------: | :----------------------------------------------------------: | :------------------------: | :---------------------------------------------: | :------------------------------------: |
|   GET       | 获取资源信息   |         只包含 GET 方法的 URL，以及可能有的请求参数          |         返回资源信息        |                文件名或路径                 |            可以获取任何资源             |
|   POST      | 提交数据或创建资源 | 包含 POST 方法的 URL，以及可能有的请求参数和实体数据（一般都是表单数据） | 创建新资源并返回其信息，或者执行特定操作 | 用于创建新资源的路径（如果 URI 不存在的话）或者服务端指定的路径 | 使用 POST 方式提交数据，常用于表单数据或 JSON 数据 |
|   DELETE    | 删除资源       |                      包含 DELETE 方法的 URL                       |          操作结果           |                    文件名或路径                    |        会删除服务器上的资源，无法恢复        |
|   PUT       | 更新或创建资源 |                     包含 PUT 方法的 URL                      |      若资源不存在则创建      | 用于更新或创建资源的路径（如果 URI 存在的话）或者服务端指定的路径 | 可以创建或更新任意类型资源（一般是完整的资源内容） |
|   HEAD      | 获取资源的首部 |               只包含 HEAD 方法的 URL，不包含实体数据               |          返回首部信息        |                文件名或路径                 |             获取资源信息，但不返回实体              |
|   OPTIONS   | 查询请求方法的支持 |           包含 OPTIONS 方法的 URL，不包含实体数据            |  返回服务器支持的请求方法列表 |                文件名或路径                 |             检测服务器支持的请求方法              |
|   TRACE     | 回显服务器收到的请求 |       只包含 TRACE 方法的 URL，不包含实体数据，用于追踪请求        | 返回服务器收到的原始请求消息 |                文件名或路径                 |                    测试用                    |