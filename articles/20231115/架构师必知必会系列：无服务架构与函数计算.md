                 

# 1.背景介绍



## 为什么要用无服务架构？

随着互联网业务的发展，数据量日益膨胀、计算资源不断增加，单体应用逐渐变得难以应付日益复杂的业务场景。越来越多的公司开始采用微服务架构来解决这一问题。无服务架构（Serverless Architecture）是一个新的架构模式，它通过云厂商提供的平台服务，使开发者不需要管理服务器或运行应用程序，而只需关注业务逻辑的实现即可。这种架构模式可以让开发者将精力更多地放在业务开发上，减少开发、测试、部署、运维等环节中的重复性工作，从而提升开发效率和研发质量。

2019年AWS推出了Lambda功能，无服务架构正成为一种主流架构。

## 什么是无服务架构？

无服务架构是指由第三方平台提供基础设施支持，开发者只需要编写业务逻辑代码，即可快速构建并部署完整的应用系统，同时无需担心底层基础设施，其架构图如下：




如图所示，无服务架构由一个事件驱动型平台（Event Triggered Platform）、可编程的函数（Functions）、API网关（API Gateway）以及各种基础设施组成。

其中，事件驱动型平台通过订阅外部事件（比如用户点击了一个按钮），或者周期性触发某个任务来执行函数。函数在平台上运行，可以访问各种后端服务，对传入的数据进行处理，然后返回相应结果。API网关则作为函数之间的接口，接收请求并转发到对应的函数。而基础设施包括消息队列、数据库、存储、日志服务等。

无服务架构优点主要有以下几点：

* **按需计费** - 在无服务架构中，服务器只负责响应事件，无须长期运行，因此，无须为服务器付费，也就不存在“闲置”的服务器造成的运行成本。相反，平台按实际使用的计算量收取费用，确保最佳的资源利用率。
* **弹性伸缩** - 通过第三方云服务提供商的平台服务，可以轻松实现动态扩容和缩容，满足不断变化的业务需求。此外，还可以通过事件驱动和流水线机制实现自动扩展，消除业务的手工运维瓶颈。
* **降低成本** - 在无服务架构下，只有被调用的函数才会产生资源开销，开发者不需要管理底层基础设施，因此降低了整体基础设施投入，能更加专注于业务开发。另外，由于服务器资源的按需分配，开发者仅付出使用时长的费用，降低了云计算的总体成本。

然而，无服务架构也存在一些缺点：

* **复杂性高** - 从架构上来说，无服务架构相比传统的面向服务架构（SOA）有较大的复杂性。需要了解云服务提供商的平台服务、消息代理、编排引擎等技术组件，才能实现完整的业务功能。
* **本地开发** - 虽然无服务架构具有无需管理服务器的特性，但仍然需要本地环境进行调试和单元测试。在本地开发模式下，仍然无法享受到云服务提供商的平台服务带来的便利。
* **跨域调用** - 函数间的调用存在跨域限制，开发者需要考虑安全因素，并且不易于维护。

总结来说，无服务架构与微服务架构一样，都是新兴的架构模式，受到云计算的发展及相关技术革命的影响，并且还有待商业落地。它的最大优点是按需计费、弹性伸缩、降低成本等，但是也有明显的缺陷。不过，无论如何，无服务架构一定会被更多的人所采用。