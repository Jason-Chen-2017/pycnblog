                 

# 1.背景介绍


什么是文件操作？文件操作包括创建、读取、更新、删除文件或文件夹。Python提供了许多内置模块来完成文件的操作，例如os、shutil、glob等。本文将通过文件操作的一些最基础和常用的功能来教你如何在Python中进行文件操作。本文适合初级到中级Python开发者阅读。

# 2.核心概念与联系
## 文件操作的目的
文件操作主要目的是对文件进行读写操作，让计算机能以可视化的方式处理数据。因此，文件操作非常重要，其中的相关知识也会逐步成为日常工作的一部分。

## 操作类型
一般来说，文件操作分为创建、读取、写入、更新、删除五种。每种操作都可以分成输入输出（Input/Output）操作和内存操作两种类型。

- 创建：创建文件是一个较复杂的过程，涉及到多个操作系统调用，文件系统的管理，权限控制等。一般情况下，创建一个空文件需要IO操作，向已存在的文件追加内容则不需要。

- 读取：读取文件可以通过不同方式实现，包括直接读取文件内容到内存中或者按块读取，并且可以使用不同的方式组织文件内容，如按行读取，按字节读取等。

- 写入：写入文件也可以分为追加模式和覆盖模式。对于一个新创建的文件，写入操作就是直接向文件写入内容；而对于一个已经存在的文件，追加模式和覆盖模式区别在于：如果不确定该文件的位置，用追加模式往后添加即可；而如果知道该文件的位置，则可以用覆盖模式直接修改文件的内容。

- 更新：更新文件指的是更新文件的时间戳、权限、所有者、大小等属性。

- 删除：删除文件时，只是标记文件已经被删除，但实际上文件并不会被真正删除，除非手动执行垃圾回收机制。

## Python支持的文件操作
Python通过内置的os模块和第三方模块提供对文件操作的支持。其中，os模块提供了与操作系统交互的函数接口，包括文件和目录的创建、删除、重命名等，可以跨平台使用。shutil模块提供了高级的文件操作函数，例如拷贝、移动、删除等，它可以更加方便地处理路径和目录。glob模块提供了文件匹配的功能，可以查找符合特定规则的文件名。

## 打开文件
打开文件通常有两种形式，文本文件（Text File）和二进制文件（Binary File）。文本文件中存储的是普通的字符串数据，没有任何格式限制；二进制文件中存储的都是字节数据，经过特定的编码方式才能够显示。

```python
f = open('test.txt', 'r') # 打开文本文件
f = open('test.bin', 'rb') # 打开二进制文件
```

open()函数用于打开文件，第一个参数指定要打开的文件名，第二个参数指定打开模式，'r'表示以只读模式打开，'w'表示以写入模式打开，'a'表示以追加模式打开，'rb'表示以二进制只读模式打开，'wb'表示以二进制写入模式打开。如果文件不存在，那么open()函数会报错。

注意：打开文件时，需要指定正确的打开模式，否则可能会导致错误。比如，尝试从一个只写文件中读取内容时，就会报错。

打开文件后，就可以根据文件的打开模式对其进行相应的操作。

## 关闭文件
当打开的文件处理完毕后，应当关闭文件释放系统资源。调用文件的close()方法即可关闭文件。

```python
f.close()
```

## 文件对象属性
除了上述提到的open()和close()方法外，文件对象还具有其他的方法和属性。

### name
文件对象的name属性返回当前打开文件的名称，即文件路径。

```python
print(f.name)
```

### mode
文件对象的mode属性返回当前文件的打开模式。

```python
print(f.mode)
```

### encoding
文件对象的encoding属性获取或设置当前文件的编码，默认值为None，表示文件没有编码信息。对文本文件有效。

```python
print(f.encoding)
f.encoding = 'utf-8'
```

### errors
文件对象的errors属性获取或设置当前文件的编码错误处理方式，默认值为None，表示采用默认方式处理编码错误。对文本文件有效。

```python
print(f.errors)
f.errors = 'ignore'
```

### newlines
文件对象的newlines属性获取或设置当前文件的换行符号，对文本文件有效。

```python
print(f.newlines)
f.newlines = '\n\r'
```

### closed
文件对象的closed属性判断文件是否已关闭。

```python
if f.closed:
    print("文件已关闭")
else:
    print("文件未关闭")
```

### flush
文件对象的flush方法刷新缓冲区，将缓冲区内容立刻写入磁盘。对文本文件无效。

```python
f.flush()
```

### fileno
文件对象的fileno方法获得当前文件的文件描述符。

```python
fd = f.fileno()
```