
作者：禅与计算机程序设计艺术                    

# 1.简介
  

在数据库设计中，经常会遇到指定某一列的数据类型为特定数据类型（比如INT、VARCHAR等），或者限制该列的最大值或最小值范围。但是有的情况下，需要进一步限定该字段的字符长度，比如希望该字段只能存储手机号码或者固定长度的身份证号码等。MySQL提供了一种方法`CHAR`，即指定数据类型为CHAR，可以设置其长度。本文将详细介绍MySQL中的`CHAR`数据类型及相关用法。
## 什么是`CHAR`?
`CHAR`是一个字符串数据类型，用来保存固定长度的字符串。在MySQL中，`CHAR`数据类型表示定长字符串，它的声明语法如下：
```mysql
CHAR(n)
```
其中，`n`表示`CHAR`类型所能保存的字符串长度，单位是字节。对于不同的字符集，`n`的取值也可能不同。比如，对于UTF8字符集来说，每个汉字占3个字节，所以`n`的值应当设置为3的倍数才有效。因此，`CHAR`数据类型的主要优点就是节省存储空间，并且可以在索引列上进行范围查找。
## 为什么要使用`CHAR`?
虽然`CHAR`数据类型能够节省存储空间，但还是存在一些场景下不适合使用`CHAR`。比如，当需要存放手机号码时，很可能会出现中间空格，而这种空格在MySQL中属于特殊字符，因此这些空格无法被正确地计入字符串的长度之中。此外，还有一些其它字符集的编码方式可能比单字节UTF8更复杂，导致实际占用的存储空间较多。在这些情况下，建议使用其他数据类型，比如VARCHAR、TEXT等，以便能够存放完整的字符串。但是，如果确实有特殊的业务需求，使用`CHAR`也是一个比较好的选择。
## 使用注意事项
### 不支持排序
`CHAR`数据类型在很多方面都和其他数据类型不同。比如，它不支持排序功能，因此不能用于`ORDER BY`或`GROUP BY`语句中；而且，由于其固定长度，因此也不能够存放超出其长度范围的值。因此，在涉及字符串值的计算、排序或分组操作时，最好不要使用`CHAR`。
### 查询性能受影响
虽然`CHAR`数据类型具有固定长度，但它也不是无损数据类型。如果插入或更新一个`CHAR`列，如果超过了其长度范围，则只保留前面的n个字符，后面的部分会被自动截断掉。此外，MySQL中的查询优化器会根据查询计划对查询结果集进行优化，当查询条件包含`CHAR`类型时，可能会发生一些额外的消耗。因此，在确定是否应该使用`CHAR`时，还需结合实际情况做评估。
## 总结












9月2日更新：

欢迎关注我的微信公众号“**架构师历程**”，参与我的分享和探讨！