
作者：禅与计算机程序设计艺术                    

# 1.简介
  

概率分布函数(Probability Distribution Function, PDF)是统计学中用来描述随机变量X的取值随随机变量Y的条件发生的可能性函数。它是一种映射关系，将每一个样本点映射到[0,1]之间，其值代表了该样本点在概率空间中的位置。
在实际应用中，由于现实世界的问题复杂性、高维空间的复杂性以及数据量的限制等原因，难以对某个样本或变量的所有可能取值进行计算，因此只能根据一定的数据估计或者假设，利用PDF作为概率模型对整个分布进行建模。从而使得后续的数据分析、预测等任务更加简单可行。概率分布函数的重要性不言自明。下面从几个方面展开讨论概率分布函数的一些性质。
## 1.概率密度函数（Probability Density Function）
在概率论中，概率密度函数（Probability Density Function，简称PDF），又称概率曲线或分布函数，是一个描述随机变量 X 的连续型随机变量在某一指定下限µ上的值的函数，定义如下： 

$$
f_X (x)=\frac{1}{\sigma \sqrt{2\pi}}\exp (-\frac{(x-\mu)^2}{2\sigma^2}) \\
$$

其中 $\sigma$ 为标准差，$\mu$ 为均值。该函数是一个非负单调递增函数，而且取值范围为 $(-\infty,\infty)$。当 $x=\mu$ 时，函数取值为 $1/\sigma \sqrt{2\pi}$；当 $x$ 远离 $\mu$ 时，函数趋近于零。 

如果随机变量 $X$ 服从正态分布，则它的概率密度函数记作： 

$$
f_X(x)=\frac{1}{\sqrt{2\pi}\sigma} e^{(-\frac{(x-{\mu})^2}{2\sigma^2})} \\
$$

这里，$X$ 是一组服从正态分布的随机变量，$\sigma$ 和 $\mu$ 分别表示正态分布的标准差和均值。

由概率密度函数的定义可知，对于一个连续型随机变量，其概率密度函数是唯一确定的，且每个点处的函数值都是非负的。概率密度函数给出了该变量的分布状况。

通常情况下，概率密度函数可以用柱状图或直方图近似地表示出来。所谓柱状图就是沿着坐标轴纵轴为概率密度函数取值的高度的条形图，横轴表示随机变量的取值；所谓直方图就是在概率密度函数纵轴上将取值区间分成若干个间隔，每个间隔宽度相同，高度为该区间内概率密度函数取值的面积，横轴表示随机变量的取值上下限。

## 2.期望和方差
### 2.1 期望（Expectation）
设 $Z=(z_1, z_2, \cdots, z_n)$ 为一个联合分布随机变量，即 $Z=Z(X, Y)$，$Z$ 的概率密度函数记作 $p_{Z}(z)$。定义其期望（Expectation）为： 

$$
E(Z)=\int_{\mathbb R^d} z p_{Z}(z)\mathrm dz
$$

其中，$\mathbb R^d$ 表示 $d$ 个变量构成的向量空间，$E(Z)$ 表示 $Z$ 在 $\mathbb R^d$ 上的期望。

当 $Z$ 独立同分布时，即 $Z=Z(X, Y), X, Y$ 相互独立，$p_{Z}(z)=p_X(x)p_Y(y)$，$p_X(x)$ 和 $p_Y(y)$ 分别表示 $X$ 和 $Y$ 的概率密度函数，那么：

$$
E(Z)=\int_{-\infty}^{\infty}\int_{-\infty}^{\infty} z p_{Z}(z)\mathrm dz\, dy\\
=\int_{-\infty}^{\infty} \left(\int_{-\infty}^{\infty} z p_X(x) \mathrm dx\right) p_Y(y) \mathrm dy \\
=\int_{-\infty}^{\infty}\left[\frac{1}{\sqrt{2\pi}\sigma_1} e^{(-\frac{(x-{\mu_1})^2}{2\sigma_1^2})}\right]\left[\frac{1}{\sqrt{2\pi}\sigma_2} e^{(-\frac{(y-{\mu_2})^2}{2\sigma_2^2})}\right]\mathrm dydx \\
=\frac{1}{\sqrt{2\pi}}e^{\frac{({\mu_1}-{\mu_2})^2}{2\left(\sigma_1^2+\sigma_2^2\right)}}
$$

其中，$\sigma_1$ 和 $\sigma_2$ 分别表示 $X$ 和 $Y$ 的标准差，${\mu_1}$ 和 ${\mu_2}$ 分别表示 $X$ 和 $Y$ 的均值。此时，$Z$ 与 $X$ 或 $Y$ 不相关，$E(Z)=E(X)+E(Y)$。

当 $Z$ 依赖于 $X$, $Y$ 时，即 $Z=a+bX+cY$ ($a, b, c$ 为常数)，$Z$ 对 $X$ 和 $Y$ 独立，$E(Z)$ 可以分解为： 

$$
E(Z)=E(a+bX+cY)\\
=\int_{\mathbb R^d} a + b x_1 + c x_2 p_{Z}(x_1, x_2)\mathrm dx_1 \mathrm dx_2
$$

其中，$x_1$ 和 $x_2$ 分别表示关于 $X$ 和 $Y$ 的随机变量，其概率密度函数分别是 $p_{Z}(x_1, x_2)=p_X(x_1)p_Y(x_2)$。

### 2.2 方差（Variance）
设 $Z=(z_1, z_2, \cdots, z_n)$ 为一个联合分布随机变量，其概率密度函数为 $p_{Z}(z)$。定义 $Z$ 的方差（Variance）为： 

$$
Var(Z)=E[(Z-E(Z))^2]=\int_{\mathbb R^d} (z-E(Z))^2 p_{Z}(z)\mathrm dz
$$

当 $Z$ 独立同分布时，即 $Z=Z(X, Y), X, Y$ 相互独立，$p_{Z}(z)=p_X(x)p_Y(y)$，$p_X(x)$ 和 $p_Y(y)$ 分别表示 $X$ 和 $Y$ 的概率密度函数，那么： 

$$
Var(Z)=E((Z-E(Z))^2)\\
=\int_{-\infty}^{\infty}\int_{-\infty}^{\infty} [(z-E(Z))(z-E(Z))] p_{Z}(z) \mathrm dz\,dy \\
=\int_{-\infty}^{\infty}\int_{-\infty}^{\infty} [z^2 - 2zeE(Z) + E(Z)^2 + ze^T(E(Z)-z)] p_{Z}(z) \mathrm dz\,dy \\
=\int_{-\infty}^{\infty}\int_{-\infty}^{\infty} z^2 p_{Z}(z) \mathrm dz\,dy - 2\int_{-\infty}^{\infty}\int_{-\infty}^{\infty} ze p_{Z}(z) \mathrm dz\,dy + E(Z)^2 \\
=E(Z^2) - E(Z)^2 = Var(X) + Var(Y)
$$

其中，$E(Z^2)$ 表示 $Z$ 的二阶矩（Quadratic Moment），也即 $E(Z^2)=E(Z)^2+Var(Z)$。此时，$Z$ 与 $X$ 或 $Y$ 不相关，$Var(Z)=Var(X)+Var(Y)$。

当 $Z$ 依赖于 $X$, $Y$ 时，即 $Z=a+bX+cY$ ($a, b, c$ 为常数)，$Z$ 对 $X$ 和 $Y$ 独立，$Var(Z)$ 可以分解为： 

$$
Var(Z)=E((Z-E(Z))^2)\\
=\int_{\mathbb R^d} [a^2+(b+2cX)(X-E(X))+c^2Y^2+(2bc+c^2+2acY+b^2X)(Y-E(Y))] p_{Z}(x_1, x_2)\mathrm dx_1 \mathrm dx_2 \\
=\int_{\mathbb R^d} [a^2+(b+2cX)[X_1]+c^2Y^2+(2bc+c^2+2acY+b^2X)[Y_2]] p_{Z}(x_1, x_2)\mathrm dx_1 \mathrm dx_2 \\
=E([a^2]+[(b+2cX)E(X)+(2bc+c^2+2acY+b^2XE(Y))] + [c^2]+[(2bc+c^2+2acY+b^2XE(Y))E(Y)]) \\
=a^2E(Z)+b^2Var(X) + c^2Var(Y) + bcCov(X,Y)
$$

其中，$Var(X)$ 和 $Var(Y)$ 分别表示 $X$ 和 $Y$ 的方差，$Cov(X,Y)$ 表示 $X$ 和 $Y$ 的协方差，$E(Z)$ 和 $E(Z^2)$ 分别表示 $Z$ 的期望和二阶矩。此时，$Z$ 与 $X$ 或 $Y$ 有关，$Var(Z)=Var(X)+Var(Y)+2Cov(X,Y)$。