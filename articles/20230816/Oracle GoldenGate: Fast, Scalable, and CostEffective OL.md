
作者：禅与计算机程序设计艺术                    

# 1.简介
  

## 1.什么是Oracle GoldenGate？
Oracle GoldenGate是一种数据库实时数据整合工具，它可以实现跨多个异构源头的事务数据的实时、高速，及可靠地传输到目标端，以实现一致的数据视图。GoldenGate产品通过在源和目标数据库之间架设高速、可靠的中介服务，提供了一个集成解决方案。

## 2.Oracle GoldenGate的功能特点
1. **异构数据库互联互通**

   GoldenGate允许将多种不同的数据库系统作为数据源进行接入，支持数据库间的实时数据同步、互相复制数据、和一致性检查等功能。

2. **快速高效的数据传输**

   GoldenGate采用分布式的结构，即在源数据库、目标数据库和中介服务器之间均设置了专门的工作进程，通过异步的方式完成数据迁移，保证数据迁移的实时性。

3. **动态部署和动态配置**

   GoldenGate是开源软件，可以灵活部署和运行，支持动态修改配置信息。

4. **自动容错处理**

   GoldenGate提供基于策略的同步失败处理机制，当数据同步失败时可以自动调整策略参数，确保数据准确性和完整性。

5. **数据抽取和加载**

   GoldenGate具有丰富的数据抽取和转换功能，可以根据业务需求对数据进行清洗、抽取、转换后，在目标数据库中进行存储和加载。

6. **数据安全性**

   GoldenGate支持传输过程中的SSL加密传输，并支持用户权限管理，确保传输过程的机密性和完整性。

7. **数据审核和控制**

   GoldenGate提供了审计、监控和控制功能，可帮助管理员对数据传输过程进行全面、细致的管理。

8. **资源利用率优化**

   GoldenGate采用了基于消息队列的流水线结构，实现高效的资源利用率和负载均衡，提高系统性能和稳定性。

# 2.基本概念术语说明
## 1.主备模式（Primary/Standby）
主备模式是指在任何时间只存在一个活动的服务器，称为主节点（Primary），而另一个服务器则处于待命状态，称为备用节点（Standby）。主节点接收客户端请求，向其他服务器同步数据，同时提供服务；备份节点等待主节点故障或需要立刻切换到活动状态。

## 2.日志传送（Logging Replication）
日志传送是指将数据库的所有数据变更记录到一个称为重做日志（redo log）的逻辑文件中，然后将这些日志在主从服务器之间进行复制和传播，使各个服务器的数据保持一致。一般情况下，数据库的主节点生成redo log，并将其发送给备库进行更新；备库接收redo log后，将其写入本地磁盘；当主库重新启动时，备库把本地的redo log中的数据刷新到内存中，保证数据的完整性。

## 3.CDC（Change Data Capture）
CDC（Change Data Capture）即对数据库所做的增删改查操作进行捕获和记录，这样就可以实现数据库的实时数据备份，避免了采用轮询方式备份整个数据库。主要步骤如下：

1. 源数据库开启CDC功能
2. 源数据库产生INSERT、UPDATE、DELETE等动作
3. CDC模块捕获到动作，把动作的数据和相关信息记录在日志文件中
4. CDC模块读取日志文件，解析出需要的列数据和相关信息，放入临时表中
5. 查询临时表获取增删改后的最新数据，供其他应用或工具使用

## 4.分散查询（Sharding）
分散查询（Sharding）是指将同一张逻辑表的数据划分到不同物理表中，每个物理表仅包含部分数据，这样可以在并发查询时减少锁定冲突。常用的分片方法有哈希分片、范围分片、列表分片和垂直分片等。

## 5.序列号生成器（Sequence Generator）
序列号生成器是在数据库中生成连续编号的一种机制。数据库使用序列号生成器可以为不同的实体对象生成不同的唯一标识符，或者用于标识顺序执行的事件。序列号生成器包括自增序列、GUID生成器、序列函数和游标。

## 6.物化视图（Materialized View）
物化视图（Materialized View）是数据库中一种缓存视图技术。物化视图是基于一定的查询条件或者聚合条件而建立的静态的虚拟表，它与源表的数据结构相同，但只保存被检索的数据记录。因此，物化视图与源表之间的关系就像是一个硬连接一样，不必查询源表，从而加快查询速度。

## 7.触发器（Trigger）
触发器（Trigger）是一种特殊的存储过程，当某些特定事件发生时（例如插入新行、删除已有行、更新某个字段值），将会自动执行该触发器中的SQL语句。触发器一般用来维护完整性约束，检查事务的完整性和触发事件的类型，比如BEFORE INSERT、AFTER UPDATE。

## 8.堆积增长（Volume Growth）
堆积增长（Volume Growth）是指随着时间的推移，每天都在增加的数据量。在数据仓库建模和ETL过程中，要兼顾实时性和离线分析，可以采取一些手段来缓解堆积增长带来的性能问题。

## 9.多主集群（Multi-Master Clustering）
多主集群（Multi-Master Clustering）是指一个数据中心中存在多个数据库实例，它们可以作为主库，处理写入操作，同时还可以承担读取操作，以提供性能和可靠性。

## 10.异步复制（Asynchronous Replication）
异步复制（Asynchronous Replication）是指在主服务器写入并提交事务后，不会等待从服务器上对应的事务提交成功，而是直接返回给客户端成功信息。对于需要实时响应的业务场景，建议使用异步复制模式。

## 11.CDC消费端（CDC Consumer）
CDC消费端（CDC Consumer）是指对数据库实时变化进行消费的程序。数据库的实时变化可以从CDC消费端中获得，也可以作为中间层来对外提供服务。

## 12.回溯复制（Reverse Replication）
回溯复制（Reverse Replication）是指将从库（standby server）的数据复制回主库，从而实现增量备份。通过回滚主库中的数据，可以恢复到过去的时间点。

## 13.组提交（Bulk Commits）
组提交（Bulk Commits）是指在事务执行期间，一批SQL语句提交到数据库，一次性提交所有SQL语句，而不是逐条提交。

## 14.可重复读（Repeatable Read）隔离级别
可重复读（Repeatable Read）隔离级别是指对同一份数据，在事务开始之前，总是读取同样的数据行版本，遇到脏读、不可重复读和幻影读不会再发生。

## 15.读提交（Read Committed）隔离级别
读提交（Read Committed）隔离级别是指在选定的RR级别下，可以解决脏读的问题，但是不能解决不可重复读和幻影读的问题。

## 16.串行izable隔离级别
串行izable隔离级别是最低的隔离级别，其中所有事务只能串行执行。它的目的是实现最高程度的并发性，如果没有其它更好的隔离级别可以使用，建议使用串行izable隔离级别。