
作者：禅与计算机程序设计艺术                    

# 1.简介
  

## 什么是层次聚类？
层次聚类(Hierarchical Clustering)是一种重要的数据聚类方法，它对数据集进行分组分析，将相似性较高的对象归属于同一个组，而不同组之间则可能存在重叠。层次聚类算法可以分为以下两大类：
### 自顶向下法（Top-down approach）
这种方法先对整个数据集进行划分，然后逐步合并子集，直到最后只有两个子集，即为最终结果。基本过程如下：

1. 首先，对数据集进行一次聚类，使得每个数据点都属于自己的独立组。该步骤称作初始聚类或根节点聚类；

2. 对各个初始聚类的子集进行一次聚类，得到更小的子集，并将其作为新的初始聚类，重复上述步骤，直到不能再进行聚类；

3. 将所有初始聚类结果进行合并，得到最终的结果。

例如，对样本集{1,2,3,4,5}进行层次聚类：

在第一轮聚类中，样本集被划分为两个子集{1,2}和{3,4,5}，分别代表初始聚类A和B。在第二轮聚类中，初始聚类A被划分为{1,2}和{3,4}，初始聚类B被划分为{3}和{4,5}。经过两轮聚类后，各个聚类的子集又均已缩小至只有单个样本，所以得到最终的结果{A, B, C, D}.

### 自底向上法（Bottom-up approach）
这种方法从样本集中选取一个样本，将该样本所包含的全部样本作为初始子集，建立聚类树，然后再向上合并，逐渐形成完整的聚类树。基本过程如下：

1. 从样本集中选择一个样本，并将它作为初始样本；

2. 使用该样本作为分类标准，将数据集划分为两个子集：包含该样本的子集和不包含该样本的子集；

3. 重复第2步，直到所有样本均被分配到一个或者两个类别；

4. 在每一步中，将当前子集中的样本分配到离它最近的前一级分类中，如果无法确定前一级分类，则创建一个新的分类；

5. 返回第2步，直到所有的样本均被分配到一个整体或者两个聚类。

例如，对样本集{1,2,3,4,5}进行层次聚类：

首先，选择样本3作为初始样本，构造初始聚类{3}。然后，对子集{3}应用K-Means算法，发现该子集已经聚成两个类别{C}和{D}。因此，继续将子集{C}和{D}分别应用K-Means算法，得到最终结果{C,D}，构造新聚类{CD}。接着，将子集{1,2}应用K-Means算法，获得最终结果{1,2}，构造新聚类{ABCDE}。最后，返回第2步，继续将子集{AB}和{DE}应用K-Means算法，获得最终结果{AB, DE}，构造新的聚类{ABCDE}。经过多轮聚类后，所有样本均已分配到一个聚类{ABCDE}。

总结来说，两种方法的主要区别是：自顶向下的聚类方法是从外向里地构建聚类树，自底向上的聚类方法是从里向外地构造初始聚类，然后逐步向上传播，形成完整的聚类树。一般来说，自底向上的聚类方法速度比较快，适合样本量较大的情况；而自顶向下的聚类方法可实现更精细化的控制，适合样本量较小、特征稀疏的情况。