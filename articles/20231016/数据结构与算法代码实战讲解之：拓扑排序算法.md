
作者：禅与计算机程序设计艺术                    

# 1.背景介绍


## 拓扑排序（Topological Sorting）
> 在计算机科学中，拓扑排序 (topological sorting) 是一种对有向图或者无环图中所有顶点的线性遍历。它通过一系列操作将有向边转换成序列，因此可以有效地解决很多问题，如依赖分析、死锁检测、资源调度等。简单来说，拓扑排序就是把一个有向无圈图的所有顶点排列成一条线性序列，满足对于任意两个顶点u和v，若存在一条路径使得u在v之前出现，则u排在v的前面。比如我们有以下有向图:
根据这个图，用拓扑排序法，可以得到序列`[C, A, D, B]`，即先对图中的结点进行排序，然后从第一个结点开始依次输出它的出边的结点到队列中。如果队列为空，则表示该结点已经输出完毕，删除它，并再次尝试从新选取一个结点加入队列，直至队列为空。

根据这个过程，也可以进行反向操作，即从某个结点开始遍历，输出它所有的入边的结点到队列中，最后反序输出最终结果，即获得逆拓扑排序。如下图所示：


## 为什么要学习拓扑排序？
拓扑排序是一个经典的算法，而且应用非常广泛。它能解决诸如有向图的拓扑排序、网络流的最小割等问题。另外，因为其简洁性、高效率、稳定性等特点，很多问题都可以在拓扑排序的帮助下解决。所以，掌握拓扑排序算法很有必要。
## 拓扑排序有哪些应用场景？
### 有向图的拓扑排序
给定一个有向图$G=(V,E)$，其中$V$为顶点集，$E$为边集。假设每条边的权重都是1，试求有向图$G$的拓扑排序序列。

一般情况下，有向图的拓扑排序有两种方法：
1. 基于DFS的拓扑排序：首先利用DFS进行一次遍历，输出每个顶点的发现时间。然后，按照发现时间的逆序进行拓扑排序。这样保证了拓扑排序的顺序，同时也保证了不会漏掉任何一个顶点。
2. 基于Kahn的拓扑排序：先找出所有入度为0的顶点，按它们的顺序放进队列中，然后处理队列中的顶点。处理过程中，对于当前结点u，将u的所有出边减去1。若减少后等于0，表示该顶点的入度均已处理，即可从队列中弹出。重复上述操作，直至队列空。

### 任务调度问题
图的任务调度问题描述的是如何安排一组任务(task)使得完成这些任务需要的时间最少。任务调度问题属于图论中经典的问题。例如，在计算机系统中，可能会有一个流程图，描述了进程之间的关系及耗费的时间，任务调度问题就可以用来安排计算机系统运行时的任务顺序。

有关任务调度问题的其他例子包括流最小割问题，它是在一个有向图中找到具有最小总代价的最大流，使得流经过任意两点的边的数量总和最小；机器人工作分配问题，它是指一个工厂生产机器人组装零件的任务调度问题，并且每个零件只能用一次，目的在于使工人尽可能多地完成任务。

## 课后习题
1. 已知有向图$G=(V,E)$，请将其转化为邻接矩阵形式。
2. 举例说明如何使用DFS或Kahn算法计算有向图$G$的拓扑排序。