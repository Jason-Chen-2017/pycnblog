
作者：禅与计算机程序设计艺术                    

# 1.简介
  

字符串匹配（string matching）是指从一个长字符串中查找或找出一个短字符串的位置。在实际应用场景中，该问题被广泛应用于信息检索、生物信息学等领域。字符串匹配算法的关键在于如何高效地处理模式串(pattern string)与文本串(text string)之间的匹配问题。这里特别指出，在本章中，我们主要讨论最常用的一种字符串匹配算法——蛮力算法。其时间复杂度为O(nm)，即文本串长度n与模式串长度m的乘积。由于其低效率及不精确性，人们很早就开始探索更高效的算法。近年来，一些新的算法被提出，如KMP算法、Aho-Corasick算法、Rabin-Karp算法等。这些算法都能达到O(nm+k)的时间复杂度，其中k是预先计算好的子字符串哈希值。因此，基于子字符串哈希值的算法在某些情况下具有很大的优势。

本章介绍的算法为“蛮力”算法，即逐个比较字符来实现匹配。首先，将模式串与文本串相同长度的前缀进行比较。如果存在匹配，则进行下一步；否则，返回失败；若完全匹配，则返回成功。然后，将模式串右移一位，继续从文本串的同一位置开始比较。依此类推，直至所有可能的匹配位置都试过一遍，还没有找到合适的。这种搜索方式称为“蛮力”搜索。当字符串较长时，这种方法速度非常慢。为了提高速度，一些改进的方法被提出，包括后缀树、KMP算法、Boyer-Moore算法等。

# 2.基本概念术语说明
## 字符串匹配
字符串匹配，即从一个长字符串中查找或找出一个短字符串的位置。一般来说，字符串匹配可以分成单词模式匹配和多重模式匹配两种类型。

### 单词模式匹配
单词模式匹配通常用于搜索包含特定单词的文件。例如，给定一个文档集合，要求搜索指定单词出现的所有文件。假设文档集中共有N个文档，每个文档由M个词构成。对每个文档，可以提取出所有词并生成索引。这样，就可以通过遍历索引寻找目标单词。在单词模式匹配中，模式串是一个单词，文本串就是要搜索的文档。因此，算法需要判断文本串中是否存在模式串所对应的单词。

### 多重模式匹配
多重模式匹配是指搜索文本中的多个模式串。其中，模式串有多种形式，而它们之间又可以相互组合。例如，给定一篇文章，希望识别出其中的作者、日期、主题等信息。模式串可以是“作者”，“日期”，“主题”，或者同时包含“作者”和“日期”的信息等。在这种情况下，算法需要匹配每一种模式串的出现。

## 模式串与文本串
模式串（Pattern String）是被搜索的字符串，也是搜索的关键。它的作用是在源字符串中定位匹配的位置。文本串（Text String）是已知的搜索范围，它描述了需要搜索的内容。字符串匹配的目的就是寻找在文本串中是否存在模式串。因此，文本串是模式串的最大集合。

## 模式匹配算法
模式匹配算法，也称字符串匹配算法，是指用来查找一个字符串集合中的另一个字符串是否存在的过程。通过对比两个字符串，模式匹配算法能够发现相应位置上的匹配关系。目前常用的字符串匹配算法有多种，如蛮力算法、BM算法、KMP算法、AC算法等。

### 蛮力算法
“蛮力”算法的原理是逐个比较字符来实现匹配，根据规则依次检查每一位是否匹配。该算法时间复杂度为O(nm)，表示输入字符串的长度为n，模式串的长度为m。当字符串较长时，这种方法速度非常慢。对于较短的字符串，可以使用该算法，但对于较长的字符串，其他算法会有更快的匹配效果。

### KMP算法
KMP算法（Knuth-Morris-Pratt algorithm），是一种用于字符串匹配的算法。它最初是由D.E.Knuth和J.Morris于1977年提出的。该算法既能够快速求出模式串各个字符的前缀函数值，又能够避免重复比较相同的字符。该算法的时间复杂度为O(nm)，其中n为文本串的长度，m为模式串的长度。

### BM算法
BM算法（Boyer-Moore algorithm），是一种更加高效的字符串匹配算法。该算法在最坏情况下仍然具有线性时间复杂度。它的基本思路是利用两个数组P和T，其中P记录模式串各字符的模式前缀函数值，T记录文本串各字符的模式后缀函数值。通过这两个数组，可以实现高效的字符串匹配。该算法的时间复杂度为O(nm)，其中n为文本串的长度，m为模式串的长度。

### AC算法
AC算法（Aho-Corasick algorithm），是一种高效的多模式串匹配算法。它结合了上述两种算法的优点，首先使用了回溯的方式构建子字符串的模式前缀函数，然后利用AC自动机构建模式的模式后缀函数。该算法的时间复杂度为O(nm+k),其中k是模式的数量。