
作者：禅与计算机程序设计艺术                    

# 1.简介
  

“可调用”这个词在计算机编程领域里已经有了很长时间的历史了。它的基本含义是指能够执行某种功能的一些对象，比如函数、方法等。对于一个对象来说，只要它具有__call__()方法或者实现了__getitem__()、__getattr__()等魔法方法之一，都可以被视作一个“可调用”对象。
而在Python中，由于众多原因，使得一些基本数据类型（如数字、字符串）也可以作为“可调用”对象。这主要归功于以下两个原因：
- __call__() 方法允许一个类实例或对象变成可调用的对象，这样就可以通过该对象的() 操作符来调用其内部定义的任意方法；
- 在Python中，有些内置的函数、模块或者类的对象都是可以直接调用的，而且这些函数、模块或者类的源代码都没有提供__call__()方法或者其他魔法方法。这也使得这些对象既可以像函数一样被调用，又可以像普通变量一样被赋值。

2.什么是可调用对象？
“可调用”对象是一个具有特殊属性的方法集合，可以通过特殊的方式对其进行调用。如果该对象有一个__call__()方法，那么它就是一个可调用对象。例如：
```python
def func():
    pass
    
class MyClass:
    def __init__(self):
        self._x = 0
    
    def set_value(self, x):
        self._x = x
        
    def get_value(self):
        return self._x
        
obj1 = func # func 是可调用对象
print(callable(func)) # True

obj2 = MyClass() # obj2 是可调用对象
print(callable(obj2)) # False
obj2.set_value(3)
print(obj2.get_value()) # 3
```
在上面的例子中，func()函数是一个可调用对象，因为它具有__call__()方法。MyClass类是一个不可调用对象，因为它没有__call__()方法。但是，如果给MyClass实例化之后把它赋值给obj2，那它就变成了一个可调用对象。而且，当调用obj2时，实际上调用的是MyClass类的__call__()方法。即使类本身并没有定义__call__()方法，但它仍然是一个可调用对象，只是不能用括号直接调用。

3.__call__()方法
对于任意一个类实例，如果其具有__call__()方法，那么它将变成一个可调用对象。这个方法的定义方式如下：
```python
class MyClass:
    def __call__(self, *args, **kwargs):
        #... 执行相关操作...
```
当一个可调用对象被调用的时候，Python会自动执行这个对象的__call__()方法。因此，你可以把任何一个类实例对象赋值给某个变量，然后再调用该变量，无论该对象是否具备__call__()方法。

在Python 3.X版本中，还引入了functools.update_wrapper()函数，可以把一个已有的函数或类装饰器包装起来，并修改其参数签名，使其成为一个新的可调用对象。

4.可调用对象作用
既然可调用对象是一种在Python中很重要的特性，那么它们到底有什么作用呢？

首先，它们的出现是为了让Python程序更加灵活，避免重复的代码。如果我们有一段代码需要重复地执行很多次，并且每个地方都要写相同的代码，那么这就是低效的表现。所以，对于那些经常使用的代码，可以封装成一个函数，然后只调用一次，之后可以随时调用。

其次，可调用对象还可以实现面向对象编程中的委托模式。委托模式是一种设计模式，允许把请求委托给一个特定的对象处理，从而支持更多的扩展性。在面向对象编程中，许多设计模式都采用委托模式。例如，事件驱动模型是一种委托模式。事件发生时，系统根据情况把事件传递给相应的对象处理。这也体现了可调用对象的灵活性和高级能力。

第三，在一些特定情况下，可调用对象也可以用来做类似于函数式编程中的柯里化(currying)。柯里化是一个过程，它将多参数函数转换成单参数函数序列，其中每一个函数仅接受部分参数，返回另一个函数，直到所有参数都被接受才真正执行计算。在Python中，可以使用functools模块中的partial()函数来创建部分应用的函数。partial()函数创建一个新的函数对象，它仅接受少量的参数，将剩余的参数延迟到下一次调用时才提供。这也是可调用对象的一项能力。

最后，可调用对象还可以用作闭包的替代品。闭包是一个包含自由变量的函数，即使在外部函数调用结束后，该函数仍然存在。在Python中，可以使用lambda表达式来创建匿名函数，它可以捕获外围作用域的变量，构成一个闭包。

综上所述，可调用对象不但可以用于编写灵活的代码，还可以用于各种高级功能。除此之外，它们还提供了极大的便利，可以大大提升编程效率和开发速度。