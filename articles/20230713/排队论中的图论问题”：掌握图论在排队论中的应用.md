
作者：禅与计算机程序设计艺术                    
                
                
在“排队论”中，计算机科学家通常采用两种方法解决模型问题：“动态规划”（Dynamic Programming）方法和“线性规划”（Linear Programming）方法。但是，在这两种方法之间，还有第三种“图论”的方法也可以用来解决复杂的问题。

图论是一种基于图形理论、数学模型、集合论、代数学、计算几何等数学分支的研究方法，其目的是研究如何从多项数据中提取知识并发现关系。虽然图论方法可以很有效地处理排队问题，但由于其需要对图结构进行建模，而这种建模过程往往会变得复杂。因此，如果有充足的时间和硬件资源，或者能够找到可用的工具包，图论方法还可以发挥出更大的作用。然而，对于一般的问题来说，采用图论方法并非易事，特别是在没有充分了解其工作原理的情况下。

本文将介绍一种图论方法——“最短路径”方法（Shortest Path Method），其能够用来解决排队问题。

# 2.基本概念术语说明
## 2.1.排队问题
排队问题（Queueing Theory），也称“队列论”，是指利用随机生成事件的概率分布来分析系统或过程的性能。排队问题是研究系统中客体随机进出某些资源（如公共汽车，仓库等）所形成的队列状态以及各种控制参数对系统队列性能影响的理论与方法。排队问题涉及到系统资源分配、流动性、服务时间和服务请求生成、服务完成响应等方面，主要关注资源利用率和等待时间等性能指标。

在排队问题中，顾客是输入到系统中的对象。当顾客进入系统时，他可能会被分配到一个特定位置（例如排队等候），然后才能获得服务。当一个顾客离开系统时，他就会得到相应的服务时间。系统的目标是使每个顾客都能得到适当的服务质量，从而最大限度地满足需求。一般来说，排队问题有三类问题：

1. 服务队列大小问题：即服务中心拥有的服务台数，它反映了平均的排队长度；

2. 服务时间问题：服务时间反映了平均等待时间，通常用顾客在服务中心停留的时间来表示；

3. 服务率问题：服务率表示在单位时间内，顾客到达系统与实际服务结束之间的时间比例，它通常用于衡量系统的效率。

## 2.2.图论
图论是基于图形理论、数学模型、集合论、代数学、计算几何等数学分支的研究方法，用于研究由节点和边组成的网络或图结构中的关系。通过图论的方法可以分析网络中的结构，建立起相关的模型，并找寻其规律。

图论通常使用两种图表：邻接矩阵和邻接列表。

### 2.2.1.邻接矩阵
邻接矩阵是一个二维数组，每行和每列代表一个顶点，其中，若元素(i,j)为1，则代表节点i和节点j有一条边，否则不相连接。邻接矩阵是将图表示为一个方阵，行表示源点，列表示终点。邻接矩阵的优点是能够直观地展示图结构，缺点是空间复杂度高，而且无法表达权值信息。

### 2.2.2.邻接列表
邻接列表是一个链表数组，每个结点的出边和入边分别放在两个链表中，每个链表存储对应的结点序号。比如，对于无向图G=(V,E)，用邻接列表表示形式为：adj[v] = list of vertices adjacent to v。邻接列表按顺序存储各结点的入边或出边，适合于稀疏图。

## 2.3.最短路径
最短路径算法（Shortest Path Algorithm）用来求解图中的单源最短路径。在无权重边的图中，单源最短路径问题可用Bellman-Ford算法解决，而在带权重的图中，单源最短路径问题可用Dijkstra算法或Bellman-Ford加松弛算法解决。在本文中，我们只讨论单源最短路径问题。

## 2.4.优先级队列
优先级队列（Priority Queue）又叫作堆（Heap）。堆是一个类似树的结构，其中父节点的值总是小于等于其子节点的值。优先级队列具有以下特征：

- 每个元素都有一个优先级（key）；

- 每个元素的优先级都不同；

- 如果A的优先级小于B的优先级，那么A就位于B的上半部分；

- 当优先级相同的时候，元素进入队列的顺序决定了它们之间的顺序关系。

## 2.5.最短路径法
最短路径法（Shortest Path Method）是指采用图论的方法来研究排队问题。图论法把所有节点看做是图中的顶点，将每对顶点间的距离作为边的权重，然后求解网络中任意两点间的最短路径。具体地说，假设有n个客户要进入服务中心，希望按照最少的等待时间接受服务，可以将这个问题转换为求解n个客户到服务中心的最短路径问题。

首先，构造一个有向图，其中每个客户视为顶点，服务中心视为汇点，图的每条边表示一条路径。路径的权重是距离，就是从客户到服务中心的距离。

其次，依据某种排序规则（如先来先服务FIFO、后来先服务LIFO、最短路径优先SPF），将客户加入队列，每来一个客户就计算其最短路径到服务中心的距离，并更新它在队列中的位置。

最后，输出第一个客户进入服务中心的路径，并删除它所在的队列。重复这一过程，直至服务中心所有客户都已处理完毕。

这个算法称为“最短路径法”。

