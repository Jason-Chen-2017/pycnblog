
作者：禅与计算机程序设计艺术                    

# 1.简介
  

一般情况下，当一个对象被创建时，系统会默认提供一个内置函数__init__()方法用来对这个对象的属性进行初始化，例如创建一个数字列表或字典，系统会自动调用__init__()方法对其进行初始化。但在Python中，有一个特殊的类方法__len__()，这个方法会返回该类的长度，用于支持魔法函数len()函数。__len__()方法对于计算容器的大小非常重要。如果没有这个方法，那么就需要自己定义自己的方法或者属性，才能确定它的长度。比如字符串、列表、集合等都可以用__len__()方法来获取它们的长度。
```python
class MyClass:
    def __init__(self):
        self.data = []

    def add_element(self, element):
        self.data.append(element)

myobj = MyClass()
myobj.add_element('a')
print(len(myobj)) # Output: 1
``` 
如上述代码所示，通过自定义MyClass类，并实现了add_element方法向列表中添加元素，然后使用len()函数来获取列表的长度，输出结果为1。这种方式虽然简单易懂，但是当需要处理复杂的数据结构时，这种直接获取长度的方式显得比较低效。

因此，在学习及了解Python中的__len__()方法之前，需要先了解一些相关的基础知识。本文将详细介绍。

# 2.基本概念术语说明
## 什么是容器？
容器（container）是一种数据结构，它包含零个或多个其他对象，这些对象按照一定顺序存储。最常用的容器类型是序列（sequence），包括字符串、列表、元组、集合、字典等。

## 为什么要有长度？
计算机只能处理有限的内存，如何确定容器实际占用的内存空间是一个难题。举例来说，当一个字符串中含有几百万个字符时，为了存储这个字符串及其对应的字节数组，计算机不得不分配大量内存。而确定这个字符串的长度才是问题的关键。当你想要判断某段文本有多长时，你需要确定它包含多少个单词、字符、行等信息。所以，容器中的每个元素都必须有一个确定的索引位置，这样就可以根据索引值来获取到对应的元素。

在Python中，容器的长度可以通过内置函数len()来获得。很多数据结构都可以直接调用len()函数来获取长度。

## Python中的容器类型有哪些？
Python中，主要有以下六种容器类型：

1. 序列（Sequence）：序列是有序集合的一级子类。序列中的元素按特定顺序排列，集合中的元素可重复出现。序列类型的典型例子是列表，它可以存储任意数量的项目。

2. 映射（Mapping）：映射是关联容器的一个子类。它存储着两个对象之间的关系。每一个键对应的值都是独特的。映射类型的典型例子是字典，它是无序的，可以在其中存储键-值对。

3. 迭代器（Iterator）：迭代器是访问集合元素的一种方式。迭代器提供了一种抽象的方法，使客户能够遍历集合中的所有元素而不需要暴露底层表示。迭代器类型的典型例子是list()函数返回的那些迭代器。

4. 可哈希（Hashable）：可哈希是指可以哈希的类型。一个可哈希的类型就是说，它可以通过内置函数hash()来得到唯一整数值。例如，字符串、整形和浮点数等都是可哈希的类型，但列表、字典和集合不是。

5. 可变容器（Mutable container）：可变容器可以修改其中的元素。序列和字典属于可变容器，因为它们允许增加、删除或修改元素。可变容器类型的典型例子是列表和字典。

6. 不可变容器（Immutable container）：不可变容器不能修改其中的元素。元组、字符串和整数属于不可变容器，因为它们的值无法改变。不可变容器类型的典型例子是元组和字符串。