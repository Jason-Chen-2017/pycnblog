
作者：禅与计算机程序设计艺术                    

# 1.简介
  

什么是位运算?从字面上理解，就是对数字进行二进制的操作。那么为什么要用到位运算呢？因为计算机底层是由0、1组成的，每一位代表一个状态，比如电灯开关是0、关闭是1，所以可以用它表示各种信息。比如整数是用二进制表示的，00001011表示-5，计算机也采用二进制来存储整数。但是由于二进制数据太少，无法完整的表示所有可能的值，因此才有了比特位（bit）的概念，每个比特位只有两种值（0或1）。所以为了存储更多的数据，就需要更长的比特位数，而位运算便是用来操作这些比特位的。位运算一般用于处理整数、浮点数和其他有限位宽的类型数据，如颜色、像素等等。位运算在电脑、网络、数据库领域都有广泛的应用。

在本教程中，我们将会详细介绍位运算的基本概念、术语以及使用技巧，并结合实际的代码示例，向大家展示如何使用位运算解决算法中的一些经典问题。希望通过学习并实践位运算，能够帮助读者深刻理解计算机底层的数据表示方法、算法性能优化的关键所在，进一步提升自己的编程水平。

2.基础知识
## 位运算符
位运算符包括按位非~、按位与&、按位或|、按位异或^、左移<<、右移>>四种。下面我们将详细介绍一下它们的功能。
### 按位非
对数据的每个比特位取反，即把0变成1，把1变成0。~x = -(x+1)

例如：~7 = -8(因为7=0b0111，~7=0b1000，相加再取负数)；~(-5)=-6(因为-5=0b111101，~(-5)=0b000010，相加再取负数)。

```python
print(bin(~7)) # 输出：-0b1000 (以0b开头表示二进制的补码形式)
print(bin(~(-5))) # 输出：-0b000011 （以0b开头表示二进制的补码形式）
```

### 按位与(&)
对两个对应的比特位同时进行判定，只有两个相应位都为1时，结果才为1，否则为0。x & y = x AND y 

例如：5 & 3 = 1(因为5=0b0101, 3=0b0011, 5 & 3 = 0b0001)，7 & (-3) = 5(因为7=0b0111, -3=0b1101, 7 & -3 = 0b0101)。

```python
print(5 & 3) # 输出：1
print(7 & (-3)) # 输出：5
```

### 按位或(|)
对应位不同则取1，相同则取0。x | y = x OR y 

例如：5 | 3 = 7(因为5=0b0101, 3=0b0011, 5 | 3 = 0b0111)，-2 | 3 = 3(因为-2=0b1110, 3=0b0011, -2 | 3 = 0b0011)。

```python
print(5 | 3) # 输出：7
print((-2) | 3) # 输出：3
```

### 按位异或(^)
对应位不同则取1，相同则取0。x ^ y = x XOR y

例如：5 ^ 3 = 6(因为5=0b0101, 3=0b0011, 5 ^ 3 = 0b0110)，7 ^ -3 = 10(因为7=0b0111, -3=0b1101, 7 ^ -3 = 0b1010)。

```python
print(5 ^ 3) # 输出：6
print(7 ^ -3) # 输出：10
```

### 左移(<<)
把整个数向左移动指定位数。对于正数，高位溢出舍弃，低位补零。对于负数，正数部分用0填充，负数部分不动，如左移4位，-5左移4位等于240。

例如：5 << 2 = 20(因为5的二进制形式为0101，左移两位后为10100，十进制形式为20)，-5 << 2 = -40(因为-5的二进制形式为1011，左移两位后为111000，十进制形式为-40)。

```python
print(5 << 2) # 输出：20
print((-5) << 2) # 输出：-40
```

### 右移(>>)
把整个数向右移动指定位数。对于正数，低位溢出舍弃，高位补符号位（正数补0，负数补1），如右移4位，20右移4位等于5。对于负数，右移保持符号不变，如右移4位，-20右移4位等于-5。

例如：5 >> 2 = 1(因为5的二进制形式为0101，右移两位后为0001，十进制形式为1)，-5 >> 2 = -2(因为-5的二进制形式为1011，右移两位后为11110, 取其最高位作为补符号位，所以得到-2)。

```python
print(5 >> 2) # 输出：1
print((-5) >> 2) # 输出：-2
```