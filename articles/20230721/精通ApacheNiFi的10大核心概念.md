
作者：禅与计算机程序设计艺术                    
                
                
Apache NiFi是一个开源的、分布式的数据流流水线系统。它支持流数据收集、处理和分发，可用于实时处理，数据分析，移动数据的传输等多种用途。它是Apache孵化项目，由Apache基金会管理并拥有，目前最新版本为NiFi-1.12.1。本文将对Apache NiFi的10大核心概念进行介绍。

2.基本概念术语说明
## 1）NIFI
Apache NiFi（即NiFi）是一个开源的、分布式的数据流流水线系统。它是基于流数据模型的，能够对来自不同来源的数据进行高效的收集、处理和分发。它支持各种数据源以及不同类型的处理方式。

2）组件
NiFi组件是构建NiFi流水线的基本单元。组件通常包括一个或多个处理器（如连接到NiFi输入端口、过滤器、路由器等），和一个或多个工作线程（负责执行组件中的逻辑）。组件通常是图形化配置的，但也可以通过配置XML文件或API动态创建。

3）数据流
数据流是NiFi中最重要的实体之一。数据流表示了一个NiFi管道的处理过程。数据从源头流向终点，经过一系列的组件处理后，最终达到目的地。数据流可以被设计成长期运行（即持续接收新数据），或者是一次性处理（处理完成后就丢弃该数据）。

4）队列
NiFi使用队列作为数据存储容器。每个组件在处理数据时，都会向队列发送或者接收数据。组件不直接与队列通信，而是通过队列间接与其他组件通信。NiFi提供丰富的队列类型，包括有界队列，无界队列，Kafka队列等。队列还支持持久化能力，能够在节点故障后自动恢复数据。

5）控制器
NiFi控制器是一个独立的进程，运行于NiFi集群中的一个节点上。它负责管理整个数据流管道，包括流程调度、资源分配、错误恢复等。控制器通过HTTP/HTTPS协议访问NiFi API。

6）集群
NiFi集群是由一组NiFi节点组成的网络，这些节点共享相同的配置信息，并且能够通过在内存中缓存数据来提升性能。NiFi集群能够在节点之间动态的横向扩展和纵向扩展。

7）资源控制
NiFi提供了多种资源控制功能，帮助管理员控制对系统资源的消耗。例如，可以设置组件的执行限制、可用内存、队列大小等。

8）Provenance Reporting
Provenance Reporting是NiFi的一个特性，它记录了NiFi管道处理过程中所有的数据流动路径。这使得NiFi管道的历史记录可以追溯到每一个组件的事件发生时间，并提供详细的错误报告。Provenance Reporting支持一键查看和分析数据的详细信息。

9）Reporting Tasks
Reporting Tasks 是NiFi 1.x 中的特性，NiFi 提供了很多默认的 Reporter 和 Controller Services 来生成报表。其中一些 Reporter 可以用来生成各种各样的报表，比如数据报告、事件报告、警报报告、质量保证数据、Hadoop集群监控等。Reporter 通过NiFi UI 配置，Controller Service 根据任务计划来自动触发执行。

10）Flexible Configuration
NiFi 提供了灵活的配置机制，允许用户在运行时修改数据流的配置，甚至可以根据流数据本身的特点，动态调整组件配置。这是因为NiFi使用Apache Curator框架管理配置变更，该框架能够做到实时的配置更新，即使用户在运行时修改配置也是如此。另外，NiFi支持基于Groovy脚本的组件级编程，允许用户编写自己的组件，并集成到NiFi的组件集合中。

