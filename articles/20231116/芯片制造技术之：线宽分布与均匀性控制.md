                 

# 1.背景介绍



在半导体器件设计中，线宽分布与均匀性控制（简称“LDC”）是指通过设计使得晶体元件处于平行状态的特性。平行状态的晶体元件具有良好的发光特性、结构清晰、高效率等优点，同时也提升了晶体制造的制程效率和整体投资回报率。LDC可分为两种类型：静态LDC和动态LDC。静态LDC用于制造精密集成电路和印刷电路，其目标是在金属表面布满串行的小间距，但并非所有的线都保持均匀分布。动态LDC则主要用于制造面积较大的器件，如半导体和光子学设备，其目的是保证所有元件之间的线宽均匀。

线宽分布与均匀性控制是IC设计过程中的一个关键环节。它涉及到各种层面的因素，包括：电路设计规则，晶圆设计、工艺流程，元器件布局优化、反相传动特性、光耦合容错性能等。本文将对线宽分布与均匀性控制进行科普介绍，并基于实际案例分析其作用，以期为读者提供一些参考依据。

# 2.核心概念与联系

## 2.1 LDC概念

线宽分布与均匀性控制（Line Width Distribution and Uniformity Control，缩写为LDC），是半导体器件设计中的一个重要技术手段。它是一个基于信号路径的特性，能够保证晶体元件处于平行状态。平行状态的晶体元件具有良好的发光特性、结构清晰、高效率等优点，同时也提升了晶体制造的制程效率和整体投资回报率。LDC可分为两种类型：静态LDC和动态LDC。静态LDC用于制造精密集成电路和印刷电路，其目标是在金属表面布满串行的小间距，但并非所有的线都保持均匀分布；动态LDC则主要用于制造面积较大的器件，如半导体和光子学设备，其目的是保证所有元件之间的线宽均匀。

线宽分布与均匀性控制利用微透镜技术在晶体管中制造串联的条纹。条纹的数量越多，则每个信号线所经过的步进数就越多，从而使信号在晶体管中的传播速度变慢，形成分布式特性，即信号沿着多个方向传播。

如果说绝缘栅极是所有金属线的唯一源头的话，那么条纹就是LDC能量释放的媒介。条纹的位置分布自然会影响LDR的有效宽度。如果一条信号线有很长的一段时间被某个元件的条纹覆盖，那么它就会不停地向不同的方向反复移动，因此整个元件内的信号线便具有不均匀分布。另外，如果某些元件的信号线很长而且全部由一条直线构成，那么由于极化效应的存在，它们可能发生交叉现象，这也是导致LDC不均匀分布的一个重要原因。

总结来说，LDC通过制造微透镜产生的条纹对电路进行控制，可以达到以下两个目的：

1. 有效的抑制垃圾信号的传播，抵消电路中的噪声影响。
2. 提升LDO功耗，降低功耗损失，提升电路整体性能。

## 2.2 相关术语和概念

线宽：指电压衰减的速度，即“衰变时间/微弱电流”。

线宽分布：指不同方向上的衰减时间与微弱电流分布关系。它直接决定了信号沿不同方向的传播速度，因而影响了信号路径的损耗、功耗、时延等。

线宽不均匀：指不同元件之间的线宽出现差异，产生差值波形或阶跃波形，严重影响信号传输速率和输出功率。

均匀性：指电路中的所有元件之间的线宽相同，没有阶跃或差值波形。均匀性可通过改变材料结构、器件规格、布局优化来实现。

# 3.核心算法原理和具体操作步骤以及数学模型公式详细讲解

线宽分布与均匀性控制的目标是使晶体元件处于平行状态，从而形成“完全串联”的发光谱。最简单的方法是通过微透镜技术在晶体管上制造连续的条纹，这种方法能够产生均匀的衰减模式。通过制造条纹，可以通过控制光的衰减速度和角度来实现不同元件之间的线宽均匀。如下图所示。


但是，对于复杂的元器件来说，制造条纹往往无法实现完全的串联效果。这时需要用到其他的方法。一种方法是采用天线级联的方式，即把各个晶体元件连接到一起组成总线，然后在总线两端加上衰减栅极。这样可以减少衰减效果，从而使不同晶体元件之间的信号线均匀分布。如下图所示。


另一种方法是采用阵列间隔法（Array Intervals Method，AIM）。该方法是根据元器件组成情况的不同，选择合适的阵列间隔，并通过改变栅极的配置来调整信号线的延迟。阵列间隔法能够有效地解决LDC不均匀的问题。

通过对信号线的传播过程进行仔细观察，我们发现一条信号线会首先传播到一种晶体元件上，然后再经过一系列的开口孔、分离层和晶粒，最后到达另一个晶体元件。在这个过程中，信号线的前后传递是根据前一晶体元件的表面态势决定的，信号线在晶体管中的分布也是依赖于微透镜中的条纹的位置决定的。

因此，线宽分布与均匀性控制对晶体元件的布局、制程、工艺流程、元器件规格、布局优化、信号源等方面都有着不可忽视的影响。下面介绍线宽分布与均匀性控制的具体算法和操作步骤。

## 3.1 操作步骤
LDC一般由几个基本步骤组成：

1. 晶圆设计：确定晶圆设计参数，包括晶体元件的类型、尺寸、导通能力、制作工艺、功能特性等。

2. 制作微透镜：通过微透镜产生条纹，条纹的大小、位置和数量决定了信号线的分布。

3. 测试和调试：测试微透镜的感光性能和锐度，判断是否满足条件，调整微透镜的设备参数，保证条纹的均匀性和质量。

4. 安装天线栅：安装衰减栅极到元件之间，使信号线均匀分布。

5. 安装摆件：在金属表面布置摆件或梁垫，对整体表面进行保护。

6. 测试和调试：测试天线的感光性能，调整器件参数，确保元件之间的信号线均匀分布。

## 3.2 操作步骤详解

1. 晶圆设计

   晶圆的设计主要考虑三个方面：导通能力、表面匹配度和功能特性。导通能力决定了信号线的损耗、峰值增益以及吸收与发射效率；表面匹配度决定了LDC的灵敏度和稳定性；功能特性决定了晶体元件的用途和性能。

   |          参数          |             含义              |
   | :--------------------: | :---------------------------: |
   |   晶体元件类型和尺寸    |       如硅晶体，多种尺寸      |
   |     导通能力（f）      |         光在晶体中的传播速度         |
   | 表面匹配度（λ/4πf）   |       不同物质的反射率误差       |
   |     功能特性（PD）      | 工作电压和功率，精度，响应速度等 |

   

2. 制作微透镜

   LDC通过微透镜技术制造条纹。要实现LDC，需要先制作微透镜。通常情况下，微透镜采用模拟方式制作，模拟微透镜将一堆微晶片聚焦于一台相机上，模拟出微透镜下能够看到的光照片。模拟微透镜制作的条纹在实际操作中效果并不理想，为了获得真正的条纹，需要实验室中的成像工程师进行精心设计和制作。

   制作微透镜一般包括以下步骤：

   - 微透镜选型：根据微透镜的设计要求，选择合适的微透镜。例如，要制作LDOS（低温、低噪声、大面积）微透镜，需要特别注意微透镜的尺寸和质量，防止玻璃烧坏或者弄脏。
   - 微透镜控制板选型：微透镜控制板设置好导通、光功率和速度，并配有手动控制的电路。
   - 模具放置：将微透镜模具放入微透镜控制板的腔中，并通过光电二极管的控制对模具进行校准。
   - 投影镜标定：将微透镜的距离正确标定到模具中心位置，方便进行投影。
   - 微透镜切割：对微透镜进行切割，将模具按一定规律排列。
   - 微透镜镜片搭建：在模具的基础上建设微透镜镜片，以满足一定高度的光照度。
   
3. 测试和调试

   测试微透镜的两种常用的方法是比较法和仿真法。比较法是使用微透镜在真空环境下的图像，测出光在微透镜上的强度，通过与标准一致来判断制作是否成功。仿真法是模拟光线在模具上的反映，通过计算和匹配模拟结果与真实结果之间的差距来判断制作是否成功。
   
   微透镜的性能指标如：感光度（LT，Light Tension）、分辨率（LSF，Lens Shift Focal Length）、位移抗干扰（DAM，Dynamic Aberration Magnification）、全反射率（FR，Full Reflection）、非相关性（NR，Non-correlated）、増幅（MA，Magnification）、分散度（SD，Scattering Distance）。

   |               测试项目                |                         含义                          |
   | :------------------------------------: | :--------------------------------------------------: |
   |            感光度、反射率            |                            检查微透镜是否正常                            |
   |                 灵敏度                  |           调节微透镜的大小、位置和条纹数量，获得最佳均匀性           |
   |               分散度和泊松度               |        调节微透镜的导通能力、角度，提高微透镜的感光性能和分散度        |
   |                 时延                  | 在多个信号源间进行测试，确认电路的时间延迟（最好小于1ns） |
   |        时延抖动（TDT，Timing Drift）        |                      判断元件相位错误                       |
   |                动态阻抗                 |                     调整微透镜的参数使之均匀                     |
   |              变焦、光学放大              |                    使用多种组合进行测试                     |
   |                  精度                   |                   根据功能特性和元件尺寸                   |
   |          外部干扰、热效应、杂散           |                    对电路周围进行大范围测试                     |
   |     宇宙射线干扰、放大效应、相位干扰     |                    保持杂散干扰不超过阈值                     |
   |   静态场偏差（SCA，Space Charge Amplitude）    |                    不需做测试，根据专利判别                     |
   |     补偿效应、凝胶、高效光源和传感器     |                    不需做测试，根据专利判别                     |


## 3.3 数字模型

### 3.3.1 均匀性模型

均匀性模型是一个数字模型，它用计算机模拟信号在晶体管中的传播，计算得到元件之间的线宽的平均值和方差。常见的均匀性模型有GaN的晶体管间距模型和Si的基带间距模型。

GaN的晶体管间距模型给出了在各种电压下，单晶浮空电流元件的最小导通长度。在模型中，晶体管宽度固定为400nm，每条导线延长40nm，且导线的间距是导线的个数乘以40nm。假定微晶的大小为5nm，晶体管连接到微晶器件的中间。

   GaN晶体管间距模型中使用的参数：

   - n：微晶数目，1～500，取整数
   - Vt：线电压，单位V
   - Lmin：导线延长长度的最小值，单位μm
   - N：导线的数量，>=1

   对于给定的Vt和n，Lmin的计算公式为：

   $$
   L_{min} = \frac{V_{t}}{n\cdot f} + n\cdot d
   $$

   - Vt：电压，单位V
   - f：晶体管中的感光速度，单位μm
   - n：微晶数目，整数
   - d：导线间距，固定为40nm

   在实际操作中，通常使用更多元件的导线长度作为修正因素。

   计算导线延长长度的平均值：

   $$
   \overline{\ell}_r=\frac{\sum_{i=1}^{N}L_{\delta i}(0)}{{N}}\mu m
   $$

   - $\ell_\delta(0)$：元件导线延长长度
   - $N$：导线的数量
   - $\mu m$：微米

   计算导线延长长度的方差：

   $$
   \sigma^2_{\ell}_r=\frac{\sum_{i=1}^{N}(\ell_{\delta i}(0)-\overline{\ell}_{r})^{2}}{{N}-1}\mu m^2
   $$

   - $(\ell_{\delta i}(0)-\overline{\ell}_{r})^2$：元件导线延长长度与平均值的差的平方

   ### 3.3.2 LDOS模型

   LDOS模型是一个近似模型，它假定了晶体管中所有信号线都按均匀分布。模型认为在每一晶体管中，导线的延长长度随机变化，但导线的数量不变。根据LDOS模型，单晶浮空电流元件的导线平均数量是固定的，并且固定在5至10个之间。

   在模型中，假设晶体管宽度固定为400nm，每条导线延长40nm，且导线的间距是导线的个数乘以40nm。晶体管的宽度固定在400nm和500nm之间。微晶的大小为5nm，晶体管连接到微晶器件的中间。

    LDOS模型中使用的参数：

    - Vt：线电压，单位V
    - w：晶体管宽度，单位nm
    - η：导线平均延长长度，单位μm
    - ε：导线宽度，单位μm
    - α：导线延长方向的概率分布
    - δ：晶体管之间的距离，单位μm

    对于给定的Vt，η，ε，α，δ的计算公式为：

    $$
    \eta = (3w+2\epsilon)(1-\alpha)+2\epsilon\\
    \alpha = e^{-(\frac{W}{2\eta})^2}\\
    \Delta = (\eta+\epsilon)\sqrt{(1-\alpha)^2+(1-\alpha)\alpha W^2}
    $$

    - W：微晶数目，取整数
    - ε：导线宽度，单位μm
    - α：导线延长方向的概率分布
    - η：导线平均延长长度，单位μm
    - Δ：晶体管之间的距离，单位μm
    - Vt：电压，单位V

    可以通过调整晶体管宽度、导线宽度、导线延长方向的概率分布和晶体管之间的距离，来改变晶体管的导线分布和距离，从而影响信号线的传播。

   ### 3.3.3 双绞线模型

   双绞线模型是一个数字模型，它通过仿真研究晶体管中信号线的分布。它考虑到信号线不能互相干扰，所以模型将导线划分为导体和电线。模型认为导体连接在电路的一端，电线连接在另一端。导体又可分为导体件和导体磁铁。导体件和导体磁铁的分布相互独立。导体件的大小为1nm左右，导体磁铁的大小可达几百毫米。

   通过仿真，模型会给出信号线的分布，并给出分布的概率。当所有导体件和导体磁铁的分布相同时，电路的传输率最高，即最大对称性。当导体件分布得更均匀时，信号传输率也相应提高。

   ## 4.具体代码实例和详细解释说明

   本节将以GaN晶体管间距模型和LDOS模型的实例，详细讲述线宽分布与均匀性控制的算法。
   
   ```python
   # 导入模块
   import matplotlib.pyplot as plt
   from scipy.stats import norm
   
   
   def gan_model(n):
       """
       GaN晶体管间距模型
       :param n: microcrystalline number of the sample.
       :return: Minimum pass length for single crystal to semiconductor gate in one step
           at given voltage, unit microns.
       """
       return ((1.2*n-1)*1e-3)*(40+40*n)+(n*(40*n)**2)/(3.7**2)/1e-6
       
   def ldos_model():
       """
       LDOS模型
       :return: Average pass length and variance of random pass lengths of single crystal
           in a semi conductor gate, unit microns.
       """
       eta = (3*400+2*40)*(1-np.exp(-((400/2/100)**2)))+2*40
       alpha = np.exp(-((400/(2*eta))**2))
       delta = (eta+40)*np.sqrt(((1-alpha)**2)+((1-alpha)*alpha*(400*1e-6)**2))
       var_pass_length = (((eta+40)*40*((1-alpha)**2))/((delta/(eta+40))**2))+(((delta/(eta+40))*((1-(1-alpha)**2)**2))/(2*(delta/(eta+40))))
       avg_pass_length = delta/(eta+40)
       return avg_pass_length, var_pass_length
   
   
   if __name__ == '__main__':
       """
       可视化
       """
       x = np.arange(1, 501, dtype=int)
       y = [gan_model(i) for i in x]
       plt.plot(x, y, label='GaN Model')
       
       avg_pass_length, var_pass_length = ldos_model()
       mu = avg_pass_length*1e-6
       sig = np.sqrt(var_pass_length)*1e-6
       xx = np.linspace(mu - 3 * sig, mu + 3 * sig, 100)
       yy = norm.pdf(xx, mu, sig)
       plt.plot(xx, yy, label="LDOS Model")
       
       plt.xlabel("Pass Length / µm")
       plt.ylabel("Probability density function")
       plt.legend()
       plt.show()
   ```

   上述代码生成了一个GaN晶体管间距模型和LDOS模型的概率密度函数曲线图。其中，GaN模型线宽随晶粒数目变化，且每个晶粒的导线延长长度总是固定为40nm。LDOS模型的线宽平均值为152.46µm，方差为530.84µm。