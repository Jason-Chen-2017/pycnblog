                 

# 1.背景介绍


Python作为一种高级语言，具有强大的文件操作能力。掌握文件操作可以帮助我们处理各种数据文件、配置文件等。本文通过一个实例，让读者了解Python的文件操作接口，并熟练应用其进行文件的读写、复制、移动、删除、查找等操作。在阅读完本教程后，读者应该能够清晰地理解Python中的文件操作的概念，掌握相关的模块及函数的用法，编写简单的脚本来完成文件操作任务。

本文使用的Python版本为3.7.6，读者可以根据自己的实际情况安装相应版本的Python环境。以下代码中涉及到的模块及函数均可以在Python官方文档中查询到。
# 2.核心概念与联系
## 文件操作的两种模式
在Python中，对于文件的操作一般分为两种模式：

1. 操作系统模式（操作系统负责提供文件系统）

这种模式下，Python程序直接操作底层的文件系统API，如Linux系统的open、read等系统调用或Windows系统的Win32 API。该模式优点是操作简单，缺点是不够灵活，因为它依赖于操作系统提供的功能。

2. 内置文件对象模式（操作系统提供给Python解释器管理的内存缓冲区）

这种模式下，Python程序可以使用内置的open()函数打开文件，并通过文件对象的read()方法、write()方法、seek()方法等访问文件的内容。该模式优点是灵活性强，可以实现更多的功能，缺点是需要自己处理很多繁琐的底层细节，如内存管理、缓存、同步等。

Python提供的open()函数默认采用的是第二种模式，即利用内置的open()函数，打开的文件对象被视作一种内置的文件对象。
## 文件对象属性
1. read() 方法：读取文件内容，将内容以字符串形式返回。
2. readline() 方法：从文件中读取单独的一行内容。如果没有可读取的行，则返回一个空字符串。
3. readlines() 方法：读取文件的所有行并返回一个列表，每个元素都是一个行的内容。
4. write() 方法：写入文件内容。如果文件不存在，会自动创建。
5. seek() 方法：调整当前文件指针的位置。
6. tell() 方法：获取当前文件指针的位置。
7. close() 方法：关闭文件。关闭后的文件不能再进行读写操作。
8. name 和 mode 属性：分别表示文件名和打开模式。
9. encoding 和 errors 属性：分别用于指定编码方式和错误处理方式。

Python标准库提供了丰富的文件处理工具，包括：os、shutil、glob、tempfile、zipfile、gzip、bz2、lzma、plistlib、marshal、sqlite3、xml、json、csv、configparser、netrc、mailbox、smtplib等。
## 文件打开模式
1. r：以只读方式打开文件。文件指针放在文件的开头。如果文件不存在，抛出FileNotFoundError异常。
2. w：以写入方式打开文件。如果文件不存在，则创建一个新的文件。如果文件存在，则覆盖掉原来的内容。文件指针放在文件的开头。
3. a：以追加模式打开文件。如果文件不存在，则创建一个新的文件。如果文件存在，则从末尾开始追加内容。文件指针放在文件的结尾处。
4. r+：以读写模式打开文件。文件指针放在文件的开头。
5. w+：以读写模式打开文件。如果文件不存在，则创建一个新的文件。如果文件存在，则覆盖掉原来的内容。文件指针放在文件的开头。
6. a+：以读写模式打开文件。如果文件不存在，则创建一个新的文件。如果文件存在，则从末尾开始追加内容。文件指针放在文件的结尾处。
## 文件复制
使用 shutil 模块的 copyfile() 函数复制文件。该函数接收两个参数：源文件路径和目标文件路径。例如：
```python
import shutil

src = "example.txt"
dst = "copy.txt"

if __name__ == "__main__":
    shutil.copyfile(src, dst)
```
运行上面的代码，就将 example.txt 文件复制为 copy.txt 文件。