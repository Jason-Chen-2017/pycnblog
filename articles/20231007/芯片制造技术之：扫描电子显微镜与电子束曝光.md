
作者：禅与计算机程序设计艺术                    

# 1.背景介绍


　　扫描电子显微镜（SEMI）是2D或3D结构扫描仪中的一种应用，用于真实地查看样品上各个孔的结构和功能。它的原理是在电子束或者离子束入射到物体表面后通过特定的电磁场转换而被记录下来的图像。由于SEMI具有高度集成化、精密性高、非侵入性、可靠性强等特性，使其能够广泛应用于纳米、微芯片、芯片、材料、电器等领域。近年来，随着计算机视觉技术的发展，越来越多的人开始将SEMI应用在工业领域。在传统工艺流程中，由于需要在机器上加工切割预处理，SEMI一般作为第一道工序。由于SEMI对成像细节的捕捉能力强、分辨率高、快速度、精准度高，使得它成为各类工艺生产环节的关键工具。因此，发展出了“SEMI+计算机视觉”的工艺流程。

　　根据SEMI光学原理，可将其分为两种工作模式——静态模式和动态模式。静态模式即用大功率激光扫瞄目标，每次扫光是完整的，显示的图像没有空间上的模糊；动态模式则是用小功率的激光颗粒（Electron Beam Scanning，EBS）或者离子束（Infrared Irradiated Diffraction，IRID）进行周期性扫描，一次只扫一个小孔区域，能够在一定程度上减少光路占用的时间。但由于可变形、缺陷等因素的影响，实际生产过程仍然要依赖其他手段。在这种情况下，电子束曝光（Electron Cathode Ray Tube，ECT）便应运而生。

　　1973年，科罗拉多州立大学教授安德鲁·海塞尔提出了电子束曝光（Electron Cathode Rays，ECR）原理，这是一种利用计算机模拟电子束的现象。他的原理是用一段控制脉冲来控制激光，从而实现对屏幕的控制。这种方法的优点是控制简单、可靠、容易实现、适合应用于不同类型的屏幕。

　　1974年，日本科学技术大学教授武田英明、庆成润教授，以及美国加利福尼亚大学教授戴维斯·桑顿、罗伯特·史帕克、雷·曼彻斯特等人共同提出了电子束曝光测量原理，即将人眼看到的物体转化为电子束，并对电子束进行照相测量。该原理可以应用于数字化成像、精确测量、精密建模等方面。20世纪80年代末期，以欧洲核子研究中心（CERN）的大名鼎鼎的爱因斯坦先生为代表的研究者发明了计算机数字扫描仪Cameca，与ECR一起，成为当时数字化成像领域的两大巨头。

　　20世纪90年代中期以来，随着互联网和信息化的发展，人们逐渐把注意力放在了电子图像领域。传感器、摄影机等新型设备已经能够对物体内部的结构、功能进行电子测量和计算机识别。因此，传统的SEMI及ECR并不足以满足人们对大规模电子图像数据的需求。

　　2011年4月，日本图灵奖获得者近藤浩治氏和友人的团队，发明了超声波成像技术（Ultrasound Imaging Technology）。该技术通过超声波探测电子而生成像电影一样清晰的图像。虽然由于存在技术障碍，目前还无法实现全自动化，但是在将来可能会成为世界领先的医疗设备。另外，日本、韩国等国家也正在积极研发相关产品。

　　电子束曝光是以电子为媒介，利用计算机模拟电子束，将物体表面的结构数据表示出来的方法。由于缺乏准确的原理描述，普通人很难理解电子束曝光的原理。为了帮助普通人更好地理解电子束曝光，本文将介绍电子束曝光的基本原理、工作原理、主要参数、应用场景、安全与隐患、以及基于电子束曝光的最新研究进展。
# 2.核心概念与联系
　　电子束曝光（Electron Cathode Ray Tube，ECT）是指用电子束探测物体表面结构的一项新型照相技术。电子束曝光由电子束（electron beam，简称eb）、激光（laser）、照相元件组成。电子束通过激光放射出，激光对电子束的干扰，形成电子流形，从而获取图像数据。通过各种传感器、图像处理算法、计算机智能算法等，可以获取多种类型的数据。电子束曝光的原理如图1所示：


　　　　　　　图1 ECT原理示意图

　　电子束曝光的主要参数如下：

　　1．探测频率：指电子束的最小功率，单位Hz，电子束频率越低，图像的分辨率越高。常用的电子束曝光器频率范围15kHz～1Mhz。

　　2．光速：单位m/s，电子束的传播速度。由于电子束在屏幕上出现的时间间隔较短，所以其光速比较固定。通常采用单一波长，即等于材料的相干宽度。

　　3．视角：指电子束从物体的哪一侧发出，可采用大视野（FOV>16mm）、中视野（FOV~4.5mm）、小视野（FOV<4mm）三种视角。

　　4．中心深度：指电子束飞过目标距离的像元宽度，通常在几百至几千nm。

　　5．有效跨度：指从投射位置到屏幕最边缘的距离，取决于探测频率、成像系统的尺寸、探测器的厚度、光源的饱和度等。

　　6．曝光时间：指图像采集时间，对于静态模式（一次完整的采集）来说，曝光时间较短，对于动态模式（连续的采集）来说，曝光时间较长。

　　7．帧速率：指每秒钟显示的幅值图片数量。

　　8．动态范围：指相邻像素之间能够区分的最小差异值。

　　9．分辨率：指图像像素的大小。

　　10．分辩率：也称分辨率，指整个图像的大小。

　　11．光路占用时间：指电子束从激光到屏幕各处的消耗时间。

　　12．信噪比：指采集图像所需的存储空间与平均值之间的比值，常用DBR（Dynamic Background Reference，动态背景参考）衡量。

　　13．擦除时间：指电子束曝光完成之后，用来擦去曝光片的准备时间。

　　14．模糊度：指由于电子束的聚焦偏移导致的影像模糊程度。

　　15．图像增益：指相邻像素差异变化的速度，越小，图像效果越平滑，越大，图像效果越锐利。

　　16．失真度：指图像的整体质量，包括对比度、分辨率、亮度、饱和度、色调、色块分布、图像对称性等。

　　17．扫描方向：指电子束沿什么方向运行，可采用垂直、水平、斜向三种扫描方式。

　　18．衍射效应：指探测方向的镜头对图像产生的影响。

　　除了以上参数外，还有一些技术指标也是重要的，如耐候时间、功率效率、吸收率、性能指标、光学特性等。这些指标直接关系到系统的整体性能，对不同的应用场景有着不同的要求。

# 3.核心算法原理和具体操作步骤以及数学模型公式详细讲解
　　电子束曝光的核心算法原理如下：

　　1．电子束流形生成：首先，激光通过一个正交切面（或“孔”）形成“电子束流形”。电子束流形是一个二维空间，在电子束的衍射下形成的是一条曲线，称为“电子束轨迹”，其横轴是光轴（即激光束方向），纵轴是截距（即垂直于光轴的截距）。当激光的角度（即光束倾斜角）确定后，可以采用二维正弦函数或其他类似函数生成电子束流形。

　　2．干涉效应处理：当电子束流形与目标物体发生相遇（即与目标物体的某一侧相交）时，会发生干涉效应。当两条电子束流形在同一平面且相遇时，可能发生方向反转，称为“径向干涉效应”。当两条电子束流形在不同平面，且在相互射出的两个方向上都有相交点时，可能发生横向干涉效应，称为“横向干涉效应”。干涉效应在图像上会引起明显的差异，需要进行处理才能得到清晰的图像。

　　3．图像采集：当电子束流形与目标物体完全重叠时，就开始进行图像采集。图像采集采用的是“深度优先搜索”方法，即从目标物体中心开始，按照电子束流形的方向搜索，直到找到一根受激的电子束为止，然后用相应的算法计算电子束的横坐标与纵坐标。

　　4．图像裁剪：图像采集结束后，将图像裁剪到感兴趣的范围内，以缩小数据量，提升图像质量。

　　5．图像重构：重构的目的是为了获得能反映物体所有结构的信息，而不是仅仅局限于受激电子束的作用。一般采用像素重构算法，如中值滤波法、最小均方误差（MMSE）滤波法、Wiener过滤法等。

　　电子束曝光算法操作步骤如下：

　　1．准备工作：选定好所需要的设备（激光、探测器、计算机硬件），安装必要的软件。

　　2．建立模式阵列：每个探测器配有一个模式阵列，用于定义探测模式、设置参数、保存图像数据。

　　3．调整光源参数：根据所使用的激光和探测器的特性，调整光源的最佳参数，如光速、光束长度、垂直投影、光通量等。

　　4．制作图像指令：制作图像指令文件，定义图像的采集模式、图像的中心位置、图像的观察视角、图像的采集时间、图像的总数等。

　　5．启动图像采集：启动电子束曝光设备，开始接受激光。

　　6．接收数据：采集到的数据在存储缓冲区中等待处理，在处理过程中按指定时间间隔拷贝数据到内存中。

　　7．保存数据：图像数据存放在指定位置，可以使用不同格式的文件存储，如Tiff、PNG、JPEG、RAW等。

　　8．分析数据：将存储在内存中的图像数据导入计算机，进行处理、分析。如裁剪、重构、滤波、颜色校正、边界检测等。

　　9．显示结果：经过处理后的数据显示在计算机屏幕上，完成图像采集。

　　电子束曝光常用的数学模型有：

　　1．曝光模型：电子束曝光的基本数学模型，即矩形双边曝光（Rectangular Aperture Grating，RAG）。RAG模型描述的是在特定视角下的由单色光进入平行垂直投影的平面上运动的电子束。

　　2．Beam Profile Model（BPM）：BPM模型描述的是垂直于投影面的某一圆形区域上运动的电子束，称为半球状区域。BPM模型可以描述电子束沿圆形轨迹扫描时在不同视角下的分布情况，也可以用于估计圆形区域的扫速、半径、偏离轴等。

　　3．Phase Space Model（PSM）：PSM模型描述的是电子束在整个空间中的运动。PSM模型可以描述电子束沿直线轨迹扫描时在不同视角下的分布情况。

　　4．Poisson Boltzmann Distribution（PBD）：PBD模型描述的是无处不在的电子束的概率分布，由玻尔兹曼分布（Boltzmann Distribution，BD）模型描述。PBD模型可用于估计不同电子束间的吸收率，可以对比不同试验条件下的吸收率，揭示差异性。

　　5．Geometric Optics Model（GOM）：GOM模型描述的是电子束在界面上的分布。GOM模型可以描述反射或折射现象的产生，可用于识别接口、测定界面距离、计算折射率等。

　　6．Amplitude Modulation Model（AMM）：AMM模型描述的是双色光的衍射效应，一般用于研究双极化结构。AMM模型可用于分析图像的变化、评价双极化行为，可用于检查样品的表面不规则性、测定材料的导电性、评价材料的稳定性。

　　7．Stokes Shift Theorem（SSH）：SSH定律描述的是当一个电子束沿着特定方向经过某个平面时，另一个电子束沿同一方向、但到达另一平面时的相位差。SSH可用于研究相位滞后的影响。

　　8．Lorentz Equations （LE）：LE可用于研究电子束的粒子行为。LE中描述了一个电子束沿着空间的运动，还可以根据玻尔兹曼分布求解电子束的传播速度。LE可用于研究电子束的频率响应、熔融性能、电子气体密度等。