
作者：禅与计算机程序设计艺术                    

# 1.背景介绍


## 架构模式简介
> 架构模式（Architectural Pattern）是一类描述软件设计原则、结构和组件之间交互方式的规则集合。它并不直接规定这些交互关系，而是提供了一种思路或方法论，使得开发人员可以轻松地创建符合模式要求的系统。

## 为什么要学习架构模式？
1. 有助于提升系统架构设计能力；
2. 提升软件质量和可维护性；
3. 改进软件工程过程及组织管理；
4. 有利于解决复杂系统中各个子系统间的相互依赖关系，提高软件系统的性能、可靠性、可用性和扩展性。

## 架构模式分类
目前有三种主要的架构模式分类：
1. 创建型模式：用于描述如何创建对象、将对象集成到一起，实现对象的组合关系等。如：工厂模式、抽象工厂模式、建造者模式、原型模式、单例模式、对象池模式、依赖注入模式、策略模式、模板模式。
2. 意图模式：通过关注功能而不是对象的职责，帮助开发人员更好地控制系统中不同对象之间的通信。如：命令模式、迭代器模式、访问者模式、备忘录模式、解释器模式、中介模式、观察者模式、状态模式。
3. 结构模式：描述了如何将类或对象结合在一起形成一个系统，从而实现系统的高层次逻辑结构。如：适配器模式、组合模式、桥接模式、装饰器模式、外观模式、享元模式、代理模式、过滤器模式、包装模式、适配器模式、桥接模式、路由模式。


## 架构模式适用场景
根据设计模式应用范围和意义不同，大致分为三类：
1. 创建型模式：适用于创建系统中的各种对象，比如工厂模式、单例模式、原型模式、建造者模式、对象池模式等。
2. 结构型模式：用于系统架构设计中模块化的关键技术之一，涵盖了适配器模式、组合模式、代理模式、享元模式、外观模式、桥接模式等。
3. 行为型模式：体现系统中对象间通信、职责分配和控制等机制，如命令模式、迭代器模式、中介模式、观察者模式、状态模式、策略模式、模板模式等。

# 2.核心概念与联系
## SOLID原则
- Single Responsibility Principle (SRP): 对类来说，只有一个引起它的变化的原因，否则类应该被拆分。
- Open/Closed Principle (OCP): 软件实体应当对扩展开放，对修改封闭。
- Liskov Substitution Principle (LSP): 在所有引用基类的地方都可以使用派生类对象，反过来则不行。
- Interface Segregation Principle (ISP): 不应该强制用户去依赖于他们不使用的接口。
- Dependency Inversion Principle (DIP): 抽象不应该依赖于细节，细节应该依赖于抽象。

## 分层架构
分层架构是指按照系统各层次结构分隔不同的模块，按照物理上的分布在不同文件夹或者子系统中，并使用相应的设计原则和设计模式来确保各层之间的稳定和独立。分层架构模式有如下几种：
- 三层架构（Presentation Layer-View Layer-Business Logic Layer）： Presentation层负责向用户显示信息，包括Web页面、移动应用、终端界面等。View层负责处理UI相关的业务逻辑，例如动画效果、表单验证、数据展示等。Business Logic层负责完成整个业务逻辑，如用户登录注册、购物车、订单等功能的实现。
- MVC模式（Model View Controller）：分为Model层、View层和Controller层，分别处理应用的数据、呈现数据的显示和业务逻辑的处理。
- N层架构（N-tier Architecture）：根据业务功能模块进行分层，每一层都包含自己的领域模型、数据访问、业务逻辑和表示层。

## 模式角色
在分析和总结架构模式时，通常划分出以下几个角色：
1. Context（环境）：代表着整体框架的上下文，包括全局变量、线程信息、请求参数等。
2. Strategy（策略）：用来封装算法，该算法可以在运行时动态选择，比如排序算法。
3. Observer（观察者）：注册到某种事件上，接收通知并做出相应的动作。
4. Command（命令）：封装一个请求，将一个请求者对象绑定到一个接收者对象上。
5. Adapter（适配器）：用于改变两个不兼容的接口之间的连接。
6. Composite（复合对象）：用来表示树状结构。
7. Factory（工厂）：用于产生对象，隐藏了实例化细节。
8. Singleton（单例）：保证某个类仅有一个实例存在且能全局访问。