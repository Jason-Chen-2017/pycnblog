                 

# 1.背景介绍


## 1.1什么是正则表达式？
正则表达式（Regular Expression）是一种用来匹配字符串的模式。它是由用户自定义的一系列字符序列，用来创建与描述一个特定的搜索模式。通过使用正则表达式可以精确控制文本的匹配、替换、查找等操作，极大的方便了数据处理工作。目前，正则表达式已经成为计算机领域中最重要的技术工具之一，被广泛应用在各个行业中。由于其强大的功能，许多开发者都希望能够掌握并熟练使用这种工具，提升自身的能力和效率。本文将对Python中的正则表达式进行详细介绍。
## 1.2为什么要使用正则表达式？
1. 数据清洗：正则表达式是一项强大的工具，可以快速准确地完成数据清理的工作。例如，我们经常会遇到各种各样的文件或数据，这些文件或数据中可能含有一些不需要的字符或者词语。用正则表达式就可以很轻松地从这些数据文件中移除不需要的字符或词语，实现数据的精确化。

2. 数据筛选：很多时候，我们需要根据某些条件对数据进行筛选。比如，我们想找到某个城市的所有电话号码，但其中又存在很多无效的电话号码，因此需要对这些电话号码进行过滤。正则表达式就提供了一种简单有效的方法，只需要利用相应的匹配模式，就可以快速识别出有效的电话号码。

3. 数据提取：正则表达式同样可以用于数据提取。对于一些结构复杂的数据，我们需要按照指定的规则来提取出其中的信息。比如，我们可以定义一个正则表达式，来匹配网页中的所有邮箱地址。这样，我们就可以将网页上的邮箱地址全部提取出来，进行进一步的分析。

4. 替换文本：虽然正则表达式不能代替人工智能，但它还是可以提高我们的工作效率。我们可以借助正则表达式将一些重复性的文本替换成别的词汇或短语，从而使得文本更加整齐和易读。

5. 数据校验：在我们输入数据的时候，往往会出现很多错误的输入，我们可以通过正则表达式进行数据的校验。比如，我们要求用户输入的手机号码必须满足一定规范，就可以利用正则表达式进行验证。

总结来说，正则表达式可以帮助我们解决大量实际问题，降低人力成本，提升工作效率。
# 2.核心概念与联系
## 2.1基本语法
- `.` : 匹配任意字符
- `*` : 匹配前面的元素零次或多次
- `+` : 匹配前面的元素一次或多次
- `?` : 匹配前面的元素零次或一次
- `[ ]` : 表示范围字符集
- `[^ ]` : 表示不包括范围字符集的字符集合
- `{n}` : 匹配前面的元素 n 次
- `{m,n}` : 匹配前面的元素至少 m 次且最多 n 次
- `\` : 将下一个字符作为普通字符
- `^` : 匹配字符串的开始位置
- `$` : 匹配字符串的结束位置
## 2.2元字符类
- `\d` : 匹配数字 [0-9]
- `\D` : 匹配非数字 [^0-9]
- `\w` : 匹配单词字符 [a-zA-Z0-9_]
- `\W` : 匹配非单词字符 [^a-zA-Z0-9_]
- `\s` : 匹配空白字符 [\t\n\r\f\v]
- `\S` : 匹配非空白字符 [^ \t\n\r\f\v]
- `\b` : 匹配边界字符 (单词边界)
- `\B` : 匹配非边界字符 (非单词边界)
## 2.3预定义字符类
- `\p{xxx}` : xxx代表Unicode属性 (Category)
- `\P{xxx}` : 非xxx Unicode属性 (Category)
## 2.4POSIX字符类
- `\cx` : x 是任何非字母数字的 ASCII 字符 (例如 `\cI`) ，匹配其后的单个字符。
- `\X` : 匹配任何类型的单个Unicode字符，相当于前面所述的`\w`, `\s`, 或其他Unicode分类器。
## 2.5组合使用
- `( )` : 分组 ()，捕获结果
- `|` : 或 |，选择符号
- `.` : 匹配除换行符外的任何字符
- `\A` : 匹配字符串的开头
- `\z` : 匹配字符串的末尾，如果设置了隐式的锚点 (start of string)，还会匹配字符串中间的换行符。
- `\G` : 在匹配上一次匹配失败的地方继续匹配。
## 2.6常用模式
- `\d+\.\d+` : 匹配浮点数
- `\d{4}-\d{2}-\d{2}` : 匹配日期 (yyyy-mm-dd)
- `\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}` : 匹配Email地址
- `\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b` : 匹配Email地址 (更严格)
- `\b[0-9a-fA-F]{32}\b|\b[0-9a-fA-F]{40}\b` : 匹配MD5、SHA1、SHA256哈希值
## 2.7Python库
- re模块(推荐) : 使用re模块的match()方法进行匹配。re模块提供一系列函数用于处理正则表达式。
```python
import re

pattern = r'hello world' # 正则表达式
text = 'Hello World'    # 待匹配文本
result = re.search(pattern, text)   # 查找第一个匹配成功的子串，返回Match对象，没有找到则返回None
if result:
    print('Found:', result.group())     # 获取匹配到的文本内容
    start, end = result.span()          # 获取匹配到的文本的起始和终止位置
    print('Start at', start, ', End at', end)
    for i in range(len(result.groups())):
        group = result.group(i + 1)      # 获取指定分组的文本内容
        if group is not None:
            print('Group', i + 1, ':', group)
else:
    print('Not found')
```
- search()方法 : 只查找第一次匹配到的子串。它的参数为两个字符串，分别为正则表达式和待匹配文本。它的返回值为Match对象，包含了匹配到的文本内容、起始和终止位置及每一组的匹配结果等信息。如需获取全部的匹配结果，可使用findall()方法。
- findall()方法 : 寻找字符串内的所有符合模式的子串，并返回一个列表。它的参数也只有一个字符串表示待匹配的文本。
```python
import re

pattern = r'\d+'              # 匹配至少一个数字
text = 'There are two numbers: 12 and 34.'          
results = re.findall(pattern, text)       # 返回列表 ['12', '34']
for num in results:
    print(num)         # 输出结果 '12\n34'
```