
作者：禅与计算机程序设计艺术                    

# 1.简介
  

在过去几年里，股市纷纷“跌宕起伏”，但很多投资者却依然“傻盲”地拿着一支股票就盯上了它，尤其是在2017年股灾疫情后，大量国际投资者涌入股市抢滩。不少投资者对股市的理解还停留在资金面上的简单购买，忽略了其本质上的价值评估、持仓风险控制和投资理念。在这个过程中，散户们也感受到越来越多的系统性风险，如股价波动太剧烈、管理层经营策略存在问题等，需要更多的方式来规避这些风险。

为了帮助投资者更好的了解股市投资方式，降低参与门槛，让更多的人可以真正掌握股市知识，保障个人投资收益，创造新的投资机会，10月3日，由连续创作者雪松资本主办的名为《How to make money by investing in stocks?—Personal investment thoughts》（股票投资之道：个人投资想法）的技术博客文章首次发布，文章内容全面丰富，从经济学的角度出发，系统阐述股票投资的基本原理和理念，并通过实际例子向读者展示如何通过配置指标选股，降低交易成本，提高投资回报率；从投资分析的角度出发，系统论述行业轮动、公司重组、交易节奏、业绩预测、资产定价等一系列重要概念和方法，分享投资者必备的理财技巧，推广投资理念，鼓励大家共同进步。

我将在此文中分享自己的一些股票投资心得，希望能够帮助读者避免踌躇满志，做到知己知彼，了解投资趋势及选择正确的投资方式。当然，作为一名技术人员，我承担不了每天为资本市场洗衣服的工作，只希望借助市场的数据指导大家做出正确的投资决策，让自己顺利追赶美股、港股甚至A股的牛熊走势。

# 2. 概念、术语与算法
## 2.1 概念、术语
### 2.1.1 投资
投资分为长期投资和短期投资两类。在长期投资中，投资者通常持有相对固定时间内的资产或货币，目的是为了获得稳定的收益。长期投资的代表性产品是货币基金，如信用合作基金、债券基金和现金基金；短期投资则包括股票投资、商品期货投资和债券投资，通常投资金额较小且变化不频繁。投资包括两个主要方面，一是投资本身，即选择某种资产或服务，以获取有形或无形的利益；二是投资目标，即制定具体的计划，把资金用于适当的市场，增强对市场信息的掌握能力，进行有效的风险控制和市场管理。

### 2.1.2 股票
股票是由证券公司发行的一种交易商品，任何人都可以以普通股的形式购买股票。一般而言，股票分为股票市场（又称为上海证券交易所）发行的、直接流通的以及其他形式的股票。其中，直接流通的股票通常称为流通股或者实时股，是按市场供求关系在证券交易所上市交易的证券。另外，股票市场占有绝大部分的证券市场份额，因此一般也被称为A股市场。

### 2.1.3 A股
A股，即American Stock market的缩写，是一个以美国纽约证券交易所为主的股票市场。目前，A股市场最大的特点就是上市公司数量众多。截止2019年末，A股上市公司总数达到53万个左右，并且每天都有大量新股进入上市行列。A股股价的波动范围很大，主要取决于市场整体的需求情况。

### 2.1.4 情绪市场
情绪市场（emotional market）也是一种股票市场，它的目的在于通过影响股票的价格来影响投资人的情绪。最早的时候，情绪市场就是属于传统股票市场的一项附加品，但是随着股市热度的上升和股票价格的上涨，情绪市场逐渐成为一个独立的市场，吸引了一批经验丰富的专业投资人加入，开始按照他们的意愿交易股票。如今，情绪市场已经成为股票市场中的重要组成部分。

情绪市场中的股票分为正面的（比如说阳线股），负面的（比如说阴线股）和中性的股票。阳线股是指公司价值评估较高、业绩表现优秀、财务状况较佳、管理层声誉良好等等，往往价格上升或涨幅较大；阴线股则是指公司处于亏损状态、业绩表现差、财务状况较差、管理层声誉较差等，往往价格下跌或跌幅较大；中性股则是指公司业绩平稳、财务状况较为健康、管理层声誉一般等，往往价格波动较小。通过操纵情绪市场股票的价格，投资人可以影响自身的投资行为。

情绪市场投资的逻辑在于：情绪市场的买入信号一定来源于大盘的基本面消息，并且股价远高于大盘的平均价格水平。通过情绪市场的买入信号，投资人将有可能实现超额收益。但是，投资人需要注意保持风险警惕，在价格突破前及时卖出股票，因为情绪市场的买卖信号不是即时的，而是延迟性的，并且情绪市场股票的收益率往往比股票市场的收益率要低。

### 2.1.5 行业轮动
行业轮动（industry cycle）是指不同行业之间周期性的交换，目的是为了防止某个行业过热导致整个市场的震荡效应。一般情况下，轮动是通过板块轮动和股票轮动两种方式进行的。板块轮动是指同一板块的股票经过一段时间的变动，使得它所在的行业发生变化，比如，美国的医疗器械行业的轮动就发生在20世纪50年代末期。股票轮动是指买入和卖出的股票数量与其价格相关，通常发生在一些成熟的行业，比如，互联网、游戏领域之间的循环轮动。

### 2.1.6 公司重组
公司重组（stock split）是指股票的价格结构发生变化，即股东将持有的股份根据公司的发展需要再次拆分。公司重组可能伴随着股价的上涨，也可以促使股价下跌。重组往往伴随着巨大的财务危机，特别是在股票市场狂轰乱炸的情况下，股价的快速反弹往往会导致重组的减速和放缓，继而引起市场的恐慌。

### 2.1.7 交易节奏
交易节奏（trading schedule）是指每个工作日的股市的开市时间，如上午、下午、晚间、白天等。不同的交易节奏会影响股票市场的波动，比如，早间的股市交易时段相对容易出现贵金属贬值的情况，而午间的股市交易时段则难免会出现通胀的压力。

### 2.1.8 业绩预测
业绩预测（forecasting）是指对未来的股票价格、销售量、利润、市盈率等信息进行预测。业绩预测可以帮助投资者做出更好的投资决策。业绩预测的方法主要分为两种：一是经典型数法，如平均线模型和趋势跟踪法；二是机器学习算法，如基于LSTM、GRU等神经网络的预测模型。

### 2.1.9 资产定价
资产定价（valuation methodology）是指在股票市场进行股票的估值，目的是确定每个股票的价值。投资者在股票市场的投资，不仅需要了解最新市场价格的信息，还需考虑财务数据、业绩数据、分析师的评级等因素对股票的估值进行调整。投资者可以通过资产定价工具、网站或APP获取准确的估值信息。

## 2.2 算法
### 2.2.1 均线模型
均线模型（moving average model）是指根据历史数据计算出股票移动平均线的模型。根据均线模型，投资者可以使用线条图、柱状图或指标等手段来表现股票的走势。如果股票的价格上涨，则表示股票走势呈现上升趋势，股票的平均价格越接近最高价，则股票的走势越活跃；如果股票的价格下跌，则表示股票走势呈现下跌趋势，股票的平均价格越接近最低价，则股票的走势越平稳。

常用的均线模型有以下几种：
1. Simple Moving Average (SMA)：简单移动平均线，它算出当日的平均价格，权重由远及近的时间加权平均得到。其公式为：SMA = （第i日收盘价 + 第(i-n+1)日收盘价 +... + 第(i-1)日收盘价）/n ，其中n为统计的天数，比如每日的5日、10日、20日等。

2. Exponential Moving Average (EMA)：指数移动平均线，它的基础思路是用比较近期的数据来估计较远期的数据，是对 SMA 的一种改进。其公式为：EMA = （第i日收盘价 * 2/(n+1)） + （第(i-1)日收盘价 * (n-1)/(n+1))，其中n为统计的天数，比如每日的12、26、90日等。

3. Weighted Moving Average (WMA)：加权移动平均线，它比简单移动平均线更具动态性，对股价的影响大，因此对一些周期性的大幅跳跃具有敏锐性。其公式为：WMA = (w_1*Close_1+w_2*Close_(n+1)+...+w_n*Close_n)/sum(w), 其中 Close 为收盘价序列，w 为权重序列，n 表示序列长度。

4. Double Moving Average System (DMA)：双移动平均系统，它采用简单移动平均线和加权移动平均线，共同构建股票的趋势和价格特征。其计算方法是：DMI 指标的快速均线和慢速均线叠加，带来强弱指示，判断股票的趋势和走势。DMA 系统旨在利用各种技术分析工具辅助判断股票趋势。

### 2.2.2 Trend Following Strategy
趋势跟踪策略（trend following strategy）是指以当前的股价趋势为参照，寻找转折点或结束点，然后以此为依据发出买入或卖出信号。这种策略往往适用于价格呈上升趋势的股票，虽然在股价走势不明显、反复震荡的情况下表现不佳。具体操作如下：

1. 设置买入、卖出条件。对于每一个交易日，投资者都会查看过去五、十、二十天的股价数据，利用均线模型、趋势线等方式来判断股价是否处于上升趋势或下跌趋势。如果股价处于上升趋势，则投资者就卖出现有的股票；如果股价处于下跌趋势，则投资者就买入新的股票。

2. 使用止损。止损是指在触发买入信号之后，设定一个价格下限，如果股价继续下跌，那么就停止交易。如果股价下跌超过止损价格，则清仓。

3. 使用止盈。止盈是指在触发卖出信号之后，设定一个价格上限，如果股价继续上涨，那么就停止交易。如果股价上涨超过止盈价格，则立刻清仓。

4. 限制止损。止损是一种非常有效的保护机制，但同时也会导致交易次数的增加，导致亏损严重。为了避免止损带来的损失，可以设置一个止损系数，如果触发止损，则交易数量乘以止损系数。

### 2.2.3 Volatility Control Strategy
波动控制策略（volatility control strategy）是指关注股价波动的变化，调整买卖比例，保持多空仓位的平衡，以防止风险的激增。波动控制策略的主要思路是避免股价大的波动给投资者造成损失。具体操作如下：

1. 使用布林带。布林带是指股价波动区间，它由以下三个部分构成：中轨线（bullish or bull market threshold），也就是股价的中值线；上轨线（upper band），上轨线与中轨线之差等于布林带宽度；下轨线（lower band）。布林带是通过移动平均线和标准差来构造的。

2. 在两头移动。波动控制策略要求股价不要完全靠自己一手。所以，为了使波动区间刚好落在上轨线与下轨线之间，投资者要在两头移动，而不是一味买入、卖出。这就需要结合其他技术指标一起使用，如支撑线、阻力线、移动平均线等。

3. 浮盈管理。浮盈管理是波动控制策略的另一重要工具。浮盈是指投资者预期在某个特定时刻股价将有正向或负向的调整，但由于各种原因，调整过程可能无法完成。例如，如果企业出现财务危机，股价可能涨落不定，这种情况下，浮盈管理就派上用场。浮盈管理的具体做法是：设定一个预期盈利，如果浮盈超过预期盈利，则卖出股票；如果浮盈低于预期亏损，则补仓或买入股票。

4. 使用空头平衡仓位。为了保证多空仓位的平衡，波动控制策略往往会调整仓位。比如，一方面，波动大的地方，投资者可能会持有更多的空头仓位，另一方面，波动小的地方，投资者可能会持有更多的多头仓位。

### 2.2.4 MACD Indicator
摆动指标（Moving Average Convergence Divergence，MACD）是一种利用一阶差分和二阶差分曲线的移动平均线的策略。MACD指标主要用来观察股价在支撑线和阻力线之间的变化情况。其公式为：DIF = EMA(CLOSE,12)-EMA(CLOSE,26)，DEA = EMA(DIF,9)，MACD = （DIF-DEA）*2，其中，EMA表示指数移动平均线。

如果MACD指标上穿红叉，说明股价上涨趋势持续增加，投资者可以买入股票；如果MACD指标下穿蓝色三角形，说明股价下跌趋势持续减弱，投资者可以卖出股票。

### 2.2.5 Bollinger Band Strategy
布林带策略（Bollinger Band Strategy）是指以布林带（又称中间带、带状线）的宽度为依据，在多空之间划分交易信号。布林带策略的操作模式比较复杂，需要对股价的趋势、上涨压力、下跌压力等因素有充分的认识。

基本思路是先建仓位，再调整仓位，这里的建仓方式与均线模型类似，比如在布林带中上方买入股票，下方卖出股票；调整仓位的方式也分多种，比如随着波动加大，仓位上调；如果波动减弱，仓位下调。

除此之外，还有一些专门针对股价波动变化的指标，如移动平均线的波动率，可以作为参考。

# 3. 实际案例：How to select right stock for personal investments?
## 3.1 前期准备

在做股票投资之前，首先要做好以下准备：

1. 开户：准备好美元账户，每月15日及之前必须先确认账户余额是否充足。

2. 注册数字货币账号：注册数字货币账号，需要有固定的支付密码。

3. 下载软件：根据操作系统的不同，下载相应的软件，如手机端、电脑端、网页端。

## 3.2 个股投资

个股投资是最基础的投资方式，是指根据自己对行业、公司的研究，对该行业或公司的股票进行交易。做股票投资有一个明确的步骤：

1. 查找股票：首先查找符合自己需求的股票，可以在网络上搜索，或者直接到本地证券交易所查找，也可使用交易软件内置的查询功能。

2. 获取股票行情：下载对应的软件，根据自己设置的自动获取数据的时间间隔，将股票行情获取到本地。

3. 做好交易准备：阅读交易须知，了解买卖股票的规则，了解交易费用、过户费用、滑点、手续费等。

4. 根据实际情况决定交易标的：根据自己的情况，决定买入或卖出哪些股票。

5. 卖出或买入股票：根据个股持仓数量和策略，卖出或买入股票。

6. 记录交易结果：将每笔交易的收益、亏损、交易数量、交易日期、交易价格等记录下来，为止后续的回看提供依据。

下面以A股中的某支股票为例，讲述股票投资的步骤：

假设购买的股票是淡马锡，股票代码为000651。现在，假设自己欲购买的股票为淡马锡股票，有以下几个问题需要考虑：

1. 是否可交易？淡马锡的交易状态一般由“开市”、“连续竞价”、“暂停交易”、“闭市”四种情况组成，只有处于开市状态才能交易。

2. 当日成交额是否充足？一般来说，每日成交额不能低于一定比例，否则可能会被系统过滤掉。

3. 涨跌幅是否满足要求？一般来说，个股涨跌幅不能超过一定比例，否则就会出现“停盘”。

4. 股票的历史价格走势是否符合自己的预期？个股的历史价格走势应该受到大盘和行业的影响，因此没有什么好坏只有适合不适合。

5. 买卖股票的价格是否符合要求？个股的买卖价格应该符合公司对于股价的预期，以及个人对股价走势的判断。

根据以上几个问题，可以提前做好股票选股的准备。下面介绍一下如何通过各个指标进行股票筛选：

## 3.3 选股方法

### 3.3.1 市盈率PE(Trailing PE Ratio)

市盈率（P/E ratio）是衡量一个公司市净率和其净利润的比率，即一个公司的股价与其每股收益的比值。它反映了一个公司的价值大小和市场对其股票持有者的预期。市盈率的计算公式为：PE= (股价 / 净利润 ) x NASDAQ 指数，其中股价为上一交易日的收盘价，NASDAQ 指数为美国股票交易商协会公布的股价指数。

PE的计算值越高，则表示该股票的市值越大，其估值也就越高，投资者可以优先考虑投资此股票。PE计算值通常会出现下列情况：

- 年初至年底，为期两年的股票市值会产生较大的上涨，但到第二年度的时候市值仍然会降低。这是由于上市初期还处于初始阶段，市场参与者暂时缺乏信心，因此，市盈率会出现较大的波动。

- 年底临近，市值持续下降，PE值会维持较低水平，但随着市值走高，PE值可能会持续上升。这是由于市场参与者逐渐认识到公司的价值，参与者才开始认真参与到股票市场的竞争中，同时，一些具有实力的公司会通过调整股价上涨来获取投资者的青睐。

### 3.3.2 涨跌幅(%)

股票的涨跌幅%（change percent）反映了股票的价格变动幅度。涨跌幅%的计算方式为：（当前股价 - 上一交易日收盘价） / 上一交易日收盘价 × 100%。

涨跌幅%的值越高，表示股票价格越涨；涨跌幅%的值越低，表示股票价格越跌。

一般来说，涨跌幅%越高，则股票价格越具吸引力，投资者就可以考虑购买；涨跌幅%越低，则股票价格跌势难挡，市场上可能已经没有足够的购买力。

### 3.3.3 换手率（%）

股票的换手率%（turnover ratio）反映了股票市场的流通状况，即买卖盘活跃度。换手率%的计算方式为：截止当日的总股本 / 每股流通股数 * 100%。

换手率%的值越高，表示股票的流通状况越活跃；换手率%的值越低，表示股票的流通状况越冷清。

一般来说，换手率%越高，表示股票的成交量越大，市场的流通情况越活跃；换手率%越低，表示股票的成交量越小，市场的流通情况越冷清。

### 3.3.4 市销率PS(Price Sales Ratio)

市销率PS(Price Sales Ratio)是指每股股价与其营业收入之比，用来评价一个企业是由股份驱动还是由营业收入驱动。

市销率的计算公式为：PS=股价 / (营业收入 / 每股股价) 。

市销率越高，表示股票的价格与营业收入相关性越强，投资者可以优先考虑购买。

### 3.3.5 盈利能力(Profitability)

盈利能力是一个比较复杂的指标，它试图通过不同的指标来描述公司的盈利状况。盈利能力有3个方面：毛利率、净利润率、收益质量指标。

毛利率是指销售收入与营业总成本的比值，毛利率越高，表明公司销售产品的能力越强。毛利率的计算公式为毛利 / 营业总收入 * 100%。

净利润率是指净利润与营业总收入之比，净利润率越高，表明公司的获利能力越强。净利润率的计算公式为净利润 / 营业总收入 * 100%。

收益质量指标主要包括销售净利率、资产的回报率、投资的回报率以及营业利润率。销售净利率是衡量企业销售产品的能力的指标，它衡量企业销售收入与其总成本之比。资产的回报率与投资的回报率反映了企业获得资产的速度和质量。

营业利润率则衡量的是企业的管理业绩，反映企业管理能力和经营效率。一般来说，管理业绩越好，则企业的盈利能力越强。

### 3.3.6 ROE(Return on Equity)

ROE(Return on Equity)是指净利润与平均净资产的比值，ROE越高，表明企业的投资回报率越高。ROE的计算公式为净利润 / 平均净资产 * 100%。

平均净资产是指企业的所有者权益（包括所有者权益和资本）与流动资产之和的平均值。平均净资产的计算公式为: (所有者权益 + 未分配利润) / 流动资产 。

一般来说，ROE越高，则表示投资者对公司的信心越强，投资者可能会更倾向于选择这家公司。

### 3.3.7 市值(Market Capitalization)

市值反映了公司在市场中的流通情况，市值越高，表示公司的受欢迎程度越高。市值的计算公式为股票市值 / 总市值，总市值一般由股票市值占其总股本比例累积而来。

市值越高，说明公司的股价比较稳定，投资者可以优先考虑买入；市值越低，说明公司股票市场上可能不存在竞争力，投资者应谨慎对待。

### 3.3.8 贝塔率(Beta)

贝塔率beta是一个对市场风险的反映。贝塔率越高，表示市场风险越小，投资者认为投资某个公司的收益不会超过公司本身的亏损。

贝塔率计算公式为：beta=(市场风险 - 公司风险) / 公司风险 * 100% 。

市场风险指的是一段时间内公司的波动率，它由投资者的预期、市场的波动、金融市场的供需关系等决定。公司风险则是指公司的价值缺陷或不足带来的风险。

一般来说，贝塔率的计算方式是公司的研发团队根据过往历史数据的分析，而非简单的财务数据。因此，投资者不需要过多的考虑贝塔率的具体数值，只需根据股票的相关信息来判断是否购买该公司。

## 3.4 投资建议

选股的过程就是找到一个适合自己的投资项目，当你对某个项目十分有兴趣的时候，你可以选择阅读他的介绍、相关研究报告或者公开信息。一般来说，投资要有耐心，最好是持续的投资一段时间，这样才会有收益。对于很多人来说，股票投资是一个漫长的过程，但最终的结果始终是有价值的。