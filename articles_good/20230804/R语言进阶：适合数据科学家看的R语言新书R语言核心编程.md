
作者：禅与计算机程序设计艺术                    

# 1.简介
         
　　在R语言中进行数据分析和建模任务时，数据结构、变量处理、统计运算、函数开发等技能都是至关重要的。然而，R语言的核心功能（如基础的赋值、流程控制语句、数据结构、内置的函数库）已经可以满足大多数日常的数据分析工作。因此，作为一个“高级语言”，R语言并没有完全覆盖所有的需要用到的分析技能，很多数据分析工作者还需要了解R语言更高级的一些特性，例如多种类型的循环、可扩展性强的函数系统、外部C语言接口、以及多核CPU的并行计算能力等。但无论是数据分析还是建模，都离不开R语言的广泛应用和普及。所以，为了帮助更多的R用户提升自己的数据分析能力、增强其数据科学思维，《R语言核心编程》就是一本全面、系统地介绍R语言编程的书籍。
         　　作者:黄俊杰/刘易辉/许霆露/唐雨晴/蒋凡哥/徐昌阳/陈鹏/张继元
         　　出版社：机械工业出版社
         　　出版时间：2021年1月
         　　定价：99元/盒（实体版）/249元/盒（电子版）
         　　官方网址：https://www.r-jc.com/book
         　　京东商城地址：https://search.jd.com/Search?keyword=%E7%BA%BF%E5%AD%A6%E6%9D%BF&enc=utf-8&wq=r+language+%E8%AE%A1%E7%AE%97&pvid=c130f3b7a4d54afca1cfbe57dbaa6d0e
         　　微信公众号：R语言学习之道（ID：R_Learning）
         　　期望读者：全体R语言爱好者/R语言入门学习者/R语言进阶学习者/数据分析家/数据科学家
         　　此书将包括以下内容：
            - 数据类型（整数型、浮点型、字符串型、日期型、因子型）；
            - 变量类型（标量、向量、矩阵、数组、数据框、列表）；
            - 汇总、聚集和重塑函数（summary()、aggregate()、reshape()）；
            - 分组和汇总运算（group by and summarize）；
            - 随机抽样（sample()）；
            - 正则表达式（regexpr(),gregexpr(), regexec())；
            - 排序和匹配（order()、match()）；
            - 函数定义、参数传递、默认值设置、作用域和返回值的影响；
            - 包的设计和编写；
            - 数据输入输出（read.table()、write.csv()）；
            - 可扩展性（S4和其他对象系统）；
            - C语言接口；
            - 流程控制语句（if else while for）；
            - 基本图形绘制（bar plot, scatter plot, boxplot, histgram)；
            - R在科学计算中的应用；
            - 在R中实现并行计算；
            - 通过源代码分享平台CRAN发布自己的R包。
            
         # 2.基本概念术语说明
         　　R语言中最基础的概念包括：变量、表达式、语句、函数、环境、模式。其中，变量用于存储数据，表达式可以表示任何值或过程，语句用来完成特定任务，函数可以实现特定任务，环境提供了存储、查找变量的命名空间，模式指定了变量所具有的属性。下表列出了R语言中主要的基本概念、术语和符号。
         　　概念|英文缩写|说明
          --|--|--
          变量|Variable|用于存储数据的名称或标识符
          表达式|Expression|表示值或过程
          语句|Statement|指示计算机要做什么
          注释|Comment|解释程序中某些特定内容
          函数|Function|用于执行特定任务的指令集合
          参数|Parameter|传递给函数的值
          返回值|Return Value|函数调用的结果
          环境|Environment|用于存储和管理变量的上下文信息
          模式|Mode|用于指定变量所属的数据类型
          包|Package|软件分发的单元，包含共享数据和相关的函数、文档和示例
          生命周期|Life Cycle|包从创建到删除的时间段
          命名空间|Namespace|用于解析变量名称的逻辑分区
          对象|Object|提供持久化存储的数据结构
          对象引用|Object Reference|指向一个对象的内存地址
          字节码|Bytecode|编译后的机器语言程序
          预编译文件|Precompiled File|可直接运行的程序二进制文件
          
         # 3.核心算法原理和具体操作步骤以及数学公式讲解
         ## 3.1 数据类型
         　　1.整数型（integer）：整型数字，又称为整数或者整数型数据。整数型数据只有正负、0和非零数。
            int <- c(-3,-2,-1,0,1,2,3)
            class(int) # 查看变量的类
            
            [1] "numeric"
            
            对整数型变量求和使用“+”符号，也可以使用“sum()”函数。对整数型变量取平方可以使用“^”符号。
         　　2.浮点型（double）：小数，也叫做双精度实数或者浮点数。浮点型数据可表示实数，既带有整数部分，也带有小数部分。
            float <- c(-3.5,-2.5,-1.5,-0.5,0.5,1.5,2.5,3.5)
            class(float) # 查看变量的类
            
            [1] "numeric"
            
            对浮点型变量求和可以使用“+”符号，也可以使用“sum()”函数。对浮点型变量取平方可以使用“^”符号。
         　　3.字符串型（character）：字符串文字，通常由单引号或双引号括起来的一串字符组成。字符串型数据不仅可以表示文字，而且可以执行字符串操作。
            str <- c("Hello","World")
            class(str) # 查看变量的类
            
            [1] "character"
            
            可以使用“paste()”函数合并两个字符串。
         　　4.日期型（Date）：日期对象，用于记录日期和时间。
            date <- as.Date("2021-06-01")
            class(date) # 查看变量的类
            
            [1] "Date"
            
            可以使用“format()”函数格式化日期显示。
            注意：R语言中的日期格式是YYYY-MM-DD。
          
          ## 3.2 变量类型
          1.标量（Scalar）：只有一个值的变量。
          2.向量（Vector）：一系列按顺序排列的一维数据结构。
          3.矩阵（Matrix）：二维数组形式的矩阵。
          4.数组（Array）：三维以上数组形式的数组。
          5.数据框（Data Frame）：一种用于存储多维数据集的结构，数据框可以看作是一个表格型的数据结构。
          6.列表（List）：一种容器型的数据结构，元素可以是任意类型的数据。
          下面我们用例子来描述变量的类型。
          ```R
          # 创建标量
          scalar <- 1L
          print(class(scalar)) # "integer"
          # 创建向量
          vector <- c(1L,2L,3L)
          print(class(vector)) # "numeric"
          # 创建矩阵
          matrix <- matrix(1:6,ncol = 3)
          print(class(matrix)) # "matrix"
          # 创建数组
          array <- array(runif(24), dim = c(2,3,4))
          print(class(array)) # "array"
          # 创建数据框
          data.frame <- data.frame(name = letters[1:3], age = c(18,20,22))
          print(class(data.frame)) # "data.frame"
          # 创建列表
          list <- list(x = c(1L,2L,3L), y = TRUE)
          print(class(list)) # "list"
          ```
          此外还有一些特殊类型的变量比如逻辑型（logical），复数型（complex），字符型（character）。
        
        ## 3.3 汇总、聚集和重塑函数
        ### summary()函数
         　　summary()函数可以产生一个简单的摘要统计信息。下面我们来举例说明。
          ```R
          x <- rnorm(100)   # 生成一个服从正态分布的随机数序列
          mean(x)          # 得到平均值
          median(x)        # 得到中位数
          var(x)           # 得到方差
          sd(x)            # 得到标准差
          min(x)           # 最小值
          max(x)           # 最大值
          range(x)         # 极差
          sum(x > 0)       # 大于0的元素的个数
          summary(x)       # 生成多个摘要统计信息
          ```
          会生成如下结果：
          ```R
          Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
          -2.1063    0.1391   -0.0093    0.0000    0.1349    2.1890 
          ```
        ### aggregate()函数
         　　aggregate()函数用于对数据进行分组聚集。下面我们来举例说明。
          ```R
          mtcars$cyl # 查看mtcars数据框的列名
          mpg   wt   qsec  vs   am   gear  carb
          -----------------------------------------------------
          21.0  2.62  16.46  0    1    4     4
          21.0  2.875 17.02  0    0    3     1
          22.8  3.215 15.84  0    0    3     1
          21.4  3.44  17.30  0    0    3     2
          18.7  3.46  20.22  1    0    3     1
          18.1  3.57  15.50  1    0    3     2
          14.3  3.57  16.87  0    0    3     2
          ```
          假设我们想根据车轮数对mpg数据进行聚集，可以使用aggregate()函数。
          ```R
          aggregate(formula = mpg ~ cyl, data = mtcars, FUN = mean)
              cyl   mpg
         1 4    26.63333
         2 6    22.90000
         3 8    19.70000
          ```
          上面的结果显示，4轮汽车的平均mpg值为26.63333，6轮汽车的平均mpg值为22.9，8轮汽车的平均mpg值为19.7。
          
        ### reshape()函数
         　　reshape()函数可以把数据转换成不同的形状。下面我们来举例说明。
          ```R
          data(airquality)  # 读取空气质量数据集
          airquality
          Ozone Solar.R Wind Temp Month Day
          1    41   190  7.4  67     5   1
          2    36   118  8.0  72     5   2
          3    12   149  8.0  74     5   3
          4    18   313  6.9  75     5   4
         ... (剩余省略)...
          ```
          如果我们想要按照月份列对数据进行聚集，可以使用reshape()函数。
          ```R
          melted <- melt(airquality, id.vars="Month", variable.name="Day")
          melted
               Month Day value
         1          5   1   41
         2          5   2   36
         3          5   3   12
         4          5   4   18
         5          5   5   13
         6          5   6   11
         7          5   7    8
         8          5   8    5
         9          5   9    2
         10         5   10   3
         11         5   11   3
         12         5   12   3
          ```
          上面的结果显示，按照月份列对数据进行聚集后，每一行对应一天的观测值。