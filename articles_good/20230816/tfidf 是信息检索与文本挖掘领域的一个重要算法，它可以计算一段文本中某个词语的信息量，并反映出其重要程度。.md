
作者：禅与计算机程序设计艺术                    

# 1.简介
  

tf-idf (term frequency - inverse document frequency)是一种用于信息检索与文本挖掘的统计方法。tf-idf 算法的提出主要基于以下假设：

1、如果某一词或短语在一份文档中出现的频率高，并且在其他文档中很少出现，则认为此词或者短语具有代表性。

2、如果某一词或者短语在一个文档中经常出现，而在另一个文档中很少出现，则认为此词或者短语是文档中的噪声。

基于上述两点，tf-idf 算法通过反映一字词在一篇文档中重要性的方式，来评估不同文档之间的相似度，从而实现信息检索目的。

对于中文来说，词形还原（Part-of-speech tagging）是一个比较耗时的过程，特别是在对较长文本进行处理时，往往会导致运行时间过长。在很多中文信息检索系统中，都将分词和词性标注两个过程合并成一步完成，即利用分词工具对文档进行预处理，然后在后续的处理过程中直接使用已经标注好的词性。这种方式能够大大减小处理时间。

tf-idf 是信息检索与文本挖掘领域的一个重要算法，它可以计算一段文本中某个词语的信息量，并反映出其重要程度。tf-idf 的原理比较复杂，因此，这里只给出一些 tf-idf 相关的热门论文，以及最常用的中文维基百科词条。
# 2.TF(Term Frequency)

TF(t,d)表示词t在文档d中出现的次数，它的值越高，意味着这个词越重要。

可以按照下列方式计算TF值：

a. 求每个词的出现次数；

b. 把所有文档中的词汇统计起来得到一个词汇总表，每个词汇出现的次数除以整个文档集的词汇数量，即TF(t,d)=count(t)/sum_all_words;

c. 当两个文档完全相同的时候，它们的词频向量是相同的；当两个文档完全不相同的时候，它们的词频向量也是不同的。

TF 是一个正值矩阵，每个词对应于某行，每个文档对应于某列，元素值表示该词在该文档中出现的次数。举个例子，有三个文档 D1,D2,D3：

doc1 = "The quick brown fox jumps over the lazy dog"
doc2 = "She sells seashells by the seashore"
doc3 = "the cow jumped over the moon"

得到的 TF 矩阵如下：

|       | doc1     | doc2    | doc3   |
|-------|----------|---------|--------|
| The   | 0.2      | 0.0     | 0.0    |
| quick | 0.2      | 0.0     | 0.0    |
| brown | 0.2      | 0.0     | 0.0    |
| fox   | 0.1      | 0.0     | 0.0    |
| jumps | 0.1      | 0.0     | 0.0    |
| over  | 0.1      | 0.0     | 0.0    |
| lazy  | 0.1      | 0.0     | 0.0    |
| dog   | 0.1      | 0.0     | 0.0    |
| She   | 0.0      | 0.2     | 0.0    |
| sells | 0.0      | 0.1     | 0.0    |
| seashells | 0.0 | 0.1     |        |
| by    | 0.0      | 0.0     | 0.0    |
| the   | 0.0      | 0.0     | 0.1    |
| seashore | 0.0  |         |        |
| cow   | 0.0      | 0.0     | 0.1    |
| jumped | 0.0     | 0.0     | 0.1    |
| over  | 0.0      | 0.0     | 0.1    |
| moon  | 0.0      | 0.0     | 0.1    |

# 3.IDF(Inverse Document Frequency)

IDF(t,D)表示词t的逆文档频率，它的值越低，意味着这个词越重要。

可以按照下列方式计算 IDF 值：

a. 在所有文档中统计词t的出现次数N(t);

b. 对于每篇文档 d∈D，计算 idf=log[N(t)+1]/log[D];

c. 对所有的 t 计算 idf 后，得到一个 idf 向量，它与 TF 矩阵的大小相同，元素值表示对应的词语的 idf 值。

IDF 是一个负值矩阵，每个词对应于某行，元素值为 t 在 D 中的逆文档频率。举个例子，有三个文档 D1,D2,D3：

D = {doc1, doc2, doc3}

求出的 IDF 矩阵如下：

|       | doc1     | doc2    | doc3   |
|-------|----------|---------|--------|
| The   | log(3/3) | log(3/3)| log(3/3)|
| quick | log(3/3) | log(3/3)| log(3/3)|
| brown | log(3/3) | log(3/3)| log(3/3)|
| fox   | log(3/3) | log(3/3)| log(3/3)|
| jumps | log(3/3) | log(3/3)| log(3/3)|
| over  | log(3/3) | log(3/3)| log(3/3)|
| lazy  | log(3/3) | log(3/3)| log(3/3)|
| dog   | log(3/3) | log(3/3)| log(3/3)|
| She   | log(3/3) | log(3/3)| log(3/3)|
| sells | log(3/3) | log(3/3)| log(3/3)|
| seashells | log(3/3) | log(3/3)|          |
| by    | log(3/3) | log(3/3)| log(3/3)|
| the   | log(3/3) | log(3/3)| log(3/3)|
| seashore | log(3/3) |           |         |
| cow   | log(3/3) | log(3/3)| log(3/3)|
| jumped | log(3/3) | log(3/3)| log(3/3)|
| over  | log(3/3) | log(3/3)| log(3/3)|
| moon  | log(3/3) | log(3/3)| log(3/3)|

# 4.TF-IDF 得分

TF-IDF 得分 = TF(t,d)*IDF(t)

可以根据 TF 和 IDF 矩阵分别计算每个词语的 TF-IDF 得分。每个文档的最终得分由所有词语的 TF-IDF 得分之和决定。

举个例子：

文档 D1: “The quick brown fox jumps over the lazy dog”

文档 D2: “She sells seashells by the seashore”

文档 D3: “the cow jumped over the moon”

TF 矩阵如下：

|       | doc1     | doc2    | doc3   |
|-------|----------|---------|--------|
| The   | 0.2      | 0.0     | 0.0    |
| quick | 0.2      | 0.0     | 0.0    |
| brown | 0.2      | 0.0     | 0.0    |
| fox   | 0.1      | 0.0     | 0.0    |
| jumps | 0.1      | 0.0     | 0.0    |
| over  | 0.1      | 0.0     | 0.0    |
| lazy  | 0.1      | 0.0     | 0.0    |
| dog   | 0.1      | 0.0     | 0.0    |
| She   | 0.0      | 0.2     | 0.0    |
| sells | 0.0      | 0.1     | 0.0    |
| seashells | 0.0 | 0.1     |        |
| by    | 0.0      | 0.0     | 0.0    |
| the   | 0.0      | 0.0     | 0.1    |
| seashore | 0.0  |         |        |
| cow   | 0.0      | 0.0     | 0.1    |
| jumped | 0.0     | 0.0     | 0.1    |
| over  | 0.0      | 0.0     | 0.1    |
| moon  | 0.0      | 0.0     | 0.1    |

IDF 矩阵如下：

|       | doc1     | doc2    | doc3   |
|-------|----------|---------|--------|
| The   | log(3/3) | log(3/3)| log(3/3)|
| quick | log(3/3) | log(3/3)| log(3/3)|
| brown | log(3/3) | log(3/3)| log(3/3)|
| fox   | log(3/3) | log(3/3)| log(3/3)|
| jumps | log(3/3) | log(3/3)| log(3/3)|
| over  | log(3/3) | log(3/3)| log(3/3)|
| lazy  | log(3/3) | log(3/3)| log(3/3)|
| dog   | log(3/3) | log(3/3)| log(3/3)|
| She   | log(3/3) | log(3/3)| log(3/3)|
| sells | log(3/3) | log(3/3)| log(3/3)|
| seashells | log(3/3) | log(3/3)|          |
| by    | log(3/3) | log(3/3)| log(3/3)|
| the   | log(3/3) | log(3/3)| log(3/3)|
| seashore | log(3/3) |           |         |
| cow   | log(3/3) | log(3/3)| log(3/3)|
| jumped | log(3/3) | log(3/3)| log(3/3)|
| over  | log(3/3) | log(3/3)| log(3/3)|
| moon  | log(3/3) | log(3/3)| log(3/3)|

那么，各词的 TF-IDF 分数如下：

|       | doc1     | doc2    | doc3   |
|-------|----------|---------|--------|
| The   | 0.405465 | 0.0     | 0.0    |
| quick | 0.405465 | 0.0     | 0.0    |
| brown | 0.405465 | 0.0     | 0.0    |
| fox   | 0.197530 | 0.0     | 0.0    |
| jumps | 0.197530 | 0.0     | 0.0    |
| over  | 0.197530 | 0.0     | 0.0    |
| lazy  | 0.197530 | 0.0     | 0.0    |
| dog   | 0.197530 | 0.0     | 0.0    |
| She   | 0.0      | 0.28768 |-1.0986 |
| sells | 0.0      | 0.1356  |-1.0986 |
| seashells | 0.0  | 0.1356  |-0.0    |
| by    | 0.0      | 0.0     |-1.0986 |
| the   | 0.0      | 0.0     | 0.0    |
| seashore | 0.0  |         |-0.0    |
| cow   | 0.0      | 0.0     | 0.0    |
| jumped | 0.0     | 0.0     | 0.0    |
| over  | 0.0      | 0.0     | 0.0    |
| moon  | 0.0      | 0.0     | 0.0    |

各文档的最终得分分别为：

D1: 0.4054 * 0.0 + 0.4054 * (-1.0986) + 0.4054 * (-0.0) + 0.1975 * 0.0 + 0.1975 * (-1.0986) + 0.1975 * (-0.0)...

D2: 0.0 * 0.28768 + 0.0 * 0.1356 + 0.0 * (-0.0) + 0.0 * 0.28768 + 0.0 * 0.1356 + 0.0 * (-0.0)...

D3: 0.0 * (-1.0986) + 0.0 * (-1.0986) + 0.0 * (-0.0) + 0.0 * (-1.0986) + 0.0 * (-1.0986) + 0.0 * (-0.0)...

最后，按照降序排列各文档得分，得出排序结果：D3 > D1 > D2。