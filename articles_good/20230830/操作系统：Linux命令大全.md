
作者：禅与计算机程序设计艺术                    

# 1.简介
  


Linux命令行(command line interface)是一个用户与计算机交互的方式，可以用来管理文件、运行应用程序、访问网络资源、配置系统设置等。在日常生活中，我们使用各种各样的工具来完成工作。例如，我们用记事本编辑文档，用Excel表格进行数据分析，用PowerPoint制作演示文稿，用浏览器浏览网页。我们通常会使用操作系统提供的图形界面(GUI)，这样就可以方便快捷地执行这些任务。但是，由于操作系统之间存在着巨大的差异性，因此在不同的操作系统上并不一定都有相同的图形界面。

很多初级软件工程师、系统管理员以及科研人员可能对Linux命令行知之甚少。为了帮助他们快速了解Linux命令行的基础知识，《9. 操作系统：Linux命令大全》将通过一系列教程，从最基础的命令到复杂的命令，带领大家了解Linux命令行的基本使用技巧。

阅读完《9. 操作系统：Linux命令大全》之后，读者应该能够掌握Linux命令行的基本操作方法、命令参数及常用命令选项。阅读此书时，你可以跳过一些基础性的命令介绍，而直接进入更加高级的命令或系统管理相关的主题，提升自己对Linux系统管理的理解。

# 2.基本概念与术语
## 2.1 Linux与Unix
在介绍Linux的命令之前，首先要介绍一下Linux与Unix操作系统之间的关系。

- Unix是Multics操作系统的变种，由贝尔实验室的Robert Love上世纪70年代末开发出来。其目的是为分时系统设计一种可靠且可移植的计算环境，并用于多种终端机及微型计算机。
- Multics操作系统支持多道程序执行，具有非常强大的硬件资源管理能力，但其系统调用接口、进程控制、文件系统等都不是很易于使用。
- 在1969年，Love和Robbie合伙创办了UNIX System V Release 4，它提供了一个基于BSD Unix兼容内核的操作系统。该版本称为UNIX System V，缩写为“UNIVAC”，其定位就是一个稳定的UNIX操作系统。
- 为了吸引更多的开发者参与开发Unix，Robert Love开发了一套兼容Multics的Unix API，并由该社区驱动的GNU计划推出了自由软件基金会（FSF）。经过十几年的开发，Free Software Foundation终于发布了GNU General Public License (GPL)，这是一种copyleft授权协议，任何人都可以在GPL许可下分发源码。
- GNU项目推出了Linux操作系统，它采用了GPL许可证，包括了Unix、Minix和GNU计划的大部分源代码，以及其他许多开源软件。随后，Linux社区又推出了自己的发行版，如Ubuntu、Red Hat Enterprise Linux等。

所以，Linux和Unix都是同一个词，它们都是基于Unix开发的操作系统。但是，它们之间也存在一些区别。

- 有些Unix命令可能只适用于某些版本的Unix，比如比较命令cmp。有的Unix命令只能在特定版本的Unix上运行，比如su。
- 有些Unix命令只能在特定的系统上运行，比如系统管理命令shutdown。有的Unix命令只能在特定情况下才能运行，比如ls -l /dev/null。
- 有些Unix命令只能由root权限运行，比如chown命令。有的Unix命令允许普通用户运行，比如grep命令。
- 有些Unix命令不符合POSIX标准，如bc命令。有的Unix命令没有完全符合POSIX标准，如mount命令。
- 有些Unix命令是过时的或者已被淘汰的，比如talk命令。有的Unix命令在新的系统版本中可能无法运行，比如 finger命令。

所以，熟悉Linux的命令，需要具备一定的系统架构和底层概念，并且有一定的自我纠正能力。

## 2.2 命令与参数
命令与参数是Linux命令行的核心。每一条Linux命令都由一个名字和多个参数组成。

- 命令：一个命令就是一个动作，比如mkdir表示创建目录。
- 参数：参数是指在命令后跟的一个或多个选项、输入或输出的文件名、设备名称等。

命令一般由两部分组成，命令名和参数。如下所示：

```bash
command [options] [arguments]
```

其中，[] 表示参数是可选的，<> 表示参数是必需的，{} 表示参数可以出现一次或多次。参数与参数之间使用空格隔开。

### 2.2.1 命令名
命令名是Linux命令的实际名称，比如ls表示列表命令，cd表示更改目录命令。

命令名由字母、数字、连字符(-)或点号(.)组成，并且不能以连字符(-)或点号(.)开头。

### 2.2.2 参数类型
Linux命令的参数分为以下几类：

1. 位置参数：位于命令名后的固定位置的参数。
2. 选项参数：以"-"或"--"开头的参数，用于控制命令的行为。
3. 短格式参数：以"-"开头的参数，只能有一个字符，可以连续组合。
4. 长格式参数：以"--"开头的参数，最长255个字符。

对于每种参数类型，Linux命令都有其特殊的语法规则。下面我们一一介绍每个参数类型的具体语法规则。

#### 2.2.2.1 位置参数
位置参数是指位于命令名后的固定位置的参数。例如，ls命令的第一个参数指定待列出的目录或文件。

位置参数是命令最主要的参数类型，因为它决定了命令的功能和作用对象。对于ls命令，位置参数必须是目录或文件名。

#### 2.2.2.2 选项参数
选项参数是指以"-"或"--"开头的参数，用于控制命令的行为。例如，cp命令的"-r"选项表示递归拷贝目录。

选项参数通常表示布尔值，即当选项参数被指定时，命令就会按照预期方式工作；当选项参数不被指定时，命令就会按照默认方式工作。

#### 2.2.2.3 短格式参数
短格式参数是指以"-"开头的参数，只能有一个字符，可以连续组合。例如，ls命令的"-al"参数表示以长日期显示文件属性信息。

短格式参数通常表示命令的缩写形式，比如"-v"表示显示详细信息。

#### 2.2.2.4 长格式参数
长格式参数是指以"--"开头的参数，最长255个字符。例如，cp命令的"--recursive"参数表示递归拷贝目录。

长格式参数通常表示命令的全称，比如"--help"表示显示命令帮助信息。

# 3.命令详解
接下来，我们就以介绍Linux命令的方式，逐一介绍常用的命令。

## 3.1 ls命令
ls命令用于显示目录下的内容。

### 3.1.1 命令格式

```bash
ls [options] [file or directory name]
```

### 3.1.2 参数描述

|参数 | 含义                                                         |
|-------|-----------------------------------------------------------------|
|-a    | 显示隐藏文件                                                  |
|-l    | 以详细格式显示文件和目录                                       |
|-d    | 查看目录的属性信息                                              |
|-h    | 使用人类可读的形式显示文件大小                                 |
|-R    | 递归处理，将指定目录下的所有子目录下的文件一并显示              |
|--full-time   | 显示完整的时间信息                                            |
|-t    | 根据修改时间排序                                               |
|-S    | 根据文件尺寸进行排序                                           |
|-X    | 根据扩展名排序                                                 |

### 3.1.3 实例

```bash
# 显示当前目录中的文件
ls 

# 显示指定路径中的文件
ls /path/to/directory 

# 显示详细信息，显示隐藏文件
ls -la

# 显示详细信息，显示隐藏文件，按照修改时间排序
ls -lat 

# 显示目录的属性信息 
ls -ld 

# 使用人类可读的形式显示文件大小
ls -lh 

# 递归处理，将指定目录下的所有子目录下的文件一并显示
ls -R /path/to/directory

# 显示完整的时间信息
ls --full-time 

# 根据修改时间排序
ls -t

# 根据文件尺寸进行排序
ls -S

# 根据扩展名排序
ls -X
```

## 3.2 cd命令
cd命令用于切换当前工作目录。

### 3.2.1 命令格式

```bash
cd [directory path]
```

### 3.2.2 参数描述

无。

### 3.2.3 实例

```bash
# 切换到根目录
cd /

# 切换到上级目录
cd..

# 切换到home目录
cd ~

# 切换到当前目录
cd.

# 切换到指定目录
cd /path/to/directory
```

## 3.3 mkdir命令
mkdir命令用于创建目录。

### 3.3.1 命令格式

```bash
mkdir [options] directory_name
```

### 3.3.2 参数描述

|参数     | 含义                                |
|-------------|-----------------------------------------|
|-m mode      | 设置目录权限模式                         |
|-p           | 可以创建不存在的父目录                  |

### 3.3.3 实例

```bash
# 创建单个目录
mkdir testdir

# 创建多个目录
mkdir dir1 dir2 dir3

# 指定权限创建目录
mkdir -m 777 testdir

# 创建不存在的父目录
mkdir -p /path/to/parent/directories/testdir
```

## 3.4 rm命令
rm命令用于删除文件或目录。

### 3.4.1 命令格式

```bash
rm [options] file_names
```

### 3.4.2 参数描述

|参数     | 含义                                |
|------------|-------------------------------|
|-i          | 删除文件前进行确认                      |
|-f          | force，强制删除                            |
|-r,-R       | 递归删除目录                             |
|-d          | 删除空目录                                   |
|-f          | 忽略不存在的文件                           |
|-s,-S       | 仅删除为空目录                              |

### 3.4.3 实例

```bash
# 删除单个文件
rm filename

# 删除多个文件
rm file1 file2 file3

# 强制删除文件
rm -f filename

# 删除目录
rm -r dirname

# 忽略不存在的文件
rm -f filename1 filename2

# 仅删除为空目录
rm -s dirname
```

## 3.5 mv命令
mv命令用于移动或重命名文件或目录。

### 3.5.1 命令格式

```bash
mv [options] source destination
```

### 3.5.2 参数描述

|参数     | 含义                                |
|----------|----------------------------------------|
|-b        | 覆盖目标文件                           |
|-f        | 覆盖现存的目标文件                     |
|-i        | 若目标文件存在则询问是否覆盖            |
|-u        | 更新目标文件，源文件比目标文件新         |

### 3.5.3 实例

```bash
# 移动文件
mv file1 file2

# 重命名文件
mv oldfilename newfilename

# 移动目录
mv dir1 dir2

# 更新目标文件，源文件比目标文件新
mv -u file1 file2
```

## 3.6 cp命令
cp命令用于复制文件或目录。

### 3.6.1 命令格式

```bash
cp [options] source destination
```

### 3.6.2 参数描述

|参数     | 含义                                |
|------------|-------------------------------|
|-a          | 复制目录时保留权限和所有者标志                |
|-d,-r,-p    | 将源文件信息记录在备份日志中               |
|-f          | 强制复制，若目标文件存在则覆盖             |
|-i          | 若目标文件存在则询问是否覆盖                |
|-p,-P        | 保留源文件的所有属性                      |

### 3.6.3 实例

```bash
# 复制文件
cp file1 file2

# 复制目录
cp -r dir1 dir2

# 复制整个目录
cp -r /path/to/source/dir/* /path/to/destination/dir

# 覆盖现存的目标文件
cp -f file1 file2

# 覆盖目标文件询问是否覆盖
cp -i file1 file2

# 复制目录，保留权限和所有者标志
cp -ar dir1 dir2
```

## 3.7 pwd命令
pwd命令用于显示当前工作目录。

### 3.7.1 命令格式

```bash
pwd
```

### 3.7.2 参数描述

无。

### 3.7.3 实例

```bash
# 显示当前目录
pwd
```

## 3.8 touch命令
touch命令用于创建或更新文件。

### 3.8.1 命令格式

```bash
touch [options] file_names
```

### 3.8.2 参数描述

|参数     | 含义                                |
|------------|-------------------------------|
|-a          | 只更改存档文件的最后访问时间               |
|-c          | 仅创建文件                           |
|-d date     | 使用指定日期时间                        |
|-m          | 更改存档文件的最后修改时间               |
|-r ref-file | 把指定文件的内容加到该文件                   |
|-t time     | 使用指定的时间                          |

### 3.8.3 实例

```bash
# 创建文件
touch file1

# 修改文件时间
touch -amod 201910212000 file1

# 使用指定时间
touch -t 201910212000 file1

# 同时创建多个文件
touch file1 file2 file3
```

## 3.9 cat命令
cat命令用于查看文件内容。

### 3.9.1 命令格式

```bash
cat [options] file_names
```

### 3.9.2 参数描述

|参数     | 含义                                |
|----------|------------------------------|
|-n        | 对每行加编号                    |
|-b        | 对非空行编号                   |
|-E        | 显示结尾空白字符                 |
|-T        | 不进行转义处理                     |
|-v        | 列出所有字符，除了LFD和TAB符号    |
|-e        | 文件结束标记字符串              |

### 3.9.3 实例

```bash
# 查看文件内容
cat file1

# 查看多个文件内容
cat file1 file2 file3

# 列出所有字符，除了LFD和TAB符号
cat -v file1

# 查看文件内容，并加编号
cat -n file1
```

## 3.10 echo命令
echo命令用于打印字符串。

### 3.10.1 命令格式

```bash
echo [-ne] [string...]
```

### 3.10.2 参数描述

|参数     | 含义                                |
|------------|------------------------------|
|-n          | 不自动换行                            |
|-e          | 支持反斜杠转义字符                    |

### 3.10.3 实例

```bash
# 打印文字
echo "Hello World!"

# 打印文字，不自动换行
echo -n "Hello\tWorld!\n"

# 打印文字，支持反斜杠转义字符
echo -e "This is a \n\"example\"\n of backslash escapes."
```

## 3.11 man命令
man命令用于显示某个命令的手册页。

### 3.11.1 命令格式

```bash
man command_name
```

### 3.11.2 参数描述

无。

### 3.11.3 实例

```bash
# 显示cp命令手册页
man cp

# 显示man命令手册页
man man
```

## 3.12 chmod命令
chmod命令用于修改文件或目录的权限。

### 3.12.1 命令格式

```bash
chmod [options] mode file_names
```

### 3.12.2 参数描述

|参数     | 含义                                |
|-----------|--------------------------------------|
|-c,--changes   | 显示变化的部分                      |
|-R,--recursive   | 递归应用到所有子目录                       |
|-v,--verbose   | 执行时显示详细信息                     |
|-f,--silent   | 静默模式，不显示错误消息                  |
|mode   | 文件或目录的新权限，可以用数字或符号表示法。 |

### 3.12.3 实例

```bash
# 修改文件权限
chmod 777 file1

# 修改目录权限，递归应用到所有子目录
chmod -R 777 directory1

# 永久设置文件权限
chmod o+w filename

# 显示权限变更
chmod -cv file1
```

## 3.13 chown命令
chown命令用于改变文件或目录的所有者。

### 3.13.1 命令格式

```bash
chown [options] owner[:group] file_names
```

### 3.13.2 参数描述

|参数     | 含义                                |
|------------|-------------------------------------|
|-R,--recursive   | 递归应用到所有子目录                    |
|-v,--verbose   | 执行时显示详细信息                     |
|-f,--no-dereference   | 若指定路径是一个软链接文件，直接修改其指向的文件；否则，修改软链接本身。 |
|owner   | 用户名或UID                           |
|:group   | 可选的组名或GID                       |

### 3.13.3 实例

```bash
# 修改文件所有者
chown user1:user2 file1

# 修改目录所有者，递归应用到所有子目录
chown -R user1:user2 directory1

# 永久设置目录所有者
chown :user2 directory1
```

## 3.14 head命令
head命令用于显示文件开头的内容。

### 3.14.1 命令格式

```bash
head [options] file_name
```

### 3.14.2 参数描述

|参数     | 含义                                |
|------------|-------------------------------------|
|-n   | 显示指定行数                         |
|-q   | 安静模式，只显示首行                    |
|-v   | 显示文件名                           |

### 3.14.3 实例

```bash
# 查看文件开头内容
head file1

# 查看文件开头5行内容
head -n 5 file1

# 静默模式，只显示首行
head -qn 1 file1
```

## 3.15 tail命令
tail命令用于显示文件末尾的内容。

### 3.15.1 命令格式

```bash
tail [options] file_name
```

### 3.15.2 参数描述

|参数     | 含义                                |
|------------|-------------------------------------|
|-n   | 显示指定行数                         |
|-q   | 安静模式，只显示末尾行                  |
|-v   | 显示文件名                           |

### 3.15.3 实例

```bash
# 查看文件末尾内容
tail file1

# 查看文件末尾5行内容
tail -n 5 file1

# 静默模式，只显示末尾行
tail -qn 1 file1
```

## 3.16 find命令
find命令用于搜索文件。

### 3.16.1 命令格式

```bash
find [options] starting_point [action]
```

### 3.16.2 参数描述

|参数     | 含义                                |
|------------|-------------------------------------|
|-maxdepth level   | 最大搜寻目录层数                           |
|-mindepth level   | 最小搜寻目录层数                           |
|-name pattern   | 按名称查找                                  |
|-iname pattern   | 按名称忽略大小写查找                        |
|-type type   | 查找指定类型的文件，type类型见下面说明                 |
|-size n[cwbkMG]   | 查找文件长度，+/-整数[B]、+/-整数%[块大小]、+/-n|单位块，大小单词分别对应byte，kB，MB，GB|
|-amin n   | 查找文件的访问时间在n分钟前到现在                      |
|-anewer file   | 查找更改时间比file新的文件                        |
|-cmin n   | 查找文件内容被修改时间在n分钟前到现在                |
|-newer file   | 查找更改时间比file旧的文件                        |
|-perm mode   | 查找权限匹配的文件                           |
|-user name   | 查找属于指定用户的文件                        |
|-group name   | 查找属于指定组的文件                          |
|-print   | 打印文件名                                    |
|-exec command {} ;   | 执行命令，注意分号                              |
|-ok command {} ;   | 对找到的文件进行确认，确认后再执行命令，如不确认则放弃，命令的返回值非0退出       |

type类型说明：

- f 文件
- d 目录
- l 符号连接

action说明：

- delete 删除文件
- print0 每个文件名用 null 字符分隔，便于输入到 xargs 中
- ls 打印文件名，类似于 ls 命令

### 3.16.3 实例

```bash
# 列出当前目录下所有文件
find.

# 列出当前目录及其子目录下所有文件
find./ -print

# 列出当前目录及其子目录下所有文件，包括隐藏文件
find. -name ".*" -prune -o -print

# 列出当前目录下所有目录
find. -type d

# 列出当前目录下所有非目录文件
find.! -type d

# 按名称查找，查找所有以".txt"结尾的文件
find. -name "*.txt"

# 按名称忽略大小写查找，查找所有以".TXT"结尾的文件
find. -iname "*.TXT"

# 查找大小等于100KB的文件
find. -size +100k -size -100k

# 查找文件长度大于1M的文件
find. -size +1M

# 查找更改时间在7天前的文件
find. -mtime -7

# 查找更改时间在7天前或者7天内的文件
find. \( -mtime -7 \) -or \( -mtime +7 \)

# 查找更改时间比file1新或者file2新的文件
find. -newer file1 -o -newer file2

# 查找属于group1的的文件
find. -group group1

# 查找文件权限匹配文件权限的情况
find. -perm 777

# 对找到的文件进行确认
find. -name "*hello*" -ok rm {} \;
```

## 3.17 grep命令
grep命令用于搜索文本。

### 3.17.1 命令格式

```bash
grep [options] pattern file_names
```

### 3.17.2 参数描述

|参数     | 含义                                |
|------------|-------------------------------------|
|-i   | 忽略大小写                               |
|-v   | 排除符合范例的内容                        |
|-w   | 完全匹配整个单词                         |
|-x   | 完全匹配整个字符串                       |
|-l   | 仅显示匹配的文件名                       |
|-L   | 仅显示不匹配的文件名                     |
|-n   | 显示匹配行号                             |
|-H   | 显示文件相对路径                         |
|-A num   | 显示匹配结果的num行之后的行                |
|-B num   | 显示匹配结果的num行之前的行                |
|-C num   | 显示匹配结果的上下文                     |
|-o   | 只显示匹配的单词                         |
|-e pattern   | 搜索模式                                  |
|-f file   | 从指定文件读取搜索模式                    |

### 3.17.3 实例

```bash
# 查找当前目录下的所有文件中包含hello的行
grep hello *

# 查找当前目录下的所有文件中包含hello的行，忽略大小写
grep -i hello *

# 查找当前目录下的所有文件中以test开头的行
grep ^test *

# 查找当前目录下的所有文件中以test结尾的行
grep test$ *

# 查找当前目录下的所有文件中包含world，并显示行号
grep world * -n

# 查找当前目录下的所有文件中包含world，并显示上下文
grep world * -C 2

# 只显示文件名
grep hello * -l

# 只显示不包含world的文件名
grep -vl world *

# 只显示文件名和匹配的行
grep -Hn 'hello' *

# 只显示匹配的单词
grep -Eo 'hello.*' *

# 从指定文件读取搜索模式
grep -f search_pattern.txt file
```